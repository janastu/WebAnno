!function(t, e) {
    "use strict";
    "object" == typeof module && "object" == typeof module.exports ? module.exports = t.document ? e(t, !0) : function(t) {
        if (!t.document) throw new Error("jQuery requires a window with a document");
        return e(t);
    } : e(t);
}("undefined" != typeof window ? window : this, function(t, e) {
    "use strict";
    var n = [], o = t.document, i = Object.getPrototypeOf, r = n.slice, s = n.concat, a = n.push, u = n.indexOf, l = {}, h = l.toString, c = l.hasOwnProperty, d = c.toString, p = d.call(Object), f = {}, g = function(t) {
        return "function" == typeof t && "number" != typeof t.nodeType;
    }, m = function(t) {
        return null != t && t === t.window;
    }, v = {
        type: !0,
        src: !0,
        noModule: !0
    };
    function y(t, e, n) {
        var i, r = (e = e || o).createElement("script");
        if (r.text = t, n) for (i in v) n[i] && (r[i] = n[i]);
        e.head.appendChild(r).parentNode.removeChild(r);
    }
    function w(t) {
        return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? l[h.call(t)] || "object" : typeof t;
    }
    var b = function(t, e) {
        return new b.fn.init(t, e);
    }, x = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
    function T(t) {
        var e = !!t && "length" in t && t.length, n = w(t);
        return !g(t) && !m(t) && ("array" === n || 0 === e || "number" == typeof e && e > 0 && e - 1 in t);
    }
    b.fn = b.prototype = {
        jquery: "3.3.1",
        constructor: b,
        length: 0,
        toArray: function() {
            return r.call(this);
        },
        get: function(t) {
            return null == t ? r.call(this) : t < 0 ? this[t + this.length] : this[t];
        },
        pushStack: function(t) {
            var e = b.merge(this.constructor(), t);
            return e.prevObject = this, e;
        },
        each: function(t) {
            return b.each(this, t);
        },
        map: function(t) {
            return this.pushStack(b.map(this, function(e, n) {
                return t.call(e, n, e);
            }));
        },
        slice: function() {
            return this.pushStack(r.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(t) {
            var e = this.length, n = +t + (t < 0 ? e : 0);
            return this.pushStack(n >= 0 && n < e ? [ this[n] ] : []);
        },
        end: function() {
            return this.prevObject || this.constructor();
        },
        push: a,
        sort: n.sort,
        splice: n.splice
    }, b.extend = b.fn.extend = function() {
        var t, e, n, o, i, r, s = arguments[0] || {}, a = 1, u = arguments.length, l = !1;
        for ("boolean" == typeof s && (l = s, s = arguments[a] || {}, a++), "object" == typeof s || g(s) || (s = {}), 
        a === u && (s = this, a--); a < u; a++) if (null != (t = arguments[a])) for (e in t) n = s[e], 
        s !== (o = t[e]) && (l && o && (b.isPlainObject(o) || (i = Array.isArray(o))) ? (i ? (i = !1, 
        r = n && Array.isArray(n) ? n : []) : r = n && b.isPlainObject(n) ? n : {}, s[e] = b.extend(l, r, o)) : void 0 !== o && (s[e] = o));
        return s;
    }, b.extend({
        expando: "jQuery" + ("3.3.1" + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(t) {
            throw new Error(t);
        },
        noop: function() {},
        isPlainObject: function(t) {
            var e, n;
            return !(!t || "[object Object]" !== h.call(t) || (e = i(t)) && ("function" != typeof (n = c.call(e, "constructor") && e.constructor) || d.call(n) !== p));
        },
        isEmptyObject: function(t) {
            var e;
            for (e in t) return !1;
            return !0;
        },
        globalEval: function(t) {
            y(t);
        },
        each: function(t, e) {
            var n, o = 0;
            if (T(t)) for (n = t.length; o < n && !1 !== e.call(t[o], o, t[o]); o++) ; else for (o in t) if (!1 === e.call(t[o], o, t[o])) break;
            return t;
        },
        trim: function(t) {
            return null == t ? "" : (t + "").replace(x, "");
        },
        makeArray: function(t, e) {
            var n = e || [];
            return null != t && (T(Object(t)) ? b.merge(n, "string" == typeof t ? [ t ] : t) : a.call(n, t)), 
            n;
        },
        inArray: function(t, e, n) {
            return null == e ? -1 : u.call(e, t, n);
        },
        merge: function(t, e) {
            for (var n = +e.length, o = 0, i = t.length; o < n; o++) t[i++] = e[o];
            return t.length = i, t;
        },
        grep: function(t, e, n) {
            for (var o = [], i = 0, r = t.length, s = !n; i < r; i++) !e(t[i], i) !== s && o.push(t[i]);
            return o;
        },
        map: function(t, e, n) {
            var o, i, r = 0, a = [];
            if (T(t)) for (o = t.length; r < o; r++) null != (i = e(t[r], r, n)) && a.push(i); else for (r in t) null != (i = e(t[r], r, n)) && a.push(i);
            return s.apply([], a);
        },
        guid: 1,
        support: f
    }), "function" == typeof Symbol && (b.fn[Symbol.iterator] = n[Symbol.iterator]), 
    b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function(t, e) {
        l["[object " + e + "]"] = e.toLowerCase();
    });
    var _ = function(t) {
        var e, n, o, i, r, s, a, u, l, h, c, d, p, f, g, m, v, y, w, b = "sizzle" + 1 * new Date(), x = t.document, T = 0, _ = 0, C = st(), A = st(), S = st(), E = function(t, e) {
            return t === e && (c = !0), 0;
        }, k = {}.hasOwnProperty, N = [], D = N.pop, O = N.push, F = N.push, P = N.slice, R = function(t, e) {
            for (var n = 0, o = t.length; n < o; n++) if (t[n] === e) return n;
            return -1;
        }, H = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", I = "[\\x20\\t\\r\\n\\f]", L = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+", j = "\\[" + I + "*(" + L + ")(?:" + I + "*([*^$|!~]?=)" + I + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + L + "))|)" + I + "*\\]", q = ":(" + L + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + j + ")*)|.*)\\)|)", U = new RegExp(I + "+", "g"), M = new RegExp("^" + I + "+|((?:^|[^\\\\])(?:\\\\.)*)" + I + "+$", "g"), B = new RegExp("^" + I + "*," + I + "*"), $ = new RegExp("^" + I + "*([>+~]|" + I + ")" + I + "*"), V = new RegExp("=" + I + "*([^\\]'\"]*?)" + I + "*\\]", "g"), W = new RegExp(q), z = new RegExp("^" + L + "$"), X = {
            ID: new RegExp("^#(" + L + ")"),
            CLASS: new RegExp("^\\.(" + L + ")"),
            TAG: new RegExp("^(" + L + "|[*])"),
            ATTR: new RegExp("^" + j),
            PSEUDO: new RegExp("^" + q),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + I + "*(even|odd|(([+-]|)(\\d*)n|)" + I + "*(?:([+-]|)" + I + "*(\\d+)|))" + I + "*\\)|)", "i"),
            bool: new RegExp("^(?:" + H + ")$", "i"),
            needsContext: new RegExp("^" + I + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + I + "*((?:-\\d)?\\d*)" + I + "*\\)|)(?=[^-]|$)", "i")
        }, Q = /^(?:input|select|textarea|button)$/i, Z = /^h\d$/i, Y = /^[^{]+\{\s*\[native \w/, K = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, G = /[+~]/, J = new RegExp("\\\\([\\da-f]{1,6}" + I + "?|(" + I + ")|.)", "ig"), tt = function(t, e, n) {
            var o = "0x" + e - 65536;
            return o != o || n ? e : o < 0 ? String.fromCharCode(o + 65536) : String.fromCharCode(o >> 10 | 55296, 1023 & o | 56320);
        }, et = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, nt = function(t, e) {
            return e ? "\0" === t ? "\ufffd" : t.slice(0, -1) + "\\" + t.charCodeAt(t.length - 1).toString(16) + " " : "\\" + t;
        }, ot = function() {
            d();
        }, it = yt(function(t) {
            return !0 === t.disabled && ("form" in t || "label" in t);
        }, {
            dir: "parentNode",
            next: "legend"
        });
        try {
            F.apply(N = P.call(x.childNodes), x.childNodes), N[x.childNodes.length].nodeType;
        } catch (t) {
            F = {
                apply: N.length ? function(t, e) {
                    O.apply(t, P.call(e));
                } : function(t, e) {
                    for (var n = t.length, o = 0; t[n++] = e[o++]; ) ;
                    t.length = n - 1;
                }
            };
        }
        function rt(t, e, o, i) {
            var r, a, l, h, c, f, v, y = e && e.ownerDocument, T = e ? e.nodeType : 9;
            if (o = o || [], "string" != typeof t || !t || 1 !== T && 9 !== T && 11 !== T) return o;
            if (!i && ((e ? e.ownerDocument || e : x) !== p && d(e), e = e || p, g)) {
                if (11 !== T && (c = K.exec(t))) if (r = c[1]) {
                    if (9 === T) {
                        if (!(l = e.getElementById(r))) return o;
                        if (l.id === r) return o.push(l), o;
                    } else if (y && (l = y.getElementById(r)) && w(e, l) && l.id === r) return o.push(l), 
                    o;
                } else {
                    if (c[2]) return F.apply(o, e.getElementsByTagName(t)), o;
                    if ((r = c[3]) && n.getElementsByClassName && e.getElementsBy) return F.apply(o, e.getElementsByClassName(r)), 
                    o;
                }
                if (n.qsa && !S[t + " "] && (!m || !m.test(t))) {
                    if (1 !== T) y = e, v = t; else if ("object" !== e.nodeName.toLowerCase()) {
                        for ((h = e.getAttribute("id")) ? h = h.replace(et, nt) : e.setAttribute("id", h = b), 
                        a = (f = s(t)).length; a--; ) f[a] = "#" + h + " " + vt(f[a]);
                        v = f.join(","), y = G.test(t) && gt(e.parentNode) || e;
                    }
                    if (v) try {
                        return F.apply(o, y.querySelectorAll(v)), o;
                    } catch (t) {} finally {
                        h === b && e.removeAttribute("id");
                    }
                }
            }
            return u(t.replace(M, "$1"), e, o, i);
        }
        function st() {
            var t = [];
            return function e(n, i) {
                return t.push(n + " ") > o.cacheLength && delete e[t.shift()], e[n + " "] = i;
            };
        }
        function at(t) {
            return t[b] = !0, t;
        }
        function ut(t) {
            var e = p.createElement("fieldset");
            try {
                return !!t(e);
            } catch (t) {
                return !1;
            } finally {
                e.parentNode && e.parentNode.removeChild(e), e = null;
            }
        }
        function lt(t, e) {
            for (var n = t.split("|"), i = n.length; i--; ) o.attrHandle[n[i]] = e;
        }
        function ht(t, e) {
            var n = e && t, o = n && 1 === t.nodeType && 1 === e.nodeType && t.sourceIndex - e.sourceIndex;
            if (o) return o;
            if (n) for (;n = n.nextSibling; ) if (n === e) return -1;
            return t ? 1 : -1;
        }
        function ct(t) {
            return function(e) {
                return "input" === e.nodeName.toLowerCase() && e.type === t;
            };
        }
        function dt(t) {
            return function(e) {
                var n = e.nodeName.toLowerCase();
                return ("input" === n || "button" === n) && e.type === t;
            };
        }
        function pt(t) {
            return function(e) {
                return "form" in e ? e.parentNode && !1 === e.disabled ? "label" in e ? "label" in e.parentNode ? e.parentNode.disabled === t : e.disabled === t : e.isDisabled === t || e.isDisabled !== !t && it(e) === t : e.disabled === t : "label" in e && e.disabled === t;
            };
        }
        function ft(t) {
            return at(function(e) {
                return e = +e, at(function(n, o) {
                    for (var i, r = t([], n.length, e), s = r.length; s--; ) n[i = r[s]] && (n[i] = !(o[i] = n[i]));
                });
            });
        }
        function gt(t) {
            return t && void 0 !== t.getElementsByTagName && t;
        }
        for (e in n = rt.support = {}, r = rt.isXML = function(t) {
            var e = t && (t.ownerDocument || t).documentElement;
            return !!e && "HTML" !== e.nodeName;
        }, d = rt.setDocument = function(t) {
            var e, i, s = t ? t.ownerDocument || t : x;
            return s !== p && 9 === s.nodeType && s.documentElement ? (f = (p = s).documentElement, 
            g = !r(p), x !== p && (i = p.defaultView) && i.top !== i && (i.addEventListener ? i.addEventListener("unload", ot, !1) : i.attachEvent && i.attachEvent("onunload", ot)), 
            n.attributes = ut(function(t) {
                return t.className = "i", !t.getAttribute("className");
            }), n.getElementsByTagName = ut(function(t) {
                return t.appendChild(p.createComment("")), !t.getElementsByTagName("*").length;
            }), n.getElementsByClassName = Y.test(p.getElementsByClassName), n.getById = ut(function(t) {
                return f.appendChild(t).id = b, !p.getElementsByName || !p.getElementsByName(b).length;
            }), n.getById ? (o.filter.ID = function(t) {
                var e = t.replace(J, tt);
                return function(t) {
                    return t.getAttribute("id") === e;
                };
            }, o.find.ID = function(t, e) {
                if (void 0 !== e.getElementById && g) {
                    var n = e.getElementById(t);
                    return n ? [ n ] : [];
                }
            }) : (o.filter.ID = function(t) {
                var e = t.replace(J, tt);
                return function(t) {
                    var n = void 0 !== t.getAttributeNode && t.getAttributeNode("id");
                    return n && n.value === e;
                };
            }, o.find.ID = function(t, e) {
                if (void 0 !== e.getElementById && g) {
                    var n, o, i, r = e.getElementById(t);
                    if (r) {
                        if ((n = r.getAttributeNode("id")) && n.value === t) return [ r ];
                        for (i = e.getElementsByName(t), o = 0; r = i[o++]; ) if ((n = r.getAttributeNode("id")) && n.value === t) return [ r ];
                    }
                    return [];
                }
            }), o.find.TAG = n.getElementsByTagName ? function(t, e) {
                return void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t) : n.qsa ? e.querySelectorAll(t) : void 0;
            } : function(t, e) {
                var n, o = [], i = 0, r = e.getElementsByTagName(t);
                if ("*" === t) {
                    for (;n = r[i++]; ) 1 === n.nodeType && o.push(n);
                    return o;
                }
                return r;
            }, o.find.CLASS = n.getElementsByClassName && function(t, e) {
                if (void 0 !== e.getElementsByClassName && g) return e.getElementsByClassName(t);
            }, v = [], m = [], (n.qsa = Y.test(p.querySelectorAll)) && (ut(function(t) {
                f.appendChild(t).innerHTML = "<a id='" + b + "'></a><select id='" + b + "-\r\\' msallowcapture=''><option selected=''></option></select>", 
                t.querySelectorAll("[msallowcapture^='']").length && m.push("[*^$]=" + I + "*(?:''|\"\")"), 
                t.querySelectorAll("[selected]").length || m.push("\\[" + I + "*(?:value|" + H + ")"), 
                t.querySelectorAll("[id~=" + b + "-]").length || m.push("~="), t.querySelectorAll(":checked").length || m.push(":checked"), 
                t.querySelectorAll("a#" + b + "+*").length || m.push(".#.+[+~]");
            }), ut(function(t) {
                t.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                var e = p.createElement("input");
                e.setAttribute("type", "hidden"), t.appendChild(e).setAttribute("name", "D"), t.querySelectorAll("[name=d]").length && m.push("name" + I + "*[*^$|!~]?="), 
                2 !== t.querySelectorAll(":enabled").length && m.push(":enabled", ":disabled"), 
                f.appendChild(t).disabled = !0, 2 !== t.querySelectorAll(":disabled").length && m.push(":enabled", ":disabled"), 
                t.querySelectorAll("*,:x"), m.push(",.*:");
            })), (n.matchesSelector = Y.test(y = f.matches || f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && ut(function(t) {
                n.disconnectedMatch = y.call(t, "*"), y.call(t, "[s!='']:x"), v.push("!=", q);
            }), m = m.length && new RegExp(m.join("|")), v = v.length && new RegExp(v.join("|")), 
            e = Y.test(f.compareDocumentPosition), w = e || Y.test(f.contains) ? function(t, e) {
                var n = 9 === t.nodeType ? t.documentElement : t, o = e && e.parentNode;
                return t === o || !(!o || 1 !== o.nodeType || !(n.contains ? n.contains(o) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(o)));
            } : function(t, e) {
                if (e) for (;e = e.parentNode; ) if (e === t) return !0;
                return !1;
            }, E = e ? function(t, e) {
                if (t === e) return c = !0, 0;
                var o = !t.compareDocumentPosition - !e.compareDocumentPosition;
                return o || (1 & (o = (t.ownerDocument || t) === (e.ownerDocument || e) ? t.compareDocumentPosition(e) : 1) || !n.sortDetached && e.compareDocumentPosition(t) === o ? t === p || t.ownerDocument === x && w(x, t) ? -1 : e === p || e.ownerDocument === x && w(x, e) ? 1 : h ? R(h, t) - R(h, e) : 0 : 4 & o ? -1 : 1);
            } : function(t, e) {
                if (t === e) return c = !0, 0;
                var n, o = 0, i = t.parentNode, r = e.parentNode, s = [ t ], a = [ e ];
                if (!i || !r) return t === p ? -1 : e === p ? 1 : i ? -1 : r ? 1 : h ? R(h, t) - R(h, e) : 0;
                if (i === r) return ht(t, e);
                for (n = t; n = n.parentNode; ) s.unshift(n);
                for (n = e; n = n.parentNode; ) a.unshift(n);
                for (;s[o] === a[o]; ) o++;
                return o ? ht(s[o], a[o]) : s[o] === x ? -1 : a[o] === x ? 1 : 0;
            }, p) : p;
        }, rt.matches = function(t, e) {
            return rt(t, null, null, e);
        }, rt.matchesSelector = function(t, e) {
            if ((t.ownerDocument || t) !== p && d(t), e = e.replace(V, "='$1']"), n.matchesSelector && g && !S[e + " "] && (!v || !v.test(e)) && (!m || !m.test(e))) try {
                var o = y.call(t, e);
                if (o || n.disconnectedMatch || t.document && 11 !== t.document.nodeType) return o;
            } catch (t) {}
            return rt(e, p, null, [ t ]).length > 0;
        }, rt.contains = function(t, e) {
            return (t.ownerDocument || t) !== p && d(t), w(t, e);
        }, rt.attr = function(t, e) {
            (t.ownerDocument || t) !== p && d(t);
            var i = o.attrHandle[e.toLowerCase()], r = i && k.call(o.attrHandle, e.toLowerCase()) ? i(t, e, !g) : void 0;
            return void 0 !== r ? r : n.attributes || !g ? t.getAttribute(e) : (r = t.getAttributeNode(e)) && r.specified ? r.value : null;
        }, rt.escape = function(t) {
            return (t + "").replace(et, nt);
        }, rt.error = function(t) {
            throw new Error("Syntax error, unrecognized expression: " + t);
        }, rt.uniqueSort = function(t) {
            var e, o = [], i = 0, r = 0;
            if (c = !n.detectDuplicates, h = !n.sortStable && t.slice(0), t.sort(E), c) {
                for (;e = t[r++]; ) e === t[r] && (i = o.push(r));
                for (;i--; ) t.splice(o[i], 1);
            }
            return h = null, t;
        }, i = rt.getText = function(t) {
            var e, n = "", o = 0, r = t.nodeType;
            if (r) {
                if (1 === r || 9 === r || 11 === r) {
                    if ("string" == typeof t.textContent) return t.textContent;
                    for (t = t.firstChild; t; t = t.nextSibling) n += i(t);
                } else if (3 === r || 4 === r) return t.nodeValue;
            } else for (;e = t[o++]; ) n += i(e);
            return n;
        }, (o = rt.selectors = {
            cacheLength: 50,
            createPseudo: at,
            match: X,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(t) {
                    return t[1] = t[1].replace(J, tt), t[3] = (t[3] || t[4] || t[5] || "").replace(J, tt), 
                    "~=" === t[2] && (t[3] = " " + t[3] + " "), t.slice(0, 4);
                },
                CHILD: function(t) {
                    return t[1] = t[1].toLowerCase(), "nth" === t[1].slice(0, 3) ? (t[3] || rt.error(t[0]), 
                    t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])), t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && rt.error(t[0]), 
                    t;
                },
                PSEUDO: function(t) {
                    var e, n = !t[6] && t[2];
                    return X.CHILD.test(t[0]) ? null : (t[3] ? t[2] = t[4] || t[5] || "" : n && W.test(n) && (e = s(n, !0)) && (e = n.indexOf(")", n.length - e) - n.length) && (t[0] = t[0].slice(0, e), 
                    t[2] = n.slice(0, e)), t.slice(0, 3));
                }
            },
            filter: {
                TAG: function(t) {
                    var e = t.replace(J, tt).toLowerCase();
                    return "*" === t ? function() {
                        return !0;
                    } : function(t) {
                        return t.nodeName && t.nodeName.toLowerCase() === e;
                    };
                },
                CLASS: function(t) {
                    var e = C[t + " "];
                    return e || (e = new RegExp("(^|" + I + ")" + t + "(" + I + "|$)")) && C(t, function(t) {
                        return e.test("string" == typeof t.className && t.className || void 0 !== t.getAttribute && t.getAttribute("class") || "");
                    });
                },
                ATTR: function(t, e, n) {
                    return function(o) {
                        var i = rt.attr(o, t);
                        return null == i ? "!=" === e : !e || (i += "", "=" === e ? i === n : "!=" === e ? i !== n : "^=" === e ? n && 0 === i.indexOf(n) : "*=" === e ? n && i.indexOf(n) > -1 : "$=" === e ? n && i.slice(-n.length) === n : "~=" === e ? (" " + i.replace(U, " ") + " ").indexOf(n) > -1 : "|=" === e && (i === n || i.slice(0, n.length + 1) === n + "-"));
                    };
                },
                CHILD: function(t, e, n, o, i) {
                    var r = "nth" !== t.slice(0, 3), s = "last" !== t.slice(-4), a = "of-type" === e;
                    return 1 === o && 0 === i ? function(t) {
                        return !!t.parentNode;
                    } : function(e, n, u) {
                        var l, h, c, d, p, f, g = r !== s ? "nextSibling" : "previousSibling", m = e.parentNode, v = a && e.nodeName.toLowerCase(), y = !u && !a, w = !1;
                        if (m) {
                            if (r) {
                                for (;g; ) {
                                    for (d = e; d = d[g]; ) if (a ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1;
                                    f = g = "only" === t && !f && "nextSibling";
                                }
                                return !0;
                            }
                            if (f = [ s ? m.firstChild : m.lastChild ], s && y) {
                                for (w = (p = (l = (h = (c = (d = m)[b] || (d[b] = {}))[d.uniqueID] || (c[d.uniqueID] = {}))[t] || [])[0] === T && l[1]) && l[2], 
                                d = p && m.childNodes[p]; d = ++p && d && d[g] || (w = p = 0) || f.pop(); ) if (1 === d.nodeType && ++w && d === e) {
                                    h[t] = [ T, p, w ];
                                    break;
                                }
                            } else if (y && (w = p = (l = (h = (c = (d = e)[b] || (d[b] = {}))[d.uniqueID] || (c[d.uniqueID] = {}))[t] || [])[0] === T && l[1]), 
                            !1 === w) for (;(d = ++p && d && d[g] || (w = p = 0) || f.pop()) && ((a ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++w || (y && ((h = (c = d[b] || (d[b] = {}))[d.uniqueID] || (c[d.uniqueID] = {}))[t] = [ T, w ]), 
                            d !== e)); ) ;
                            return (w -= i) === o || w % o == 0 && w / o >= 0;
                        }
                    };
                },
                PSEUDO: function(t, e) {
                    var n, i = o.pseudos[t] || o.setFilters[t.toLowerCase()] || rt.error("unsupported pseudo: " + t);
                    return i[b] ? i(e) : i.length > 1 ? (n = [ t, t, "", e ], o.setFilters.hasOwnProperty(t.toLowerCase()) ? at(function(t, n) {
                        for (var o, r = i(t, e), s = r.length; s--; ) t[o = R(t, r[s])] = !(n[o] = r[s]);
                    }) : function(t) {
                        return i(t, 0, n);
                    }) : i;
                }
            },
            pseudos: {
                not: at(function(t) {
                    var e = [], n = [], o = a(t.replace(M, "$1"));
                    return o[b] ? at(function(t, e, n, i) {
                        for (var r, s = o(t, null, i, []), a = t.length; a--; ) (r = s[a]) && (t[a] = !(e[a] = r));
                    }) : function(t, i, r) {
                        return e[0] = t, o(e, null, r, n), e[0] = null, !n.pop();
                    };
                }),
                has: at(function(t) {
                    return function(e) {
                        return rt(t, e).length > 0;
                    };
                }),
                contains: at(function(t) {
                    return t = t.replace(J, tt), function(e) {
                        return (e.textContent || e.innerText || i(e)).indexOf(t) > -1;
                    };
                }),
                lang: at(function(t) {
                    return z.test(t || "") || rt.error("unsupported lang: " + t), t = t.replace(J, tt).toLowerCase(), 
                    function(e) {
                        var n;
                        do {
                            if (n = g ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang")) return (n = n.toLowerCase()) === t || 0 === n.indexOf(t + "-");
                        } while ((e = e.parentNode) && 1 === e.nodeType);
                        return !1;
                    };
                }),
                target: function(e) {
                    var n = t.location && t.location.hash;
                    return n && n.slice(1) === e.id;
                },
                root: function(t) {
                    return t === f;
                },
                focus: function(t) {
                    return t === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(t.type || t.href || ~t.tabIndex);
                },
                enabled: pt(!1),
                disabled: pt(!0),
                checked: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && !!t.checked || "option" === e && !!t.selected;
                },
                selected: function(t) {
                    return t.parentNode && t.parentNode.selectedIndex, !0 === t.selected;
                },
                empty: function(t) {
                    for (t = t.firstChild; t; t = t.nextSibling) if (t.nodeType < 6) return !1;
                    return !0;
                },
                parent: function(t) {
                    return !o.pseudos.empty(t);
                },
                header: function(t) {
                    return Z.test(t.nodeName);
                },
                input: function(t) {
                    return Q.test(t.nodeName);
                },
                button: function(t) {
                    var e = t.nodeName.toLowerCase();
                    return "input" === e && "button" === t.type || "button" === e;
                },
                text: function(t) {
                    var e;
                    return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || "text" === e.toLowerCase());
                },
                first: ft(function() {
                    return [ 0 ];
                }),
                last: ft(function(t, e) {
                    return [ e - 1 ];
                }),
                eq: ft(function(t, e, n) {
                    return [ n < 0 ? n + e : n ];
                }),
                even: ft(function(t, e) {
                    for (var n = 0; n < e; n += 2) t.push(n);
                    return t;
                }),
                odd: ft(function(t, e) {
                    for (var n = 1; n < e; n += 2) t.push(n);
                    return t;
                }),
                lt: ft(function(t, e, n) {
                    for (var o = n < 0 ? n + e : n; --o >= 0; ) t.push(o);
                    return t;
                }),
                gt: ft(function(t, e, n) {
                    for (var o = n < 0 ? n + e : n; ++o < e; ) t.push(o);
                    return t;
                })
            }
        }).pseudos.nth = o.pseudos.eq, {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        }) o.pseudos[e] = ct(e);
        for (e in {
            submit: !0,
            reset: !0
        }) o.pseudos[e] = dt(e);
        function mt() {}
        function vt(t) {
            for (var e = 0, n = t.length, o = ""; e < n; e++) o += t[e].value;
            return o;
        }
        function yt(t, e, n) {
            var o = e.dir, i = e.next, r = i || o, s = n && "parentNode" === r, a = _++;
            return e.first ? function(e, n, i) {
                for (;e = e[o]; ) if (1 === e.nodeType || s) return t(e, n, i);
                return !1;
            } : function(e, n, u) {
                var l, h, c, d = [ T, a ];
                if (u) {
                    for (;e = e[o]; ) if ((1 === e.nodeType || s) && t(e, n, u)) return !0;
                } else for (;e = e[o]; ) if (1 === e.nodeType || s) if (h = (c = e[b] || (e[b] = {}))[e.uniqueID] || (c[e.uniqueID] = {}), 
                i && i === e.nodeName.toLowerCase()) e = e[o] || e; else {
                    if ((l = h[r]) && l[0] === T && l[1] === a) return d[2] = l[2];
                    if (h[r] = d, d[2] = t(e, n, u)) return !0;
                }
                return !1;
            };
        }
        function wt(t) {
            return t.length > 1 ? function(e, n, o) {
                for (var i = t.length; i--; ) if (!t[i](e, n, o)) return !1;
                return !0;
            } : t[0];
        }
        function bt(t, e, n, o, i) {
            for (var r, s = [], a = 0, u = t.length, l = null != e; a < u; a++) (r = t[a]) && (n && !n(r, o, i) || (s.push(r), 
            l && e.push(a)));
            return s;
        }
        function xt(t, e, n, o, i, r) {
            return o && !o[b] && (o = xt(o)), i && !i[b] && (i = xt(i, r)), at(function(r, s, a, u) {
                var l, h, c, d = [], p = [], f = s.length, g = r || function(t, e, n) {
                    for (var o = 0, i = e.length; o < i; o++) rt(t, e[o], n);
                    return n;
                }(e || "*", a.nodeType ? [ a ] : a, []), m = !t || !r && e ? g : bt(g, d, t, a, u), v = n ? i || (r ? t : f || o) ? [] : s : m;
                if (n && n(m, v, a, u), o) for (l = bt(v, p), o(l, [], a, u), h = l.length; h--; ) (c = l[h]) && (v[p[h]] = !(m[p[h]] = c));
                if (r) {
                    if (i || t) {
                        if (i) {
                            for (l = [], h = v.length; h--; ) (c = v[h]) && l.push(m[h] = c);
                            i(null, v = [], l, u);
                        }
                        for (h = v.length; h--; ) (c = v[h]) && (l = i ? R(r, c) : d[h]) > -1 && (r[l] = !(s[l] = c));
                    }
                } else v = bt(v === s ? v.splice(f, v.length) : v), i ? i(null, s, v, u) : F.apply(s, v);
            });
        }
        function Tt(t) {
            for (var e, n, i, r = t.length, s = o.relative[t[0].type], a = s || o.relative[" "], u = s ? 1 : 0, h = yt(function(t) {
                return t === e;
            }, a, !0), c = yt(function(t) {
                return R(e, t) > -1;
            }, a, !0), d = [ function(t, n, o) {
                var i = !s && (o || n !== l) || ((e = n).nodeType ? h(t, n, o) : c(t, n, o));
                return e = null, i;
            } ]; u < r; u++) if (n = o.relative[t[u].type]) d = [ yt(wt(d), n) ]; else {
                if ((n = o.filter[t[u].type].apply(null, t[u].matches))[b]) {
                    for (i = ++u; i < r && !o.relative[t[i].type]; i++) ;
                    return xt(u > 1 && wt(d), u > 1 && vt(t.slice(0, u - 1).concat({
                        value: " " === t[u - 2].type ? "*" : ""
                    })).replace(M, "$1"), n, u < i && Tt(t.slice(u, i)), i < r && Tt(t = t.slice(i)), i < r && vt(t));
                }
                d.push(n);
            }
            return wt(d);
        }
        function _t(t, e) {
            var n = e.length > 0, i = t.length > 0, r = function(r, s, a, u, h) {
                var c, f, m, v = 0, y = "0", w = r && [], b = [], x = l, _ = r || i && o.find.TAG("*", h), C = T += null == x ? 1 : Math.random() || .1, A = _.length;
                for (h && (l = s === p || s || h); y !== A && null != (c = _[y]); y++) {
                    if (i && c) {
                        for (f = 0, s || c.ownerDocument === p || (d(c), a = !g); m = t[f++]; ) if (m(c, s || p, a)) {
                            u.push(c);
                            break;
                        }
                        h && (T = C);
                    }
                    n && ((c = !m && c) && v--, r && w.push(c));
                }
                if (v += y, n && y !== v) {
                    for (f = 0; m = e[f++]; ) m(w, b, s, a);
                    if (r) {
                        if (v > 0) for (;y--; ) w[y] || b[y] || (b[y] = D.call(u));
                        b = bt(b);
                    }
                    F.apply(u, b), h && !r && b.length > 0 && v + e.length > 1 && rt.uniqueSort(u);
                }
                return h && (T = C, l = x), w;
            };
            return n ? at(r) : r;
        }
        return mt.prototype = o.filters = o.pseudos, o.setFilters = new mt(), s = rt.tokenize = function(t, e) {
            var n, i, r, s, a, u, l, h = A[t + " "];
            if (h) return e ? 0 : h.slice(0);
            for (a = t, u = [], l = o.preFilter; a; ) {
                for (s in n && !(i = B.exec(a)) || (i && (a = a.slice(i[0].length) || a), u.push(r = [])), 
                n = !1, (i = $.exec(a)) && (n = i.shift(), r.push({
                    value: n,
                    type: i[0].replace(M, " ")
                }), a = a.slice(n.length)), o.filter) !(i = X[s].exec(a)) || l[s] && !(i = l[s](i)) || (n = i.shift(), 
                r.push({
                    value: n,
                    type: s,
                    matches: i
                }), a = a.slice(n.length));
                if (!n) break;
            }
            return e ? a.length : a ? rt.error(t) : A(t, u).slice(0);
        }, a = rt.compile = function(t, e) {
            var n, o = [], i = [], r = S[t + " "];
            if (!r) {
                for (e || (e = s(t)), n = e.length; n--; ) (r = Tt(e[n]))[b] ? o.push(r) : i.push(r);
                (r = S(t, _t(i, o))).selector = t;
            }
            return r;
        }, u = rt.select = function(t, e, n, i) {
            var r, u, l, h, c, d = "function" == typeof t && t, p = !i && s(t = d.selector || t);
            if (n = n || [], 1 === p.length) {
                if ((u = p[0] = p[0].slice(0)).length > 2 && "ID" === (l = u[0]).type && 9 === e.nodeType && g && o.relative[u[1].type]) {
                    if (!(e = (o.find.ID(l.matches[0].replace(J, tt), e) || [])[0])) return n;
                    d && (e = e.parentNode), t = t.slice(u.shift().value.length);
                }
                for (r = X.needsContext.test(t) ? 0 : u.length; r-- && (l = u[r], !o.relative[h = l.type]); ) if ((c = o.find[h]) && (i = c(l.matches[0].replace(J, tt), G.test(u[0].type) && gt(e.parentNode) || e))) {
                    if (u.splice(r, 1), !(t = i.length && vt(u))) return F.apply(n, i), n;
                    break;
                }
            }
            return (d || a(t, p))(i, e, !g, n, !e || G.test(t) && gt(e.parentNode) || e), n;
        }, n.sortStable = b.split("").sort(E).join("") === b, n.detectDuplicates = !!c, 
        d(), n.sortDetached = ut(function(t) {
            return 1 & t.compareDocumentPosition(p.createElement("fieldset"));
        }), ut(function(t) {
            return t.innerHTML = "<a href='#'></a>", "#" === t.firstChild.getAttribute("href");
        }) || lt("type|href|height|width", function(t, e, n) {
            if (!n) return t.getAttribute(e, "type" === e.toLowerCase() ? 1 : 2);
        }), n.attributes && ut(function(t) {
            return t.innerHTML = "<input/>", t.firstChild.setAttribute("value", ""), "" === t.firstChild.getAttribute("value");
        }) || lt("value", function(t, e, n) {
            if (!n && "input" === t.nodeName.toLowerCase()) return t.defaultValue;
        }), ut(function(t) {
            return null == t.getAttribute("disabled");
        }) || lt(H, function(t, e, n) {
            var o;
            if (!n) return !0 === t[e] ? e.toLowerCase() : (o = t.getAttributeNode(e)) && o.specified ? o.value : null;
        }), rt;
    }(t);
    b.find = _, b.expr = _.selectors, b.expr[":"] = b.expr.pseudos, b.uniqueSort = b.unique = _.uniqueSort, 
    b.text = _.getText, b.isXMLDoc = _.isXML, b.contains = _.contains, b.escapeSelector = _.escape;
    var C = function(t, e, n) {
        for (var o = [], i = void 0 !== n; (t = t[e]) && 9 !== t.nodeType; ) if (1 === t.nodeType) {
            if (i && b(t).is(n)) break;
            o.push(t);
        }
        return o;
    }, A = function(t, e) {
        for (var n = []; t; t = t.nextSibling) 1 === t.nodeType && t !== e && n.push(t);
        return n;
    }, S = b.expr.match.needsContext;
    function E(t, e) {
        return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase();
    }
    var k = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;
    function N(t, e, n) {
        return g(e) ? b.grep(t, function(t, o) {
            return !!e.call(t, o, t) !== n;
        }) : e.nodeType ? b.grep(t, function(t) {
            return t === e !== n;
        }) : "string" != typeof e ? b.grep(t, function(t) {
            return u.call(e, t) > -1 !== n;
        }) : b.filter(e, t, n);
    }
    b.filter = function(t, e, n) {
        var o = e[0];
        return n && (t = ":not(" + t + ")"), 1 === e.length && 1 === o.nodeType ? b.find.matchesSelector(o, t) ? [ o ] : [] : b.find.matches(t, b.grep(e, function(t) {
            return 1 === t.nodeType;
        }));
    }, b.fn.extend({
        find: function(t) {
            var e, n, o = this.length, i = this;
            if ("string" != typeof t) return this.pushStack(b(t).filter(function() {
                for (e = 0; e < o; e++) if (b.contains(i[e], this)) return !0;
            }));
            for (n = this.pushStack([]), e = 0; e < o; e++) b.find(t, i[e], n);
            return o > 1 ? b.uniqueSort(n) : n;
        },
        filter: function(t) {
            return this.pushStack(N(this, t || [], !1));
        },
        not: function(t) {
            return this.pushStack(N(this, t || [], !0));
        },
        is: function(t) {
            return !!N(this, "string" == typeof t && S.test(t) ? b(t) : t || [], !1).length;
        }
    });
    var D, O = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
    (b.fn.init = function(t, e, n) {
        var i, r;
        if (!t) return this;
        if (n = n || D, "string" == typeof t) {
            if (!(i = "<" === t[0] && ">" === t[t.length - 1] && t.length >= 3 ? [ null, t, null ] : O.exec(t)) || !i[1] && e) return !e || e.jquery ? (e || n).find(t) : this.constructor(e).find(t);
            if (i[1]) {
                if (e = e instanceof b ? e[0] : e, b.merge(this, b.parseHTML(i[1], e && e.nodeType ? e.ownerDocument || e : o, !0)), 
                k.test(i[1]) && b.isPlainObject(e)) for (i in e) g(this[i]) ? this[i](e[i]) : this.attr(i, e[i]);
                return this;
            }
            return (r = o.getElementById(i[2])) && (this[0] = r, this.length = 1), this;
        }
        return t.nodeType ? (this[0] = t, this.length = 1, this) : g(t) ? void 0 !== n.ready ? n.ready(t) : t(b) : b.makeArray(t, this);
    }).prototype = b.fn, D = b(o);
    var F = /^(?:parents|prev(?:Until|All))/, P = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    function R(t, e) {
        for (;(t = t[e]) && 1 !== t.nodeType; ) ;
        return t;
    }
    b.fn.extend({
        has: function(t) {
            var e = b(t, this), n = e.length;
            return this.filter(function() {
                for (var t = 0; t < n; t++) if (b.contains(this, e[t])) return !0;
            });
        },
        closest: function(t, e) {
            var n, o = 0, i = this.length, r = [], s = "string" != typeof t && b(t);
            if (!S.test(t)) for (;o < i; o++) for (n = this[o]; n && n !== e; n = n.parentNode) if (n.nodeType < 11 && (s ? s.index(n) > -1 : 1 === n.nodeType && b.find.matchesSelector(n, t))) {
                r.push(n);
                break;
            }
            return this.pushStack(r.length > 1 ? b.uniqueSort(r) : r);
        },
        index: function(t) {
            return t ? "string" == typeof t ? u.call(b(t), this[0]) : u.call(this, t.jquery ? t[0] : t) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function(t, e) {
            return this.pushStack(b.uniqueSort(b.merge(this.get(), b(t, e))));
        },
        addBack: function(t) {
            return this.add(null == t ? this.prevObject : this.prevObject.filter(t));
        }
    }), b.each({
        parent: function(t) {
            var e = t.parentNode;
            return e && 11 !== e.nodeType ? e : null;
        },
        parents: function(t) {
            return C(t, "parentNode");
        },
        parentsUntil: function(t, e, n) {
            return C(t, "parentNode", n);
        },
        next: function(t) {
            return R(t, "nextSibling");
        },
        prev: function(t) {
            return R(t, "previousSibling");
        },
        nextAll: function(t) {
            return C(t, "nextSibling");
        },
        prevAll: function(t) {
            return C(t, "previousSibling");
        },
        nextUntil: function(t, e, n) {
            return C(t, "nextSibling", n);
        },
        prevUntil: function(t, e, n) {
            return C(t, "previousSibling", n);
        },
        siblings: function(t) {
            return A((t.parentNode || {}).firstChild, t);
        },
        children: function(t) {
            return A(t.firstChild);
        },
        contents: function(t) {
            return E(t, "iframe") ? t.contentDocument : (E(t, "template") && (t = t.content || t), 
            b.merge([], t.childNodes));
        }
    }, function(t, e) {
        b.fn[t] = function(n, o) {
            var i = b.map(this, e, n);
            return "Until" !== t.slice(-5) && (o = n), o && "string" == typeof o && (i = b.filter(o, i)), 
            this.length > 1 && (P[t] || b.uniqueSort(i), F.test(t) && i.reverse()), this.pushStack(i);
        };
    });
    var H = /[^\x20\t\r\n\f]+/g;
    function I(t) {
        return t;
    }
    function L(t) {
        throw t;
    }
    function j(t, e, n, o) {
        var i;
        try {
            t && g(i = t.promise) ? i.call(t).done(e).fail(n) : t && g(i = t.then) ? i.call(t, e, n) : e.apply(void 0, [ t ].slice(o));
        } catch (t) {
            n.apply(void 0, [ t ]);
        }
    }
    b.Callbacks = function(t) {
        t = "string" == typeof t ? function(t) {
            var e = {};
            return b.each(t.match(H) || [], function(t, n) {
                e[n] = !0;
            }), e;
        }(t) : b.extend({}, t);
        var e, n, o, i, r = [], s = [], a = -1, u = function() {
            for (i = i || t.once, o = e = !0; s.length; a = -1) for (n = s.shift(); ++a < r.length; ) !1 === r[a].apply(n[0], n[1]) && t.stopOnFalse && (a = r.length, 
            n = !1);
            t.memory || (n = !1), e = !1, i && (r = n ? [] : "");
        }, l = {
            add: function() {
                return r && (n && !e && (a = r.length - 1, s.push(n)), function e(n) {
                    b.each(n, function(n, o) {
                        g(o) ? t.unique && l.has(o) || r.push(o) : o && o.length && "string" !== w(o) && e(o);
                    });
                }(arguments), n && !e && u()), this;
            },
            remove: function() {
                return b.each(arguments, function(t, e) {
                    for (var n; (n = b.inArray(e, r, n)) > -1; ) r.splice(n, 1), n <= a && a--;
                }), this;
            },
            has: function(t) {
                return t ? b.inArray(t, r) > -1 : r.length > 0;
            },
            empty: function() {
                return r && (r = []), this;
            },
            disable: function() {
                return i = s = [], r = n = "", this;
            },
            disabled: function() {
                return !r;
            },
            lock: function() {
                return i = s = [], n || e || (r = n = ""), this;
            },
            locked: function() {
                return !!i;
            },
            fireWith: function(t, n) {
                return i || (n = [ t, (n = n || []).slice ? n.slice() : n ], s.push(n), e || u()), 
                this;
            },
            fire: function() {
                return l.fireWith(this, arguments), this;
            },
            fired: function() {
                return !!o;
            }
        };
        return l;
    }, b.extend({
        Deferred: function(e) {
            var n = [ [ "notify", "progress", b.Callbacks("memory"), b.Callbacks("memory"), 2 ], [ "resolve", "done", b.Callbacks("once memory"), b.Callbacks("once memory"), 0, "resolved" ], [ "reject", "fail", b.Callbacks("once memory"), b.Callbacks("once memory"), 1, "rejected" ] ], o = "pending", i = {
                state: function() {
                    return o;
                },
                always: function() {
                    return r.done(arguments).fail(arguments), this;
                },
                catch: function(t) {
                    return i.then(null, t);
                },
                pipe: function() {
                    var t = arguments;
                    return b.Deferred(function(e) {
                        b.each(n, function(n, o) {
                            var i = g(t[o[4]]) && t[o[4]];
                            r[o[1]](function() {
                                var t = i && i.apply(this, arguments);
                                t && g(t.promise) ? t.promise().progress(e.notify).done(e.resolve).fail(e.reject) : e[o[0] + "With"](this, i ? [ t ] : arguments);
                            });
                        }), t = null;
                    }).promise();
                },
                then: function(e, o, i) {
                    var r = 0;
                    function s(e, n, o, i) {
                        return function() {
                            var a = this, u = arguments, l = function() {
                                var t, l;
                                if (!(e < r)) {
                                    if ((t = o.apply(a, u)) === n.promise()) throw new TypeError("Thenable self-resolution");
                                    l = t && ("object" == typeof t || "function" == typeof t) && t.then, g(l) ? i ? l.call(t, s(r, n, I, i), s(r, n, L, i)) : (r++, 
                                    l.call(t, s(r, n, I, i), s(r, n, L, i), s(r, n, I, n.notifyWith))) : (o !== I && (a = void 0, 
                                    u = [ t ]), (i || n.resolveWith)(a, u));
                                }
                            }, h = i ? l : function() {
                                try {
                                    l();
                                } catch (t) {
                                    b.Deferred.exceptionHook && b.Deferred.exceptionHook(t, h.stackTrace), e + 1 >= r && (o !== L && (a = void 0, 
                                    u = [ t ]), n.rejectWith(a, u));
                                }
                            };
                            e ? h() : (b.Deferred.getStackHook && (h.stackTrace = b.Deferred.getStackHook()), 
                            t.setTimeout(h));
                        };
                    }
                    return b.Deferred(function(t) {
                        n[0][3].add(s(0, t, g(i) ? i : I, t.notifyWith)), n[1][3].add(s(0, t, g(e) ? e : I)), 
                        n[2][3].add(s(0, t, g(o) ? o : L));
                    }).promise();
                },
                promise: function(t) {
                    return null != t ? b.extend(t, i) : i;
                }
            }, r = {};
            return b.each(n, function(t, e) {
                var s = e[2], a = e[5];
                i[e[1]] = s.add, a && s.add(function() {
                    o = a;
                }, n[3 - t][2].disable, n[3 - t][3].disable, n[0][2].lock, n[0][3].lock), s.add(e[3].fire), 
                r[e[0]] = function() {
                    return r[e[0] + "With"](this === r ? void 0 : this, arguments), this;
                }, r[e[0] + "With"] = s.fireWith;
            }), i.promise(r), e && e.call(r, r), r;
        },
        when: function(t) {
            var e = arguments.length, n = e, o = Array(n), i = r.call(arguments), s = b.Deferred(), a = function(t) {
                return function(n) {
                    o[t] = this, i[t] = arguments.length > 1 ? r.call(arguments) : n, --e || s.resolveWith(o, i);
                };
            };
            if (e <= 1 && (j(t, s.done(a(n)).resolve, s.reject, !e), "pending" === s.state() || g(i[n] && i[n].then))) return s.then();
            for (;n--; ) j(i[n], a(n), s.reject);
            return s.promise();
        }
    });
    var q = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
    b.Deferred.exceptionHook = function(e, n) {
        t.console && t.console.warn && e && q.test(e.name) && t.console.warn("jQuery.Deferred exception: " + e.message, e.stack, n);
    }, b.readyException = function(e) {
        t.setTimeout(function() {
            throw e;
        });
    };
    var U = b.Deferred();
    function M() {
        o.removeEventListener("DOMContentLoaded", M), t.removeEventListener("load", M), 
        b.ready();
    }
    b.fn.ready = function(t) {
        return U.then(t).catch(function(t) {
            b.readyException(t);
        }), this;
    }, b.extend({
        isReady: !1,
        readyWait: 1,
        ready: function(t) {
            (!0 === t ? --b.readyWait : b.isReady) || (b.isReady = !0, !0 !== t && --b.readyWait > 0 || U.resolveWith(o, [ b ]));
        }
    }), b.ready.then = U.then, "complete" === o.readyState || "loading" !== o.readyState && !o.documentElement.doScroll ? t.setTimeout(b.ready) : (o.addEventListener("DOMContentLoaded", M), 
    t.addEventListener("load", M));
    var B = function(t, e, n, o, i, r, s) {
        var a = 0, u = t.length, l = null == n;
        if ("object" === w(n)) for (a in i = !0, n) B(t, e, a, n[a], !0, r, s); else if (void 0 !== o && (i = !0, 
        g(o) || (s = !0), l && (s ? (e.call(t, o), e = null) : (l = e, e = function(t, e, n) {
            return l.call(b(t), n);
        })), e)) for (;a < u; a++) e(t[a], n, s ? o : o.call(t[a], a, e(t[a], n)));
        return i ? t : l ? e.call(t) : u ? e(t[0], n) : r;
    }, $ = /^-ms-/, V = /-([a-z])/g;
    function W(t, e) {
        return e.toUpperCase();
    }
    function z(t) {
        return t.replace($, "ms-").replace(V, W);
    }
    var X = function(t) {
        return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType;
    };
    function Q() {
        this.expando = b.expando + Q.uid++;
    }
    Q.uid = 1, Q.prototype = {
        cache: function(t) {
            var e = t[this.expando];
            return e || (e = {}, X(t) && (t.nodeType ? t[this.expando] = e : Object.defineProperty(t, this.expando, {
                value: e,
                configurable: !0
            }))), e;
        },
        set: function(t, e, n) {
            var o, i = this.cache(t);
            if ("string" == typeof e) i[z(e)] = n; else for (o in e) i[z(o)] = e[o];
            return i;
        },
        get: function(t, e) {
            return void 0 === e ? this.cache(t) : t[this.expando] && t[this.expando][z(e)];
        },
        access: function(t, e, n) {
            return void 0 === e || e && "string" == typeof e && void 0 === n ? this.get(t, e) : (this.set(t, e, n), 
            void 0 !== n ? n : e);
        },
        remove: function(t, e) {
            var n, o = t[this.expando];
            if (void 0 !== o) {
                if (void 0 !== e) {
                    n = (e = Array.isArray(e) ? e.map(z) : (e = z(e)) in o ? [ e ] : e.match(H) || []).length;
                    for (;n--; ) delete o[e[n]];
                }
                (void 0 === e || b.isEmptyObject(o)) && (t.nodeType ? t[this.expando] = void 0 : delete t[this.expando]);
            }
        },
        hasData: function(t) {
            var e = t[this.expando];
            return void 0 !== e && !b.isEmptyObject(e);
        }
    };
    var Z = new Q(), Y = new Q(), K = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, G = /[A-Z]/g;
    function J(t, e, n) {
        var o;
        if (void 0 === n && 1 === t.nodeType) if (o = "data-" + e.replace(G, "-$&").toLowerCase(), 
        "string" == typeof (n = t.getAttribute(o))) {
            try {
                n = function(t) {
                    return "true" === t || "false" !== t && ("null" === t ? null : t === +t + "" ? +t : K.test(t) ? JSON.parse(t) : t);
                }(n);
            } catch (t) {}
            Y.set(t, e, n);
        } else n = void 0;
        return n;
    }
    b.extend({
        hasData: function(t) {
            return Y.hasData(t) || Z.hasData(t);
        },
        data: function(t, e, n) {
            return Y.access(t, e, n);
        },
        removeData: function(t, e) {
            Y.remove(t, e);
        },
        _data: function(t, e, n) {
            return Z.access(t, e, n);
        },
        _removeData: function(t, e) {
            Z.remove(t, e);
        }
    }), b.fn.extend({
        data: function(t, e) {
            var n, o, i, r = this[0], s = r && r.attributes;
            if (void 0 === t) {
                if (this.length && (i = Y.get(r), 1 === r.nodeType && !Z.get(r, "hasDataAttrs"))) {
                    for (n = s.length; n--; ) s[n] && 0 === (o = s[n].name).indexOf("data-") && (o = z(o.slice(5)), 
                    J(r, o, i[o]));
                    Z.set(r, "hasDataAttrs", !0);
                }
                return i;
            }
            return "object" == typeof t ? this.each(function() {
                Y.set(this, t);
            }) : B(this, function(e) {
                var n;
                if (r && void 0 === e) {
                    if (void 0 !== (n = Y.get(r, t))) return n;
                    if (void 0 !== (n = J(r, t))) return n;
                } else this.each(function() {
                    Y.set(this, t, e);
                });
            }, null, e, arguments.length > 1, null, !0);
        },
        removeData: function(t) {
            return this.each(function() {
                Y.remove(this, t);
            });
        }
    }), b.extend({
        queue: function(t, e, n) {
            var o;
            if (t) return e = (e || "fx") + "queue", o = Z.get(t, e), n && (!o || Array.isArray(n) ? o = Z.access(t, e, b.makeArray(n)) : o.push(n)), 
            o || [];
        },
        dequeue: function(t, e) {
            e = e || "fx";
            var n = b.queue(t, e), o = n.length, i = n.shift(), r = b._queueHooks(t, e);
            "inprogress" === i && (i = n.shift(), o--), i && ("fx" === e && n.unshift("inprogress"), 
            delete r.stop, i.call(t, function() {
                b.dequeue(t, e);
            }, r)), !o && r && r.empty.fire();
        },
        _queueHooks: function(t, e) {
            var n = e + "queueHooks";
            return Z.get(t, n) || Z.access(t, n, {
                empty: b.Callbacks("once memory").add(function() {
                    Z.remove(t, [ e + "queue", n ]);
                })
            });
        }
    }), b.fn.extend({
        queue: function(t, e) {
            var n = 2;
            return "string" != typeof t && (e = t, t = "fx", n--), arguments.length < n ? b.queue(this[0], t) : void 0 === e ? this : this.each(function() {
                var n = b.queue(this, t, e);
                b._queueHooks(this, t), "fx" === t && "inprogress" !== n[0] && b.dequeue(this, t);
            });
        },
        dequeue: function(t) {
            return this.each(function() {
                b.dequeue(this, t);
            });
        },
        clearQueue: function(t) {
            return this.queue(t || "fx", []);
        },
        promise: function(t, e) {
            var n, o = 1, i = b.Deferred(), r = this, s = this.length, a = function() {
                --o || i.resolveWith(r, [ r ]);
            };
            for ("string" != typeof t && (e = t, t = void 0), t = t || "fx"; s--; ) (n = Z.get(r[s], t + "queueHooks")) && n.empty && (o++, 
            n.empty.add(a));
            return a(), i.promise(e);
        }
    });
    var tt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, et = new RegExp("^(?:([+-])=|)(" + tt + ")([a-z%]*)$", "i"), nt = [ "Top", "Right", "Bottom", "Left" ], ot = function(t, e) {
        return "none" === (t = e || t).style.display || "" === t.style.display && b.contains(t.ownerDocument, t) && "none" === b.css(t, "display");
    }, it = function(t, e, n, o) {
        var i, r, s = {};
        for (r in e) s[r] = t.style[r], t.style[r] = e[r];
        for (r in i = n.apply(t, o || []), e) t.style[r] = s[r];
        return i;
    };
    function rt(t, e, n, o) {
        var i, r, s = 20, a = o ? function() {
            return o.cur();
        } : function() {
            return b.css(t, e, "");
        }, u = a(), l = n && n[3] || (b.cssNumber[e] ? "" : "px"), h = (b.cssNumber[e] || "px" !== l && +u) && et.exec(b.css(t, e));
        if (h && h[3] !== l) {
            for (u /= 2, l = l || h[3], h = +u || 1; s--; ) b.style(t, e, h + l), (1 - r) * (1 - (r = a() / u || .5)) <= 0 && (s = 0), 
            h /= r;
            h *= 2, b.style(t, e, h + l), n = n || [];
        }
        return n && (h = +h || +u || 0, i = n[1] ? h + (n[1] + 1) * n[2] : +n[2], o && (o.unit = l, 
        o.start = h, o.end = i)), i;
    }
    var st = {};
    function at(t) {
        var e, n = t.ownerDocument, o = t.nodeName, i = st[o];
        return i || (e = n.body.appendChild(n.createElement(o)), i = b.css(e, "display"), 
        e.parentNode.removeChild(e), "none" === i && (i = "block"), st[o] = i, i);
    }
    function ut(t, e) {
        for (var n, o, i = [], r = 0, s = t.length; r < s; r++) (o = t[r]).style && (n = o.style.display, 
        e ? ("none" === n && (i[r] = Z.get(o, "display") || null, i[r] || (o.style.display = "")), 
        "" === o.style.display && ot(o) && (i[r] = at(o))) : "none" !== n && (i[r] = "none", 
        Z.set(o, "display", n)));
        for (r = 0; r < s; r++) null != i[r] && (t[r].style.display = i[r]);
        return t;
    }
    b.fn.extend({
        show: function() {
            return ut(this, !0);
        },
        hide: function() {
            return ut(this);
        },
        toggle: function(t) {
            return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function() {
                ot(this) ? b(this).show() : b(this).hide();
            });
        }
    });
    var lt = /^(?:checkbox|radio)$/i, ht = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i, ct = /^$|^module$|\/(?:java|ecma)script/i, dt = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        thead: [ 1, "<table>", "</table>" ],
        col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: [ 0, "", "" ]
    };
    function pt(t, e) {
        var n;
        return n = void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e || "*") : void 0 !== t.querySelectorAll ? t.querySelectorAll(e || "*") : [], 
        void 0 === e || e && E(t, e) ? b.merge([ t ], n) : n;
    }
    function ft(t, e) {
        for (var n = 0, o = t.length; n < o; n++) Z.set(t[n], "globalEval", !e || Z.get(e[n], "globalEval"));
    }
    dt.optgroup = dt.option, dt.tbody = dt.tfoot = dt.colgroup = dt.caption = dt.thead, 
    dt.th = dt.td;
    var gt = /<|&#?\w+;/;
    function mt(t, e, n, o, i) {
        for (var r, s, a, u, l, h, c = e.createDocumentFragment(), d = [], p = 0, f = t.length; p < f; p++) if ((r = t[p]) || 0 === r) if ("object" === w(r)) b.merge(d, r.nodeType ? [ r ] : r); else if (gt.test(r)) {
            for (s = s || c.appendChild(e.createElement("div")), a = (ht.exec(r) || [ "", "" ])[1].toLowerCase(), 
            u = dt[a] || dt._default, s.innerHTML = u[1] + b.htmlPrefilter(r) + u[2], h = u[0]; h--; ) s = s.lastChild;
            b.merge(d, s.childNodes), (s = c.firstChild).textContent = "";
        } else d.push(e.createTextNode(r));
        for (c.textContent = "", p = 0; r = d[p++]; ) if (o && b.inArray(r, o) > -1) i && i.push(r); else if (l = b.contains(r.ownerDocument, r), 
        s = pt(c.appendChild(r), "script"), l && ft(s), n) for (h = 0; r = s[h++]; ) ct.test(r.type || "") && n.push(r);
        return c;
    }
    !function() {
        var t = o.createDocumentFragment().appendChild(o.createElement("div")), e = o.createElement("input");
        e.setAttribute("type", "radio"), e.setAttribute("checked", "checked"), e.setAttribute("name", "t"), 
        t.appendChild(e), f.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked, 
        t.innerHTML = "<textarea>x</textarea>", f.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue;
    }();
    var vt = o.documentElement, yt = /^key/, wt = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, bt = /^([^.]*)(?:\.(.+)|)/;
    function xt() {
        return !0;
    }
    function Tt() {
        return !1;
    }
    function _t() {
        try {
            return o.activeElement;
        } catch (t) {}
    }
    function Ct(t, e, n, o, i, r) {
        var s, a;
        if ("object" == typeof e) {
            for (a in "string" != typeof n && (o = o || n, n = void 0), e) Ct(t, a, n, o, e[a], r);
            return t;
        }
        if (null == o && null == i ? (i = n, o = n = void 0) : null == i && ("string" == typeof n ? (i = o, 
        o = void 0) : (i = o, o = n, n = void 0)), !1 === i) i = Tt; else if (!i) return t;
        return 1 === r && (s = i, (i = function(t) {
            return b().off(t), s.apply(this, arguments);
        }).guid = s.guid || (s.guid = b.guid++)), t.each(function() {
            b.event.add(this, e, i, o, n);
        });
    }
    b.event = {
        global: {},
        add: function(t, e, n, o, i) {
            var r, s, a, u, l, h, c, d, p, f, g, m = Z.get(t);
            if (m) for (n.handler && (n = (r = n).handler, i = r.selector), i && b.find.matchesSelector(vt, i), 
            n.guid || (n.guid = b.guid++), (u = m.events) || (u = m.events = {}), (s = m.handle) || (s = m.handle = function(e) {
                return void 0 !== b && b.event.triggered !== e.type ? b.event.dispatch.apply(t, arguments) : void 0;
            }), l = (e = (e || "").match(H) || [ "" ]).length; l--; ) p = g = (a = bt.exec(e[l]) || [])[1], 
            f = (a[2] || "").split(".").sort(), p && (c = b.event.special[p] || {}, p = (i ? c.delegateType : c.bindType) || p, 
            c = b.event.special[p] || {}, h = b.extend({
                type: p,
                origType: g,
                data: o,
                handler: n,
                guid: n.guid,
                selector: i,
                needsContext: i && b.expr.match.needsContext.test(i),
                namespace: f.join(".")
            }, r), (d = u[p]) || ((d = u[p] = []).delegateCount = 0, c.setup && !1 !== c.setup.call(t, o, f, s) || t.addEventListener && t.addEventListener(p, s)), 
            c.add && (c.add.call(t, h), h.handler.guid || (h.handler.guid = n.guid)), i ? d.splice(d.delegateCount++, 0, h) : d.push(h), 
            b.event.global[p] = !0);
        },
        remove: function(t, e, n, o, i) {
            var r, s, a, u, l, h, c, d, p, f, g, m = Z.hasData(t) && Z.get(t);
            if (m && (u = m.events)) {
                for (l = (e = (e || "").match(H) || [ "" ]).length; l--; ) if (p = g = (a = bt.exec(e[l]) || [])[1], 
                f = (a[2] || "").split(".").sort(), p) {
                    for (c = b.event.special[p] || {}, d = u[p = (o ? c.delegateType : c.bindType) || p] || [], 
                    a = a[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), s = r = d.length; r--; ) h = d[r], 
                    !i && g !== h.origType || n && n.guid !== h.guid || a && !a.test(h.namespace) || o && o !== h.selector && ("**" !== o || !h.selector) || (d.splice(r, 1), 
                    h.selector && d.delegateCount--, c.remove && c.remove.call(t, h));
                    s && !d.length && (c.teardown && !1 !== c.teardown.call(t, f, m.handle) || b.removeEvent(t, p, m.handle), 
                    delete u[p]);
                } else for (p in u) b.event.remove(t, p + e[l], n, o, !0);
                b.isEmptyObject(u) && Z.remove(t, "handle events");
            }
        },
        dispatch: function(t) {
            var e, n, o, i, r, s, a = b.event.fix(t), u = new Array(arguments.length), l = (Z.get(this, "events") || {})[a.type] || [], h = b.event.special[a.type] || {};
            for (u[0] = a, e = 1; e < arguments.length; e++) u[e] = arguments[e];
            if (a.delegateTarget = this, !h.preDispatch || !1 !== h.preDispatch.call(this, a)) {
                for (s = b.event.handlers.call(this, a, l), e = 0; (i = s[e++]) && !a.isPropagationStopped(); ) for (a.currentTarget = i.elem, 
                n = 0; (r = i.handlers[n++]) && !a.isImmediatePropagationStopped(); ) a.rnamespace && !a.rnamespace.test(r.namespace) || (a.handleObj = r, 
                a.data = r.data, void 0 !== (o = ((b.event.special[r.origType] || {}).handle || r.handler).apply(i.elem, u)) && !1 === (a.result = o) && (a.preventDefault(), 
                a.stopPropagation()));
                return h.postDispatch && h.postDispatch.call(this, a), a.result;
            }
        },
        handlers: function(t, e) {
            var n, o, i, r, s, a = [], u = e.delegateCount, l = t.target;
            if (u && l.nodeType && !("click" === t.type && t.button >= 1)) for (;l !== this; l = l.parentNode || this) if (1 === l.nodeType && ("click" !== t.type || !0 !== l.disabled)) {
                for (r = [], s = {}, n = 0; n < u; n++) void 0 === s[i = (o = e[n]).selector + " "] && (s[i] = o.needsContext ? b(i, this).index(l) > -1 : b.find(i, this, null, [ l ]).length), 
                s[i] && r.push(o);
                r.length && a.push({
                    elem: l,
                    handlers: r
                });
            }
            return l = this, u < e.length && a.push({
                elem: l,
                handlers: e.slice(u)
            }), a;
        },
        addProp: function(t, e) {
            Object.defineProperty(b.Event.prototype, t, {
                enumerable: !0,
                configurable: !0,
                get: g(e) ? function() {
                    if (this.originalEvent) return e(this.originalEvent);
                } : function() {
                    if (this.originalEvent) return this.originalEvent[t];
                },
                set: function(e) {
                    Object.defineProperty(this, t, {
                        enumerable: !0,
                        configurable: !0,
                        writable: !0,
                        value: e
                    });
                }
            });
        },
        fix: function(t) {
            return t[b.expando] ? t : new b.Event(t);
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== _t() && this.focus) return this.focus(), !1;
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    if (this === _t() && this.blur) return this.blur(), !1;
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    if ("checkbox" === this.type && this.click && E(this, "input")) return this.click(), 
                    !1;
                },
                _default: function(t) {
                    return E(t.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(t) {
                    void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result);
                }
            }
        }
    }, b.removeEvent = function(t, e, n) {
        t.removeEventListener && t.removeEventListener(e, n);
    }, b.Event = function(t, e) {
        if (!(this instanceof b.Event)) return new b.Event(t, e);
        t && t.type ? (this.originalEvent = t, this.type = t.type, this.isDefaultPrevented = t.defaultPrevented || void 0 === t.defaultPrevented && !1 === t.returnValue ? xt : Tt, 
        this.target = t.target && 3 === t.target.nodeType ? t.target.parentNode : t.target, 
        this.currentTarget = t.currentTarget, this.relatedTarget = t.relatedTarget) : this.type = t, 
        e && b.extend(this, e), this.timeStamp = t && t.timeStamp || Date.now(), this[b.expando] = !0;
    }, b.Event.prototype = {
        constructor: b.Event,
        isDefaultPrevented: Tt,
        isPropagationStopped: Tt,
        isImmediatePropagationStopped: Tt,
        isSimulated: !1,
        preventDefault: function() {
            var t = this.originalEvent;
            this.isDefaultPrevented = xt, t && !this.isSimulated && t.preventDefault();
        },
        stopPropagation: function() {
            var t = this.originalEvent;
            this.isPropagationStopped = xt, t && !this.isSimulated && t.stopPropagation();
        },
        stopImmediatePropagation: function() {
            var t = this.originalEvent;
            this.isImmediatePropagationStopped = xt, t && !this.isSimulated && t.stopImmediatePropagation(), 
            this.stopPropagation();
        }
    }, b.each({
        altKey: !0,
        bubbles: !0,
        cancelable: !0,
        changedTouches: !0,
        ctrlKey: !0,
        detail: !0,
        eventPhase: !0,
        metaKey: !0,
        pageX: !0,
        pageY: !0,
        shiftKey: !0,
        view: !0,
        char: !0,
        charCode: !0,
        key: !0,
        keyCode: !0,
        button: !0,
        buttons: !0,
        clientX: !0,
        clientY: !0,
        offsetX: !0,
        offsetY: !0,
        pointerId: !0,
        pointerType: !0,
        screenX: !0,
        screenY: !0,
        targetTouches: !0,
        toElement: !0,
        touches: !0,
        which: function(t) {
            var e = t.button;
            return null == t.which && yt.test(t.type) ? null != t.charCode ? t.charCode : t.keyCode : !t.which && void 0 !== e && wt.test(t.type) ? 1 & e ? 1 : 2 & e ? 3 : 4 & e ? 2 : 0 : t.which;
        }
    }, b.event.addProp), b.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(t, e) {
        b.event.special[t] = {
            delegateType: e,
            bindType: e,
            handle: function(t) {
                var n, o = t.relatedTarget, i = t.handleObj;
                return o && (o === this || b.contains(this, o)) || (t.type = i.origType, n = i.handler.apply(this, arguments), 
                t.type = e), n;
            }
        };
    }), b.fn.extend({
        on: function(t, e, n, o) {
            return Ct(this, t, e, n, o);
        },
        one: function(t, e, n, o) {
            return Ct(this, t, e, n, o, 1);
        },
        off: function(t, e, n) {
            var o, i;
            if (t && t.preventDefault && t.handleObj) return o = t.handleObj, b(t.delegateTarget).off(o.namespace ? o.origType + "." + o.namespace : o.origType, o.selector, o.handler), 
            this;
            if ("object" == typeof t) {
                for (i in t) this.off(i, e, t[i]);
                return this;
            }
            return !1 !== e && "function" != typeof e || (n = e, e = void 0), !1 === n && (n = Tt), 
            this.each(function() {
                b.event.remove(this, t, n, e);
            });
        }
    });
    var At = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi, St = /<script|<style|<link/i, Et = /checked\s*(?:[^=]|=\s*.checked.)/i, kt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    function Nt(t, e) {
        return E(t, "table") && E(11 !== e.nodeType ? e : e.firstChild, "tr") && b(t).children("tbody")[0] || t;
    }
    function Dt(t) {
        return t.type = (null !== t.getAttribute("type")) + "/" + t.type, t;
    }
    function Ot(t) {
        return "true/" === (t.type || "").slice(0, 5) ? t.type = t.type.slice(5) : t.removeAttribute("type"), 
        t;
    }
    function Ft(t, e) {
        var n, o, i, r, s, a, u, l;
        if (1 === e.nodeType) {
            if (Z.hasData(t) && (r = Z.access(t), s = Z.set(e, r), l = r.events)) for (i in delete s.handle, 
            s.events = {}, l) for (n = 0, o = l[i].length; n < o; n++) b.event.add(e, i, l[i][n]);
            Y.hasData(t) && (a = Y.access(t), u = b.extend({}, a), Y.set(e, u));
        }
    }
    function Pt(t, e) {
        var n = e.nodeName.toLowerCase();
        "input" === n && lt.test(t.type) ? e.checked = t.checked : "input" !== n && "textarea" !== n || (e.defaultValue = t.defaultValue);
    }
    function Rt(t, e, n, o) {
        e = s.apply([], e);
        var i, r, a, u, l, h, c = 0, d = t.length, p = d - 1, m = e[0], v = g(m);
        if (v || d > 1 && "string" == typeof m && !f.checkClone && Et.test(m)) return t.each(function(i) {
            var r = t.eq(i);
            v && (e[0] = m.call(this, i, r.html())), Rt(r, e, n, o);
        });
        if (d && (r = (i = mt(e, t[0].ownerDocument, !1, t, o)).firstChild, 1 === i.childNodes.length && (i = r), 
        r || o)) {
            for (u = (a = b.map(pt(i, "script"), Dt)).length; c < d; c++) l = i, c !== p && (l = b.clone(l, !0, !0), 
            u && b.merge(a, pt(l, "script"))), n.call(t[c], l, c);
            if (u) for (h = a[a.length - 1].ownerDocument, b.map(a, Ot), c = 0; c < u; c++) l = a[c], 
            ct.test(l.type || "") && !Z.access(l, "globalEval") && b.contains(h, l) && (l.src && "module" !== (l.type || "").toLowerCase() ? b._evalUrl && b._evalUrl(l.src) : y(l.textContent.replace(kt, ""), h, l));
        }
        return t;
    }
    function Ht(t, e, n) {
        for (var o, i = e ? b.filter(e, t) : t, r = 0; null != (o = i[r]); r++) n || 1 !== o.nodeType || b.cleanData(pt(o)), 
        o.parentNode && (n && b.contains(o.ownerDocument, o) && ft(pt(o, "script")), o.parentNode.removeChild(o));
        return t;
    }
    b.extend({
        htmlPrefilter: function(t) {
            return t.replace(At, "<$1></$2>");
        },
        clone: function(t, e, n) {
            var o, i, r, s, a = t.cloneNode(!0), u = b.contains(t.ownerDocument, t);
            if (!(f.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || b.isXMLDoc(t))) for (s = pt(a), 
            o = 0, i = (r = pt(t)).length; o < i; o++) Pt(r[o], s[o]);
            if (e) if (n) for (r = r || pt(t), s = s || pt(a), o = 0, i = r.length; o < i; o++) Ft(r[o], s[o]); else Ft(t, a);
            return (s = pt(a, "script")).length > 0 && ft(s, !u && pt(t, "script")), a;
        },
        cleanData: function(t) {
            for (var e, n, o, i = b.event.special, r = 0; void 0 !== (n = t[r]); r++) if (X(n)) {
                if (e = n[Z.expando]) {
                    if (e.events) for (o in e.events) i[o] ? b.event.remove(n, o) : b.removeEvent(n, o, e.handle);
                    n[Z.expando] = void 0;
                }
                n[Y.expando] && (n[Y.expando] = void 0);
            }
        }
    }), b.fn.extend({
        detach: function(t) {
            return Ht(this, t, !0);
        },
        remove: function(t) {
            return Ht(this, t);
        },
        text: function(t) {
            return B(this, function(t) {
                return void 0 === t ? b.text(this) : this.empty().each(function() {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = t);
                });
            }, null, t, arguments.length);
        },
        append: function() {
            return Rt(this, arguments, function(t) {
                1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Nt(this, t).appendChild(t);
            });
        },
        prepend: function() {
            return Rt(this, arguments, function(t) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var e = Nt(this, t);
                    e.insertBefore(t, e.firstChild);
                }
            });
        },
        before: function() {
            return Rt(this, arguments, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this);
            });
        },
        after: function() {
            return Rt(this, arguments, function(t) {
                this.parentNode && this.parentNode.insertBefore(t, this.nextSibling);
            });
        },
        empty: function() {
            for (var t, e = 0; null != (t = this[e]); e++) 1 === t.nodeType && (b.cleanData(pt(t, !1)), 
            t.textContent = "");
            return this;
        },
        clone: function(t, e) {
            return t = null != t && t, e = null == e ? t : e, this.map(function() {
                return b.clone(this, t, e);
            });
        },
        html: function(t) {
            return B(this, function(t) {
                var e = this[0] || {}, n = 0, o = this.length;
                if (void 0 === t && 1 === e.nodeType) return e.innerHTML;
                if ("string" == typeof t && !St.test(t) && !dt[(ht.exec(t) || [ "", "" ])[1].toLowerCase()]) {
                    t = b.htmlPrefilter(t);
                    try {
                        for (;n < o; n++) 1 === (e = this[n] || {}).nodeType && (b.cleanData(pt(e, !1)), 
                        e.innerHTML = t);
                        e = 0;
                    } catch (t) {}
                }
                e && this.empty().append(t);
            }, null, t, arguments.length);
        },
        replaceWith: function() {
            var t = [];
            return Rt(this, arguments, function(e) {
                var n = this.parentNode;
                b.inArray(this, t) < 0 && (b.cleanData(pt(this)), n && n.replaceChild(e, this));
            }, t);
        }
    }), b.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(t, e) {
        b.fn[t] = function(t) {
            for (var n, o = [], i = b(t), r = i.length - 1, s = 0; s <= r; s++) n = s === r ? this : this.clone(!0), 
            b(i[s])[e](n), a.apply(o, n.get());
            return this.pushStack(o);
        };
    });
    var It = new RegExp("^(" + tt + ")(?!px)[a-z%]+$", "i"), Lt = function(e) {
        var n = e.ownerDocument.defaultView;
        return n && n.opener || (n = t), n.getComputedStyle(e);
    }, jt = new RegExp(nt.join("|"), "i");
    function qt(t, e, n) {
        var o, i, r, s, a = t.style;
        return (n = n || Lt(t)) && ("" !== (s = n.getPropertyValue(e) || n[e]) || b.contains(t.ownerDocument, t) || (s = b.style(t, e)), 
        !f.pixelBoxStyles() && It.test(s) && jt.test(e) && (o = a.width, i = a.minWidth, 
        r = a.maxWidth, a.minWidth = a.maxWidth = a.width = s, s = n.width, a.width = o, 
        a.minWidth = i, a.maxWidth = r)), void 0 !== s ? s + "" : s;
    }
    function Ut(t, e) {
        return {
            get: function() {
                if (!t()) return (this.get = e).apply(this, arguments);
                delete this.get;
            }
        };
    }
    !function() {
        function e() {
            if (h) {
                l.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", 
                h.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", 
                vt.appendChild(l).appendChild(h);
                var e = t.getComputedStyle(h);
                i = "1%" !== e.top, u = 12 === n(e.marginLeft), h.style.right = "60%", a = 36 === n(e.right), 
                r = 36 === n(e.width), h.style.position = "absolute", s = 36 === h.offsetWidth || "absolute", 
                vt.removeChild(l), h = null;
            }
        }
        function n(t) {
            return Math.round(parseFloat(t));
        }
        var i, r, s, a, u, l = o.createElement("div"), h = o.createElement("div");
        h.style && (h.style.backgroundClip = "content-box", h.cloneNode(!0).style.backgroundClip = "", 
        f.clearCloneStyle = "content-box" === h.style.backgroundClip, b.extend(f, {
            boxSizingReliable: function() {
                return e(), r;
            },
            pixelBoxStyles: function() {
                return e(), a;
            },
            pixelPosition: function() {
                return e(), i;
            },
            reliableMarginLeft: function() {
                return e(), u;
            },
            scrollboxSize: function() {
                return e(), s;
            }
        }));
    }();
    var Mt = /^(none|table(?!-c[ea]).+)/, Bt = /^--/, $t = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, Vt = {
        letterSpacing: "0",
        fontWeight: "400"
    }, Wt = [ "Webkit", "Moz", "ms" ], zt = o.createElement("div").style;
    function Xt(t) {
        var e = b.cssProps[t];
        return e || (e = b.cssProps[t] = function(t) {
            if (t in zt) return t;
            for (var e = t[0].toUpperCase() + t.slice(1), n = Wt.length; n--; ) if ((t = Wt[n] + e) in zt) return t;
        }(t) || t), e;
    }
    function Qt(t, e, n) {
        var o = et.exec(e);
        return o ? Math.max(0, o[2] - (n || 0)) + (o[3] || "px") : e;
    }
    function Zt(t, e, n, o, i, r) {
        var s = "width" === e ? 1 : 0, a = 0, u = 0;
        if (n === (o ? "border" : "content")) return 0;
        for (;s < 4; s += 2) "margin" === n && (u += b.css(t, n + nt[s], !0, i)), o ? ("content" === n && (u -= b.css(t, "padding" + nt[s], !0, i)), 
        "margin" !== n && (u -= b.css(t, "border" + nt[s] + "Width", !0, i))) : (u += b.css(t, "padding" + nt[s], !0, i), 
        "padding" !== n ? u += b.css(t, "border" + nt[s] + "Width", !0, i) : a += b.css(t, "border" + nt[s] + "Width", !0, i));
        return !o && r >= 0 && (u += Math.max(0, Math.ceil(t["offset" + e[0].toUpperCase() + e.slice(1)] - r - u - a - .5))), 
        u;
    }
    function Yt(t, e, n) {
        var o = Lt(t), i = qt(t, e, o), r = "border-box" === b.css(t, "boxSizing", !1, o), s = r;
        if (It.test(i)) {
            if (!n) return i;
            i = "auto";
        }
        return s = s && (f.boxSizingReliable() || i === t.style[e]), ("auto" === i || !parseFloat(i) && "inline" === b.css(t, "display", !1, o)) && (i = t["offset" + e[0].toUpperCase() + e.slice(1)], 
        s = !0), (i = parseFloat(i) || 0) + Zt(t, e, n || (r ? "border" : "content"), s, o, i) + "px";
    }
    function Kt(t, e, n, o, i) {
        return new Kt.prototype.init(t, e, n, o, i);
    }
    b.extend({
        cssHooks: {
            opacity: {
                get: function(t, e) {
                    if (e) {
                        var n = qt(t, "opacity");
                        return "" === n ? "1" : n;
                    }
                }
            }
        },
        cssNumber: {
            animationIterationCount: !0,
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {},
        style: function(t, e, n, o) {
            if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                var i, r, s, a = z(e), u = Bt.test(e), l = t.style;
                if (u || (e = Xt(a)), s = b.cssHooks[e] || b.cssHooks[a], void 0 === n) return s && "get" in s && void 0 !== (i = s.get(t, !1, o)) ? i : l[e];
                "string" == (r = typeof n) && (i = et.exec(n)) && i[1] && (n = rt(t, e, i), r = "number"), 
                null != n && n == n && ("number" === r && (n += i && i[3] || (b.cssNumber[a] ? "" : "px")), 
                f.clearCloneStyle || "" !== n || 0 !== e.indexOf("background") || (l[e] = "inherit"), 
                s && "set" in s && void 0 === (n = s.set(t, n, o)) || (u ? l.setProperty(e, n) : l[e] = n));
            }
        },
        css: function(t, e, n, o) {
            var i, r, s, a = z(e);
            return Bt.test(e) || (e = Xt(a)), (s = b.cssHooks[e] || b.cssHooks[a]) && "get" in s && (i = s.get(t, !0, n)), 
            void 0 === i && (i = qt(t, e, o)), "normal" === i && e in Vt && (i = Vt[e]), "" === n || n ? (r = parseFloat(i), 
            !0 === n || isFinite(r) ? r || 0 : i) : i;
        }
    }), b.each([ "height", "width" ], function(t, e) {
        b.cssHooks[e] = {
            get: function(t, n, o) {
                if (n) return !Mt.test(b.css(t, "display")) || t.getClientRects().length && t.getBoundingClientRect().width ? Yt(t, e, o) : it(t, $t, function() {
                    return Yt(t, e, o);
                });
            },
            set: function(t, n, o) {
                var i, r = Lt(t), s = "border-box" === b.css(t, "boxSizing", !1, r), a = o && Zt(t, e, o, s, r);
                return s && f.scrollboxSize() === r.position && (a -= Math.ceil(t["offset" + e[0].toUpperCase() + e.slice(1)] - parseFloat(r[e]) - Zt(t, e, "border", !1, r) - .5)), 
                a && (i = et.exec(n)) && "px" !== (i[3] || "px") && (t.style[e] = n, n = b.css(t, e)), 
                Qt(0, n, a);
            }
        };
    }), b.cssHooks.marginLeft = Ut(f.reliableMarginLeft, function(t, e) {
        if (e) return (parseFloat(qt(t, "marginLeft")) || t.getBoundingClientRect().left - it(t, {
            marginLeft: 0
        }, function() {
            return t.getBoundingClientRect().left;
        })) + "px";
    }), b.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(t, e) {
        b.cssHooks[t + e] = {
            expand: function(n) {
                for (var o = 0, i = {}, r = "string" == typeof n ? n.split(" ") : [ n ]; o < 4; o++) i[t + nt[o] + e] = r[o] || r[o - 2] || r[0];
                return i;
            }
        }, "margin" !== t && (b.cssHooks[t + e].set = Qt);
    }), b.fn.extend({
        css: function(t, e) {
            return B(this, function(t, e, n) {
                var o, i, r = {}, s = 0;
                if (Array.isArray(e)) {
                    for (o = Lt(t), i = e.length; s < i; s++) r[e[s]] = b.css(t, e[s], !1, o);
                    return r;
                }
                return void 0 !== n ? b.style(t, e, n) : b.css(t, e);
            }, t, e, arguments.length > 1);
        }
    }), b.Tween = Kt, Kt.prototype = {
        constructor: Kt,
        init: function(t, e, n, o, i, r) {
            this.elem = t, this.prop = n, this.easing = i || b.easing._default, this.options = e, 
            this.start = this.now = this.cur(), this.end = o, this.unit = r || (b.cssNumber[n] ? "" : "px");
        },
        cur: function() {
            var t = Kt.propHooks[this.prop];
            return t && t.get ? t.get(this) : Kt.propHooks._default.get(this);
        },
        run: function(t) {
            var e, n = Kt.propHooks[this.prop];
            return this.options.duration ? this.pos = e = b.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : this.pos = e = t, 
            this.now = (this.end - this.start) * e + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), 
            n && n.set ? n.set(this) : Kt.propHooks._default.set(this), this;
        }
    }, Kt.prototype.init.prototype = Kt.prototype, Kt.propHooks = {
        _default: {
            get: function(t) {
                var e;
                return 1 !== t.elem.nodeType || null != t.elem[t.prop] && null == t.elem.style[t.prop] ? t.elem[t.prop] : (e = b.css(t.elem, t.prop, "")) && "auto" !== e ? e : 0;
            },
            set: function(t) {
                b.fx.step[t.prop] ? b.fx.step[t.prop](t) : 1 !== t.elem.nodeType || null == t.elem.style[b.cssProps[t.prop]] && !b.cssHooks[t.prop] ? t.elem[t.prop] = t.now : b.style(t.elem, t.prop, t.now + t.unit);
            }
        }
    }, Kt.propHooks.scrollTop = Kt.propHooks.scrollLeft = {
        set: function(t) {
            t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now);
        }
    }, b.easing = {
        linear: function(t) {
            return t;
        },
        swing: function(t) {
            return .5 - Math.cos(t * Math.PI) / 2;
        },
        _default: "swing"
    }, b.fx = Kt.prototype.init, b.fx.step = {};
    var Gt, Jt, te = /^(?:toggle|show|hide)$/, ee = /queueHooks$/;
    function ne() {
        Jt && (!1 === o.hidden && t.requestAnimationFrame ? t.requestAnimationFrame(ne) : t.setTimeout(ne, b.fx.interval), 
        b.fx.tick());
    }
    function oe() {
        return t.setTimeout(function() {
            Gt = void 0;
        }), Gt = Date.now();
    }
    function ie(t, e) {
        var n, o = 0, i = {
            height: t
        };
        for (e = e ? 1 : 0; o < 4; o += 2 - e) i["margin" + (n = nt[o])] = i["padding" + n] = t;
        return e && (i.opacity = i.width = t), i;
    }
    function re(t, e, n) {
        for (var o, i = (se.tweeners[e] || []).concat(se.tweeners["*"]), r = 0, s = i.length; r < s; r++) if (o = i[r].call(n, e, t)) return o;
    }
    function se(t, e, n) {
        var o, i, r = 0, s = se.prefilters.length, a = b.Deferred().always(function() {
            delete u.elem;
        }), u = function() {
            if (i) return !1;
            for (var e = Gt || oe(), n = Math.max(0, l.startTime + l.duration - e), o = 1 - (n / l.duration || 0), r = 0, s = l.tweens.length; r < s; r++) l.tweens[r].run(o);
            return a.notifyWith(t, [ l, o, n ]), o < 1 && s ? n : (s || a.notifyWith(t, [ l, 1, 0 ]), 
            a.resolveWith(t, [ l ]), !1);
        }, l = a.promise({
            elem: t,
            props: b.extend({}, e),
            opts: b.extend(!0, {
                specialEasing: {},
                easing: b.easing._default
            }, n),
            originalProperties: e,
            originalOptions: n,
            startTime: Gt || oe(),
            duration: n.duration,
            tweens: [],
            createTween: function(e, n) {
                var o = b.Tween(t, l.opts, e, n, l.opts.specialEasing[e] || l.opts.easing);
                return l.tweens.push(o), o;
            },
            stop: function(e) {
                var n = 0, o = e ? l.tweens.length : 0;
                if (i) return this;
                for (i = !0; n < o; n++) l.tweens[n].run(1);
                return e ? (a.notifyWith(t, [ l, 1, 0 ]), a.resolveWith(t, [ l, e ])) : a.rejectWith(t, [ l, e ]), 
                this;
            }
        }), h = l.props;
        for (function(t, e) {
            var n, o, i, r, s;
            for (n in t) if (i = e[o = z(n)], r = t[n], Array.isArray(r) && (i = r[1], r = t[n] = r[0]), 
            n !== o && (t[o] = r, delete t[n]), (s = b.cssHooks[o]) && "expand" in s) for (n in r = s.expand(r), 
            delete t[o], r) n in t || (t[n] = r[n], e[n] = i); else e[o] = i;
        }(h, l.opts.specialEasing); r < s; r++) if (o = se.prefilters[r].call(l, t, h, l.opts)) return g(o.stop) && (b._queueHooks(l.elem, l.opts.queue).stop = o.stop.bind(o)), 
        o;
        return b.map(h, re, l), g(l.opts.start) && l.opts.start.call(t, l), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always), 
        b.fx.timer(b.extend(u, {
            elem: t,
            anim: l,
            queue: l.opts.queue
        })), l;
    }
    b.Animation = b.extend(se, {
        tweeners: {
            "*": [ function(t, e) {
                var n = this.createTween(t, e);
                return rt(n.elem, t, et.exec(e), n), n;
            } ]
        },
        tweener: function(t, e) {
            g(t) ? (e = t, t = [ "*" ]) : t = t.match(H);
            for (var n, o = 0, i = t.length; o < i; o++) n = t[o], se.tweeners[n] = se.tweeners[n] || [], 
            se.tweeners[n].unshift(e);
        },
        prefilters: [ function(t, e, n) {
            var o, i, r, s, a, u, l, h, c = "width" in e || "height" in e, d = this, p = {}, f = t.style, g = t.nodeType && ot(t), m = Z.get(t, "fxshow");
            for (o in n.queue || (null == (s = b._queueHooks(t, "fx")).unqueued && (s.unqueued = 0, 
            a = s.empty.fire, s.empty.fire = function() {
                s.unqueued || a();
            }), s.unqueued++, d.always(function() {
                d.always(function() {
                    s.unqueued--, b.queue(t, "fx").length || s.empty.fire();
                });
            })), e) if (i = e[o], te.test(i)) {
                if (delete e[o], r = r || "toggle" === i, i === (g ? "hide" : "show")) {
                    if ("show" !== i || !m || void 0 === m[o]) continue;
                    g = !0;
                }
                p[o] = m && m[o] || b.style(t, o);
            }
            if ((u = !b.isEmptyObject(e)) || !b.isEmptyObject(p)) for (o in c && 1 === t.nodeType && (n.overflow = [ f.overflow, f.overflowX, f.overflowY ], 
            null == (l = m && m.display) && (l = Z.get(t, "display")), "none" === (h = b.css(t, "display")) && (l ? h = l : (ut([ t ], !0), 
            l = t.style.display || l, h = b.css(t, "display"), ut([ t ]))), ("inline" === h || "inline-block" === h && null != l) && "none" === b.css(t, "float") && (u || (d.done(function() {
                f.display = l;
            }), null == l && (h = f.display, l = "none" === h ? "" : h)), f.display = "inline-block")), 
            n.overflow && (f.overflow = "hidden", d.always(function() {
                f.overflow = n.overflow[0], f.overflowX = n.overflow[1], f.overflowY = n.overflow[2];
            })), u = !1, p) u || (m ? "hidden" in m && (g = m.hidden) : m = Z.access(t, "fxshow", {
                display: l
            }), r && (m.hidden = !g), g && ut([ t ], !0), d.done(function() {
                for (o in g || ut([ t ]), Z.remove(t, "fxshow"), p) b.style(t, o, p[o]);
            })), u = re(g ? m[o] : 0, o, d), o in m || (m[o] = u.start, g && (u.end = u.start, 
            u.start = 0));
        } ],
        prefilter: function(t, e) {
            e ? se.prefilters.unshift(t) : se.prefilters.push(t);
        }
    }), b.speed = function(t, e, n) {
        var o = t && "object" == typeof t ? b.extend({}, t) : {
            complete: n || !n && e || g(t) && t,
            duration: t,
            easing: n && e || e && !g(e) && e
        };
        return b.fx.off ? o.duration = 0 : "number" != typeof o.duration && (o.duration in b.fx.speeds ? o.duration = b.fx.speeds[o.duration] : o.duration = b.fx.speeds._default), 
        null != o.queue && !0 !== o.queue || (o.queue = "fx"), o.old = o.complete, o.complete = function() {
            g(o.old) && o.old.call(this), o.queue && b.dequeue(this, o.queue);
        }, o;
    }, b.fn.extend({
        fadeTo: function(t, e, n, o) {
            return this.filter(ot).css("opacity", 0).show().end().animate({
                opacity: e
            }, t, n, o);
        },
        animate: function(t, e, n, o) {
            var i = b.isEmptyObject(t), r = b.speed(e, n, o), s = function() {
                var e = se(this, b.extend({}, t), r);
                (i || Z.get(this, "finish")) && e.stop(!0);
            };
            return s.finish = s, i || !1 === r.queue ? this.each(s) : this.queue(r.queue, s);
        },
        stop: function(t, e, n) {
            var o = function(t) {
                var e = t.stop;
                delete t.stop, e(n);
            };
            return "string" != typeof t && (n = e, e = t, t = void 0), e && !1 !== t && this.queue(t || "fx", []), 
            this.each(function() {
                var e = !0, i = null != t && t + "queueHooks", r = b.timers, s = Z.get(this);
                if (i) s[i] && s[i].stop && o(s[i]); else for (i in s) s[i] && s[i].stop && ee.test(i) && o(s[i]);
                for (i = r.length; i--; ) r[i].elem !== this || null != t && r[i].queue !== t || (r[i].anim.stop(n), 
                e = !1, r.splice(i, 1));
                !e && n || b.dequeue(this, t);
            });
        },
        finish: function(t) {
            return !1 !== t && (t = t || "fx"), this.each(function() {
                var e, n = Z.get(this), o = n[t + "queue"], i = n[t + "queueHooks"], r = b.timers, s = o ? o.length : 0;
                for (n.finish = !0, b.queue(this, t, []), i && i.stop && i.stop.call(this, !0), 
                e = r.length; e--; ) r[e].elem === this && r[e].queue === t && (r[e].anim.stop(!0), 
                r.splice(e, 1));
                for (e = 0; e < s; e++) o[e] && o[e].finish && o[e].finish.call(this);
                delete n.finish;
            });
        }
    }), b.each([ "toggle", "show", "hide" ], function(t, e) {
        var n = b.fn[e];
        b.fn[e] = function(t, o, i) {
            return null == t || "boolean" == typeof t ? n.apply(this, arguments) : this.animate(ie(e, !0), t, o, i);
        };
    }), b.each({
        slideDown: ie("show"),
        slideUp: ie("hide"),
        slideToggle: ie("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(t, e) {
        b.fn[t] = function(t, n, o) {
            return this.animate(e, t, n, o);
        };
    }), b.timers = [], b.fx.tick = function() {
        var t, e = 0, n = b.timers;
        for (Gt = Date.now(); e < n.length; e++) (t = n[e])() || n[e] !== t || n.splice(e--, 1);
        n.length || b.fx.stop(), Gt = void 0;
    }, b.fx.timer = function(t) {
        b.timers.push(t), b.fx.start();
    }, b.fx.interval = 13, b.fx.start = function() {
        Jt || (Jt = !0, ne());
    }, b.fx.stop = function() {
        Jt = null;
    }, b.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    }, b.fn.delay = function(e, n) {
        return e = b.fx && b.fx.speeds[e] || e, n = n || "fx", this.queue(n, function(n, o) {
            var i = t.setTimeout(n, e);
            o.stop = function() {
                t.clearTimeout(i);
            };
        });
    }, function() {
        var t = o.createElement("input"), e = o.createElement("select").appendChild(o.createElement("option"));
        t.type = "checkbox", f.checkOn = "" !== t.value, f.optSelected = e.selected, (t = o.createElement("input")).value = "t", 
        t.type = "radio", f.radioValue = "t" === t.value;
    }();
    var ae, ue = b.expr.attrHandle;
    b.fn.extend({
        attr: function(t, e) {
            return B(this, b.attr, t, e, arguments.length > 1);
        },
        removeAttr: function(t) {
            return this.each(function() {
                b.removeAttr(this, t);
            });
        }
    }), b.extend({
        attr: function(t, e, n) {
            var o, i, r = t.nodeType;
            if (3 !== r && 8 !== r && 2 !== r) return void 0 === t.getAttribute ? b.prop(t, e, n) : (1 === r && b.isXMLDoc(t) || (i = b.attrHooks[e.toLowerCase()] || (b.expr.match.bool.test(e) ? ae : void 0)), 
            void 0 !== n ? null === n ? void b.removeAttr(t, e) : i && "set" in i && void 0 !== (o = i.set(t, n, e)) ? o : (t.setAttribute(e, n + ""), 
            n) : i && "get" in i && null !== (o = i.get(t, e)) ? o : null == (o = b.find.attr(t, e)) ? void 0 : o);
        },
        attrHooks: {
            type: {
                set: function(t, e) {
                    if (!f.radioValue && "radio" === e && E(t, "input")) {
                        var n = t.value;
                        return t.setAttribute("type", e), n && (t.value = n), e;
                    }
                }
            }
        },
        removeAttr: function(t, e) {
            var n, o = 0, i = e && e.match(H);
            if (i && 1 === t.nodeType) for (;n = i[o++]; ) t.removeAttribute(n);
        }
    }), ae = {
        set: function(t, e, n) {
            return !1 === e ? b.removeAttr(t, n) : t.setAttribute(n, n), n;
        }
    }, b.each(b.expr.match.bool.source.match(/\w+/g), function(t, e) {
        var n = ue[e] || b.find.attr;
        ue[e] = function(t, e, o) {
            var i, r, s = e.toLowerCase();
            return o || (r = ue[s], ue[s] = i, i = null != n(t, e, o) ? s : null, ue[s] = r), 
            i;
        };
    });
    var le = /^(?:input|select|textarea|button)$/i, he = /^(?:a|area)$/i;
    function ce(t) {
        return (t.match(H) || []).join(" ");
    }
    function de(t) {
        return t.getAttribute && t.getAttribute("class") || "";
    }
    function pe(t) {
        return Array.isArray(t) ? t : "string" == typeof t && t.match(H) || [];
    }
    b.fn.extend({
        prop: function(t, e) {
            return B(this, b.prop, t, e, arguments.length > 1);
        },
        removeProp: function(t) {
            return this.each(function() {
                delete this[b.propFix[t] || t];
            });
        }
    }), b.extend({
        prop: function(t, e, n) {
            var o, i, r = t.nodeType;
            if (3 !== r && 8 !== r && 2 !== r) return 1 === r && b.isXMLDoc(t) || (e = b.propFix[e] || e, 
            i = b.propHooks[e]), void 0 !== n ? i && "set" in i && void 0 !== (o = i.set(t, n, e)) ? o : t[e] = n : i && "get" in i && null !== (o = i.get(t, e)) ? o : t[e];
        },
        propHooks: {
            tabIndex: {
                get: function(t) {
                    var e = b.find.attr(t, "tabindex");
                    return e ? parseInt(e, 10) : le.test(t.nodeName) || he.test(t.nodeName) && t.href ? 0 : -1;
                }
            }
        },
        propFix: {
            for: "htmlFor",
            class: "className"
        }
    }), f.optSelected || (b.propHooks.selected = {
        get: function(t) {
            var e = t.parentNode;
            return e && e.parentNode && e.parentNode.selectedIndex, null;
        },
        set: function(t) {
            var e = t.parentNode;
            e && (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex);
        }
    }), b.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        b.propFix[this.toLowerCase()] = this;
    }), b.fn.extend({
        addClass: function(t) {
            var e, n, o, i, r, s, a, u = 0;
            if (g(t)) return this.each(function(e) {
                b(this).addClass(t.call(this, e, de(this)));
            });
            if ((e = pe(t)).length) for (;n = this[u++]; ) if (i = de(n), o = 1 === n.nodeType && " " + ce(i) + " ") {
                for (s = 0; r = e[s++]; ) o.indexOf(" " + r + " ") < 0 && (o += r + " ");
                i !== (a = ce(o)) && n.setAttribute("class", a);
            }
            return this;
        },
        removeClass: function(t) {
            var e, n, o, i, r, s, a, u = 0;
            if (g(t)) return this.each(function(e) {
                b(this).removeClass(t.call(this, e, de(this)));
            });
            if (!arguments.length) return this.attr("class", "");
            if ((e = pe(t)).length) for (;n = this[u++]; ) if (i = de(n), o = 1 === n.nodeType && " " + ce(i) + " ") {
                for (s = 0; r = e[s++]; ) for (;o.indexOf(" " + r + " ") > -1; ) o = o.replace(" " + r + " ", " ");
                i !== (a = ce(o)) && n.setAttribute("class", a);
            }
            return this;
        },
        toggleClass: function(t, e) {
            var n = typeof t, o = "string" === n || Array.isArray(t);
            return "boolean" == typeof e && o ? e ? this.addClass(t) : this.removeClass(t) : g(t) ? this.each(function(n) {
                b(this).toggleClass(t.call(this, n, de(this), e), e);
            }) : this.each(function() {
                var e, i, r, s;
                if (o) for (i = 0, r = b(this), s = pe(t); e = s[i++]; ) r.hasClass(e) ? r.removeClass(e) : r.addClass(e); else void 0 !== t && "boolean" !== n || ((e = de(this)) && Z.set(this, "__className__", e), 
                this.setAttribute && this.setAttribute("class", e || !1 === t ? "" : Z.get(this, "__className__") || ""));
            });
        },
        hasClass: function(t) {
            var e, n, o = 0;
            for (e = " " + t + " "; n = this[o++]; ) if (1 === n.nodeType && (" " + ce(de(n)) + " ").indexOf(e) > -1) return !0;
            return !1;
        }
    });
    var fe = /\r/g;
    b.fn.extend({
        val: function(t) {
            var e, n, o, i = this[0];
            return arguments.length ? (o = g(t), this.each(function(n) {
                var i;
                1 === this.nodeType && (null == (i = o ? t.call(this, n, b(this).val()) : t) ? i = "" : "number" == typeof i ? i += "" : Array.isArray(i) && (i = b.map(i, function(t) {
                    return null == t ? "" : t + "";
                })), (e = b.valHooks[this.type] || b.valHooks[this.nodeName.toLowerCase()]) && "set" in e && void 0 !== e.set(this, i, "value") || (this.value = i));
            })) : i ? (e = b.valHooks[i.type] || b.valHooks[i.nodeName.toLowerCase()]) && "get" in e && void 0 !== (n = e.get(i, "value")) ? n : "string" == typeof (n = i.value) ? n.replace(fe, "") : null == n ? "" : n : void 0;
        }
    }), b.extend({
        valHooks: {
            option: {
                get: function(t) {
                    var e = b.find.attr(t, "value");
                    return null != e ? e : ce(b.text(t));
                }
            },
            select: {
                get: function(t) {
                    var e, n, o, i = t.options, r = t.selectedIndex, s = "select-one" === t.type, a = s ? null : [], u = s ? r + 1 : i.length;
                    for (o = r < 0 ? u : s ? r : 0; o < u; o++) if (((n = i[o]).selected || o === r) && !n.disabled && (!n.parentNode.disabled || !E(n.parentNode, "optgroup"))) {
                        if (e = b(n).val(), s) return e;
                        a.push(e);
                    }
                    return a;
                },
                set: function(t, e) {
                    for (var n, o, i = t.options, r = b.makeArray(e), s = i.length; s--; ) ((o = i[s]).selected = b.inArray(b.valHooks.option.get(o), r) > -1) && (n = !0);
                    return n || (t.selectedIndex = -1), r;
                }
            }
        }
    }), b.each([ "radio", "checkbox" ], function() {
        b.valHooks[this] = {
            set: function(t, e) {
                if (Array.isArray(e)) return t.checked = b.inArray(b(t).val(), e) > -1;
            }
        }, f.checkOn || (b.valHooks[this].get = function(t) {
            return null === t.getAttribute("value") ? "on" : t.value;
        });
    }), f.focusin = "onfocusin" in t;
    var ge = /^(?:focusinfocus|focusoutblur)$/, me = function(t) {
        t.stopPropagation();
    };
    b.extend(b.event, {
        trigger: function(e, n, i, r) {
            var s, a, u, l, h, d, p, f, v = [ i || o ], y = c.call(e, "type") ? e.type : e, w = c.call(e, "namespace") ? e.namespace.split(".") : [];
            if (a = f = u = i = i || o, 3 !== i.nodeType && 8 !== i.nodeType && !ge.test(y + b.event.triggered) && (y.indexOf(".") > -1 && (y = (w = y.split(".")).shift(), 
            w.sort()), h = y.indexOf(":") < 0 && "on" + y, (e = e[b.expando] ? e : new b.Event(y, "object" == typeof e && e)).isTrigger = r ? 2 : 3, 
            e.namespace = w.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + w.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, 
            e.result = void 0, e.target || (e.target = i), n = null == n ? [ e ] : b.makeArray(n, [ e ]), 
            p = b.event.special[y] || {}, r || !p.trigger || !1 !== p.trigger.apply(i, n))) {
                if (!r && !p.noBubble && !m(i)) {
                    for (l = p.delegateType || y, ge.test(l + y) || (a = a.parentNode); a; a = a.parentNode) v.push(a), 
                    u = a;
                    u === (i.ownerDocument || o) && v.push(u.defaultView || u.parentWindow || t);
                }
                for (s = 0; (a = v[s++]) && !e.isPropagationStopped(); ) f = a, e.type = s > 1 ? l : p.bindType || y, 
                (d = (Z.get(a, "events") || {})[e.type] && Z.get(a, "handle")) && d.apply(a, n), 
                (d = h && a[h]) && d.apply && X(a) && (e.result = d.apply(a, n), !1 === e.result && e.preventDefault());
                return e.type = y, r || e.isDefaultPrevented() || p._default && !1 !== p._default.apply(v.pop(), n) || !X(i) || h && g(i[y]) && !m(i) && ((u = i[h]) && (i[h] = null), 
                b.event.triggered = y, e.isPropagationStopped() && f.addEventListener(y, me), i[y](), 
                e.isPropagationStopped() && f.removeEventListener(y, me), b.event.triggered = void 0, 
                u && (i[h] = u)), e.result;
            }
        },
        simulate: function(t, e, n) {
            var o = b.extend(new b.Event(), n, {
                type: t,
                isSimulated: !0
            });
            b.event.trigger(o, null, e);
        }
    }), b.fn.extend({
        trigger: function(t, e) {
            return this.each(function() {
                b.event.trigger(t, e, this);
            });
        },
        triggerHandler: function(t, e) {
            var n = this[0];
            if (n) return b.event.trigger(t, e, n, !0);
        }
    }), f.focusin || b.each({
        focus: "focusin",
        blur: "focusout"
    }, function(t, e) {
        var n = function(t) {
            b.event.simulate(e, t.target, b.event.fix(t));
        };
        b.event.special[e] = {
            setup: function() {
                var o = this.ownerDocument || this, i = Z.access(o, e);
                i || o.addEventListener(t, n, !0), Z.access(o, e, (i || 0) + 1);
            },
            teardown: function() {
                var o = this.ownerDocument || this, i = Z.access(o, e) - 1;
                i ? Z.access(o, e, i) : (o.removeEventListener(t, n, !0), Z.remove(o, e));
            }
        };
    });
    var ve = t.location, ye = Date.now(), we = /\?/;
    b.parseXML = function(e) {
        var n;
        if (!e || "string" != typeof e) return null;
        try {
            n = new t.DOMParser().parseFromString(e, "text/xml");
        } catch (t) {
            n = void 0;
        }
        return n && !n.getElementsByTagName("parsererror").length || b.error("Invalid XML: " + e), 
        n;
    };
    var be = /\[\]$/, xe = /\r?\n/g, Te = /^(?:submit|button|image|reset|file)$/i, _e = /^(?:input|select|textarea|keygen)/i;
    function Ce(t, e, n, o) {
        var i;
        if (Array.isArray(e)) b.each(e, function(e, i) {
            n || be.test(t) ? o(t, i) : Ce(t + "[" + ("object" == typeof i && null != i ? e : "") + "]", i, n, o);
        }); else if (n || "object" !== w(e)) o(t, e); else for (i in e) Ce(t + "[" + i + "]", e[i], n, o);
    }
    b.param = function(t, e) {
        var n, o = [], i = function(t, e) {
            var n = g(e) ? e() : e;
            o[o.length] = encodeURIComponent(t) + "=" + encodeURIComponent(null == n ? "" : n);
        };
        if (Array.isArray(t) || t.jquery && !b.isPlainObject(t)) b.each(t, function() {
            i(this.name, this.value);
        }); else for (n in t) Ce(n, t[n], e, i);
        return o.join("&");
    }, b.fn.extend({
        serialize: function() {
            return b.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var t = b.prop(this, "elements");
                return t ? b.makeArray(t) : this;
            }).filter(function() {
                var t = this.type;
                return this.name && !b(this).is(":disabled") && _e.test(this.nodeName) && !Te.test(t) && (this.checked || !lt.test(t));
            }).map(function(t, e) {
                var n = b(this).val();
                return null == n ? null : Array.isArray(n) ? b.map(n, function(t) {
                    return {
                        name: e.name,
                        value: t.replace(xe, "\r\n")
                    };
                }) : {
                    name: e.name,
                    value: n.replace(xe, "\r\n")
                };
            }).get();
        }
    });
    var Ae = /%20/g, Se = /#.*$/, Ee = /([?&])_=[^&]*/, ke = /^(.*?):[ \t]*([^\r\n]*)$/gm, Ne = /^(?:GET|HEAD)$/, De = /^\/\//, Oe = {}, Fe = {}, Pe = "*/".concat("*"), Re = o.createElement("a");
    function He(t) {
        return function(e, n) {
            "string" != typeof e && (n = e, e = "*");
            var o, i = 0, r = e.toLowerCase().match(H) || [];
            if (g(n)) for (;o = r[i++]; ) "+" === o[0] ? (o = o.slice(1) || "*", (t[o] = t[o] || []).unshift(n)) : (t[o] = t[o] || []).push(n);
        };
    }
    function Ie(t, e, n, o) {
        var i = {}, r = t === Fe;
        function s(a) {
            var u;
            return i[a] = !0, b.each(t[a] || [], function(t, a) {
                var l = a(e, n, o);
                return "string" != typeof l || r || i[l] ? r ? !(u = l) : void 0 : (e.dataTypes.unshift(l), 
                s(l), !1);
            }), u;
        }
        return s(e.dataTypes[0]) || !i["*"] && s("*");
    }
    function Le(t, e) {
        var n, o, i = b.ajaxSettings.flatOptions || {};
        for (n in e) void 0 !== e[n] && ((i[n] ? t : o || (o = {}))[n] = e[n]);
        return o && b.extend(!0, t, o), t;
    }
    Re.href = ve.href, b.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ve.href,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ve.protocol),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": Pe,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /\bxml\b/,
                html: /\bhtml/,
                json: /\bjson\b/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": JSON.parse,
                "text xml": b.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(t, e) {
            return e ? Le(Le(t, b.ajaxSettings), e) : Le(b.ajaxSettings, t);
        },
        ajaxPrefilter: He(Oe),
        ajaxTransport: He(Fe),
        ajax: function(e, n) {
            "object" == typeof e && (n = e, e = void 0), n = n || {};
            var i, r, s, a, u, l, h, c, d, p, f = b.ajaxSetup({}, n), g = f.context || f, m = f.context && (g.nodeType || g.jquery) ? b(g) : b.event, v = b.Deferred(), y = b.Callbacks("once memory"), w = f.statusCode || {}, x = {}, T = {}, _ = "canceled", C = {
                readyState: 0,
                getResponseHeader: function(t) {
                    var e;
                    if (h) {
                        if (!a) for (a = {}; e = ke.exec(s); ) a[e[1].toLowerCase()] = e[2];
                        e = a[t.toLowerCase()];
                    }
                    return null == e ? null : e;
                },
                getAllResponseHeaders: function() {
                    return h ? s : null;
                },
                setRequestHeader: function(t, e) {
                    return null == h && (t = T[t.toLowerCase()] = T[t.toLowerCase()] || t, x[t] = e), 
                    this;
                },
                overrideMimeType: function(t) {
                    return null == h && (f.mimeType = t), this;
                },
                statusCode: function(t) {
                    var e;
                    if (t) if (h) C.always(t[C.status]); else for (e in t) w[e] = [ w[e], t[e] ];
                    return this;
                },
                abort: function(t) {
                    var e = t || _;
                    return i && i.abort(e), A(0, e), this;
                }
            };
            if (v.promise(C), f.url = ((e || f.url || ve.href) + "").replace(De, ve.protocol + "//"), 
            f.type = n.method || n.type || f.method || f.type, f.dataTypes = (f.dataType || "*").toLowerCase().match(H) || [ "" ], 
            null == f.crossDomain) {
                l = o.createElement("a");
                try {
                    l.href = f.url, l.href = l.href, f.crossDomain = Re.protocol + "//" + Re.host != l.protocol + "//" + l.host;
                } catch (t) {
                    f.crossDomain = !0;
                }
            }
            if (f.data && f.processData && "string" != typeof f.data && (f.data = b.param(f.data, f.traditional)), 
            Ie(Oe, f, n, C), h) return C;
            for (d in (c = b.event && f.global) && 0 == b.active++ && b.event.trigger("ajaxStart"), 
            f.type = f.type.toUpperCase(), f.hasContent = !Ne.test(f.type), r = f.url.replace(Se, ""), 
            f.hasContent ? f.data && f.processData && 0 === (f.contentType || "").indexOf("application/x-www-form-urlencoded") && (f.data = f.data.replace(Ae, "+")) : (p = f.url.slice(r.length), 
            f.data && (f.processData || "string" == typeof f.data) && (r += (we.test(r) ? "&" : "?") + f.data, 
            delete f.data), !1 === f.cache && (r = r.replace(Ee, "$1"), p = (we.test(r) ? "&" : "?") + "_=" + ye++ + p), 
            f.url = r + p), f.ifModified && (b.lastModified[r] && C.setRequestHeader("If-Modified-Since", b.lastModified[r]), 
            b.etag[r] && C.setRequestHeader("If-None-Match", b.etag[r])), (f.data && f.hasContent && !1 !== f.contentType || n.contentType) && C.setRequestHeader("Content-Type", f.contentType), 
            C.setRequestHeader("Accept", f.dataTypes[0] && f.accepts[f.dataTypes[0]] ? f.accepts[f.dataTypes[0]] + ("*" !== f.dataTypes[0] ? ", " + Pe + "; q=0.01" : "") : f.accepts["*"]), 
            f.headers) C.setRequestHeader(d, f.headers[d]);
            if (f.beforeSend && (!1 === f.beforeSend.call(g, C, f) || h)) return C.abort();
            if (_ = "abort", y.add(f.complete), C.done(f.success), C.fail(f.error), i = Ie(Fe, f, n, C)) {
                if (C.readyState = 1, c && m.trigger("ajaxSend", [ C, f ]), h) return C;
                f.async && f.timeout > 0 && (u = t.setTimeout(function() {
                    C.abort("timeout");
                }, f.timeout));
                try {
                    h = !1, i.send(x, A);
                } catch (t) {
                    if (h) throw t;
                    A(-1, t);
                }
            } else A(-1, "No Transport");
            function A(e, n, o, a) {
                var l, d, p, x, T, _ = n;
                h || (h = !0, u && t.clearTimeout(u), i = void 0, s = a || "", C.readyState = e > 0 ? 4 : 0, 
                l = e >= 200 && e < 300 || 304 === e, o && (x = function(t, e, n) {
                    for (var o, i, r, s, a = t.contents, u = t.dataTypes; "*" === u[0]; ) u.shift(), 
                    void 0 === o && (o = t.mimeType || e.getResponseHeader("Content-Type"));
                    if (o) for (i in a) if (a[i] && a[i].test(o)) {
                        u.unshift(i);
                        break;
                    }
                    if (u[0] in n) r = u[0]; else {
                        for (i in n) {
                            if (!u[0] || t.converters[i + " " + u[0]]) {
                                r = i;
                                break;
                            }
                            s || (s = i);
                        }
                        r = r || s;
                    }
                    if (r) return r !== u[0] && u.unshift(r), n[r];
                }(f, C, o)), x = function(t, e, n, o) {
                    var i, r, s, a, u, l = {}, h = t.dataTypes.slice();
                    if (h[1]) for (s in t.converters) l[s.toLowerCase()] = t.converters[s];
                    for (r = h.shift(); r; ) if (t.responseFields[r] && (n[t.responseFields[r]] = e), 
                    !u && o && t.dataFilter && (e = t.dataFilter(e, t.dataType)), u = r, r = h.shift()) if ("*" === r) r = u; else if ("*" !== u && u !== r) {
                        if (!(s = l[u + " " + r] || l["* " + r])) for (i in l) if ((a = i.split(" "))[1] === r && (s = l[u + " " + a[0]] || l["* " + a[0]])) {
                            !0 === s ? s = l[i] : !0 !== l[i] && (r = a[0], h.unshift(a[1]));
                            break;
                        }
                        if (!0 !== s) if (s && t.throws) e = s(e); else try {
                            e = s(e);
                        } catch (t) {
                            return {
                                state: "parsererror",
                                error: s ? t : "No conversion from " + u + " to " + r
                            };
                        }
                    }
                    return {
                        state: "success",
                        data: e
                    };
                }(f, x, C, l), l ? (f.ifModified && ((T = C.getResponseHeader("Last-Modified")) && (b.lastModified[r] = T), 
                (T = C.getResponseHeader("etag")) && (b.etag[r] = T)), 204 === e || "HEAD" === f.type ? _ = "nocontent" : 304 === e ? _ = "notmodified" : (_ = x.state, 
                d = x.data, l = !(p = x.error))) : (p = _, !e && _ || (_ = "error", e < 0 && (e = 0))), 
                C.status = e, C.statusText = (n || _) + "", l ? v.resolveWith(g, [ d, _, C ]) : v.rejectWith(g, [ C, _, p ]), 
                C.statusCode(w), w = void 0, c && m.trigger(l ? "ajaxSuccess" : "ajaxError", [ C, f, l ? d : p ]), 
                y.fireWith(g, [ C, _ ]), c && (m.trigger("ajaxComplete", [ C, f ]), --b.active || b.event.trigger("ajaxStop")));
            }
            return C;
        },
        getJSON: function(t, e, n) {
            return b.get(t, e, n, "json");
        },
        getScript: function(t, e) {
            return b.get(t, void 0, e, "script");
        }
    }), b.each([ "get", "post" ], function(t, e) {
        b[e] = function(t, n, o, i) {
            return g(n) && (i = i || o, o = n, n = void 0), b.ajax(b.extend({
                url: t,
                type: e,
                dataType: i,
                data: n,
                success: o
            }, b.isPlainObject(t) && t));
        };
    }), b._evalUrl = function(t) {
        return b.ajax({
            url: t,
            type: "GET",
            dataType: "script",
            cache: !0,
            async: !1,
            global: !1,
            throws: !0
        });
    }, b.fn.extend({
        wrapAll: function(t) {
            var e;
            return this[0] && (g(t) && (t = t.call(this[0])), e = b(t, this[0].ownerDocument).eq(0).clone(!0), 
            this[0].parentNode && e.insertBefore(this[0]), e.map(function() {
                for (var t = this; t.firstElementChild; ) t = t.firstElementChild;
                return t;
            }).append(this)), this;
        },
        wrapInner: function(t) {
            return g(t) ? this.each(function(e) {
                b(this).wrapInner(t.call(this, e));
            }) : this.each(function() {
                var e = b(this), n = e.contents();
                n.length ? n.wrapAll(t) : e.append(t);
            });
        },
        wrap: function(t) {
            var e = g(t);
            return this.each(function(n) {
                b(this).wrapAll(e ? t.call(this, n) : t);
            });
        },
        unwrap: function(t) {
            return this.parent(t).not("body").each(function() {
                b(this).replaceWith(this.childNodes);
            }), this;
        }
    }), b.expr.pseudos.hidden = function(t) {
        return !b.expr.pseudos.visible(t);
    }, b.expr.pseudos.visible = function(t) {
        return !!(t.offsetWidth || t.offsetHeight || t.getClientRects().length);
    }, b.ajaxSettings.xhr = function() {
        try {
            return new t.XMLHttpRequest();
        } catch (t) {}
    };
    var je = {
        0: 200,
        1223: 204
    }, qe = b.ajaxSettings.xhr();
    f.cors = !!qe && "withCredentials" in qe, f.ajax = qe = !!qe, b.ajaxTransport(function(e) {
        var n, o;
        if (f.cors || qe && !e.crossDomain) return {
            send: function(i, r) {
                var s, a = e.xhr();
                if (a.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (s in e.xhrFields) a[s] = e.xhrFields[s];
                for (s in e.mimeType && a.overrideMimeType && a.overrideMimeType(e.mimeType), e.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest"), 
                i) a.setRequestHeader(s, i[s]);
                n = function(t) {
                    return function() {
                        n && (n = o = a.onload = a.onerror = a.onabort = a.ontimeout = a.onreadystatechange = null, 
                        "abort" === t ? a.abort() : "error" === t ? "number" != typeof a.status ? r(0, "error") : r(a.status, a.statusText) : r(je[a.status] || a.status, a.statusText, "text" !== (a.responseType || "text") || "string" != typeof a.responseText ? {
                            binary: a.response
                        } : {
                            text: a.responseText
                        }, a.getAllResponseHeaders()));
                    };
                }, a.onload = n(), o = a.onerror = a.ontimeout = n("error"), void 0 !== a.onabort ? a.onabort = o : a.onreadystatechange = function() {
                    4 === a.readyState && t.setTimeout(function() {
                        n && o();
                    });
                }, n = n("abort");
                try {
                    a.send(e.hasContent && e.data || null);
                } catch (t) {
                    if (n) throw t;
                }
            },
            abort: function() {
                n && n();
            }
        };
    }), b.ajaxPrefilter(function(t) {
        t.crossDomain && (t.contents.script = !1);
    }), b.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /\b(?:java|ecma)script\b/
        },
        converters: {
            "text script": function(t) {
                return b.globalEval(t), t;
            }
        }
    }), b.ajaxPrefilter("script", function(t) {
        void 0 === t.cache && (t.cache = !1), t.crossDomain && (t.type = "GET");
    }), b.ajaxTransport("script", function(t) {
        var e, n;
        if (t.crossDomain) return {
            send: function(i, r) {
                e = b("<script>").prop({
                    charset: t.scriptCharset,
                    src: t.url
                }).on("load error", n = function(t) {
                    e.remove(), n = null, t && r("error" === t.type ? 404 : 200, t.type);
                }), o.head.appendChild(e[0]);
            },
            abort: function() {
                n && n();
            }
        };
    });
    var Ue = [], Me = /(=)\?(?=&|$)|\?\?/;
    b.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var t = Ue.pop() || b.expando + "_" + ye++;
            return this[t] = !0, t;
        }
    }), b.ajaxPrefilter("json jsonp", function(e, n, o) {
        var i, r, s, a = !1 !== e.jsonp && (Me.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Me.test(e.data) && "data");
        if (a || "jsonp" === e.dataTypes[0]) return i = e.jsonpCallback = g(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, 
        a ? e[a] = e[a].replace(Me, "$1" + i) : !1 !== e.jsonp && (e.url += (we.test(e.url) ? "&" : "?") + e.jsonp + "=" + i), 
        e.converters["script json"] = function() {
            return s || b.error(i + " was not called"), s[0];
        }, e.dataTypes[0] = "json", r = t[i], t[i] = function() {
            s = arguments;
        }, o.always(function() {
            void 0 === r ? b(t).removeProp(i) : t[i] = r, e[i] && (e.jsonpCallback = n.jsonpCallback, 
            Ue.push(i)), s && g(r) && r(s[0]), s = r = void 0;
        }), "script";
    }), f.createHTMLDocument = function() {
        var t = o.implementation.createHTMLDocument("").body;
        return t.innerHTML = "<form></form><form></form>", 2 === t.childNodes.length;
    }(), b.parseHTML = function(t, e, n) {
        return "string" != typeof t ? [] : ("boolean" == typeof e && (n = e, e = !1), e || (f.createHTMLDocument ? ((i = (e = o.implementation.createHTMLDocument("")).createElement("base")).href = o.location.href, 
        e.head.appendChild(i)) : e = o), r = k.exec(t), s = !n && [], r ? [ e.createElement(r[1]) ] : (r = mt([ t ], e, s), 
        s && s.length && b(s).remove(), b.merge([], r.childNodes)));
        var i, r, s;
    }, b.fn.load = function(t, e, n) {
        var o, i, r, s = this, a = t.indexOf(" ");
        return a > -1 && (o = ce(t.slice(a)), t = t.slice(0, a)), g(e) ? (n = e, e = void 0) : e && "object" == typeof e && (i = "POST"), 
        s.length > 0 && b.ajax({
            url: t,
            type: i || "GET",
            dataType: "html",
            data: e
        }).done(function(t) {
            r = arguments, s.html(o ? b("<div>").append(b.parseHTML(t)).find(o) : t);
        }).always(n && function(t, e) {
            s.each(function() {
                n.apply(this, r || [ t.responseText, e, t ]);
            });
        }), this;
    }, b.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(t, e) {
        b.fn[e] = function(t) {
            return this.on(e, t);
        };
    }), b.expr.pseudos.animated = function(t) {
        return b.grep(b.timers, function(e) {
            return t === e.elem;
        }).length;
    }, b.offset = {
        setOffset: function(t, e, n) {
            var o, i, r, s, a, u, l = b.css(t, "position"), h = b(t), c = {};
            "static" === l && (t.style.position = "relative"), a = h.offset(), r = b.css(t, "top"), 
            u = b.css(t, "left"), ("absolute" === l || "fixed" === l) && (r + u).indexOf("auto") > -1 ? (s = (o = h.position()).top, 
            i = o.left) : (s = parseFloat(r) || 0, i = parseFloat(u) || 0), g(e) && (e = e.call(t, n, b.extend({}, a))), 
            null != e.top && (c.top = e.top - a.top + s), null != e.left && (c.left = e.left - a.left + i), 
            "using" in e ? e.using.call(t, c) : h.css(c);
        }
    }, b.fn.extend({
        offset: function(t) {
            if (arguments.length) return void 0 === t ? this : this.each(function(e) {
                b.offset.setOffset(this, t, e);
            });
            var e, n, o = this[0];
            return o ? o.getClientRects().length ? (e = o.getBoundingClientRect(), n = o.ownerDocument.defaultView, 
            {
                top: e.top + n.pageYOffset,
                left: e.left + n.pageXOffset
            }) : {
                top: 0,
                left: 0
            } : void 0;
        },
        position: function() {
            if (this[0]) {
                var t, e, n, o = this[0], i = {
                    top: 0,
                    left: 0
                };
                if ("fixed" === b.css(o, "position")) e = o.getBoundingClientRect(); else {
                    for (e = this.offset(), n = o.ownerDocument, t = o.offsetParent || n.documentElement; t && (t === n.body || t === n.documentElement) && "static" === b.css(t, "position"); ) t = t.parentNode;
                    t && t !== o && 1 === t.nodeType && ((i = b(t).offset()).top += b.css(t, "borderTopWidth", !0), 
                    i.left += b.css(t, "borderLeftWidth", !0));
                }
                return {
                    top: e.top - i.top - b.css(o, "marginTop", !0),
                    left: e.left - i.left - b.css(o, "marginLeft", !0)
                };
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var t = this.offsetParent; t && "static" === b.css(t, "position"); ) t = t.offsetParent;
                return t || vt;
            });
        }
    }), b.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(t, e) {
        var n = "pageYOffset" === e;
        b.fn[t] = function(o) {
            return B(this, function(t, o, i) {
                var r;
                if (m(t) ? r = t : 9 === t.nodeType && (r = t.defaultView), void 0 === i) return r ? r[e] : t[o];
                r ? r.scrollTo(n ? r.pageXOffset : i, n ? i : r.pageYOffset) : t[o] = i;
            }, t, o, arguments.length);
        };
    }), b.each([ "top", "left" ], function(t, e) {
        b.cssHooks[e] = Ut(f.pixelPosition, function(t, n) {
            if (n) return n = qt(t, e), It.test(n) ? b(t).position()[e] + "px" : n;
        });
    }), b.each({
        Height: "height",
        Width: "width"
    }, function(t, e) {
        b.each({
            padding: "inner" + t,
            content: e,
            "": "outer" + t
        }, function(n, o) {
            b.fn[o] = function(i, r) {
                var s = arguments.length && (n || "boolean" != typeof i), a = n || (!0 === i || !0 === r ? "margin" : "border");
                return B(this, function(e, n, i) {
                    var r;
                    return m(e) ? 0 === o.indexOf("outer") ? e["inner" + t] : e.document.documentElement["client" + t] : 9 === e.nodeType ? (r = e.documentElement, 
                    Math.max(e.body["scroll" + t], r["scroll" + t], e.body["offset" + t], r["offset" + t], r["client" + t])) : void 0 === i ? b.css(e, n, a) : b.style(e, n, i, a);
                }, e, s ? i : void 0, s);
            };
        });
    }), b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function(t, e) {
        b.fn[e] = function(t, n) {
            return arguments.length > 0 ? this.on(e, null, t, n) : this.trigger(e);
        };
    }), b.fn.extend({
        hover: function(t, e) {
            return this.mouseenter(t).mouseleave(e || t);
        }
    }), b.fn.extend({
        bind: function(t, e, n) {
            return this.on(t, null, e, n);
        },
        unbind: function(t, e) {
            return this.off(t, null, e);
        },
        delegate: function(t, e, n, o) {
            return this.on(e, t, n, o);
        },
        undelegate: function(t, e, n) {
            return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", n);
        }
    }), b.proxy = function(t, e) {
        var n, o, i;
        if ("string" == typeof e && (n = t[e], e = t, t = n), g(t)) return o = r.call(arguments, 2), 
        (i = function() {
            return t.apply(e || this, o.concat(r.call(arguments)));
        }).guid = t.guid = t.guid || b.guid++, i;
    }, b.holdReady = function(t) {
        t ? b.readyWait++ : b.ready(!0);
    }, b.isArray = Array.isArray, b.parseJSON = JSON.parse, b.nodeName = E, b.isFunction = g, 
    b.isWindow = m, b.camelCase = z, b.type = w, b.now = Date.now, b.isNumeric = function(t) {
        var e = b.type(t);
        return ("number" === e || "string" === e) && !isNaN(t - parseFloat(t));
    }, "function" == typeof define && define.amd && define("jquery", [], function() {
        return b;
    });
    var Be = t.jQuery, $e = t.$;
    return b.noConflict = function(e) {
        return t.$ === b && (t.$ = $e), e && t.jQuery === b && (t.jQuery = Be), b;
    }, e || (t.jQuery = t.$ = b), b;
}), function() {
    var t, e, n, o, i, r, s, a, u, l, h, c, d, p, f, g, m, v, y, w, b, x, T, _, C, A, S, E, k, N, D, O = [].slice, F = {}.hasOwnProperty, P = function(t, e) {
        for (var n in e) F.call(e, n) && (t[n] = e[n]);
        function o() {
            this.constructor = t;
        }
        return o.prototype = e.prototype, t.prototype = new o(), t.__super__ = e.prototype, 
        t;
    }, R = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, H = [].indexOf || function(t) {
        for (var e = 0, n = this.length; e < n; e++) if (e in this && this[e] === t) return e;
        return -1;
    };
    if (v = function(e) {
        return this.map(function() {
            var n, o, i, r;
            for (i = "", n = this; (null != n ? n.nodeType : void 0) === Node.ELEMENT_NODE && n !== e; ) r = n.tagName.replace(":", "\\:"), 
            o = "[" + (o = t(n.parentNode).children(r).index(n) + 1) + "]", i = "/" + n.tagName.toLowerCase() + o + i, 
            n = n.parentNode;
            return i;
        }).get();
    }, y = function(t) {
        var e, n, o;
        return e = function(t) {
            return p(t) + "[" + f(t) + "]";
        }, o = t, n = function(t) {
            var n;
            for (n = ""; t !== o; ) {
                if (null == t) throw new Error("Called getPathTo on a node which was not a descendant of @rootNode. " + o);
                n = e(t) + "/" + n, t = t.parentNode;
            }
            return n = (n = "/" + n).replace(/\/$/, "");
        }, this.map(function() {
            return n(this);
        }).get();
    }, l = function(t, e, n) {
        var o, i, r, s, a;
        if (!t.hasChildNodes()) throw new Error("XPath error: node has no children!");
        for (r = 0, s = 0, a = (i = t.childNodes).length; s < a; s++) if (o = i[s], p(o) === e && (r += 1) === n) return o;
        throw new Error("XPath error: wanted child not found.");
    }, p = function(t) {
        var e;
        switch (e = t.nodeName.toLowerCase()) {
          case "#text":
            return "text()";

          case "#comment":
            return "comment()";

          case "#cdata-section":
            return "cdata-section()";

          default:
            return e;
        }
    }, f = function(t) {
        var e, n;
        for (e = 0, n = t; n; ) n.nodeName === t.nodeName && e++, n = n.previousSibling;
        return e;
    }, g = null, "undefined" != typeof Gettext && null !== Gettext ? (b = new Gettext({
        domain: "annotator"
    }), g = function(t) {
        return b.gettext(t);
    }) : g = function(t) {
        return t;
    }, E = function(t) {
        return g(t);
    }, ("undefined" != typeof jQuery && null !== jQuery && null != (A = jQuery.fn) ? A.jquery : void 0) || console.error(E("Annotator requires jQuery: have you included lib/vendor/jquery.js?")), 
    JSON && JSON.parse && JSON.stringify || console.error(E("Annotator requires a JSON implementation: have you included lib/vendor/json2.js?")), 
    t = jQuery, (r = {}).flatten = function(e) {
        var n;
        return (n = function(e) {
            var o, i, r, s;
            for (i = [], r = 0, s = e.length; r < s; r++) o = e[r], i = i.concat(o && t.isArray(o) ? n(o) : o);
            return i;
        })(e);
    }, r.contains = function(t, e) {
        var n;
        for (n = e; null != n; ) {
            if (n === t) return !0;
            n = n.parentNode;
        }
        return !1;
    }, r.getTextNodes = function(t) {
        var e;
        return e = function(t) {
            var n;
            if (t && t.nodeType !== Node.TEXT_NODE) {
                if (n = [], t.nodeType !== Node.COMMENT_NODE) for (t = t.lastChild; t; ) n.push(e(t)), 
                t = t.previousSibling;
                return n.reverse();
            }
            return t;
        }, t.map(function() {
            return r.flatten(e(this));
        });
    }, r.getLastTextNodeUpTo = function(t) {
        var e;
        switch (t.nodeType) {
          case Node.TEXT_NODE:
            return t;

          case Node.ELEMENT_NODE:
            if (null != t.lastChild && null != (e = r.getLastTextNodeUpTo(t.lastChild))) return e;
        }
        return null != (t = t.previousSibling) ? r.getLastTextNodeUpTo(t) : null;
    }, r.getFirstTextNodeNotBefore = function(t) {
        var e;
        switch (t.nodeType) {
          case Node.TEXT_NODE:
            return t;

          case Node.ELEMENT_NODE:
            if (null != t.firstChild && null != (e = r.getFirstTextNodeNotBefore(t.firstChild))) return e;
        }
        return null != (t = t.nextSibling) ? r.getFirstTextNodeNotBefore(t) : null;
    }, r.readRangeViaSelection = function(t) {
        var e;
        return (e = r.getGlobal().getSelection()).removeAllRanges(), e.addRange(t.toRange()), 
        e.toString();
    }, r.xpathFromNode = function(t, e) {
        var n;
        try {
            n = v.call(t, e);
        } catch (o) {
            o, console.log("jQuery-based XPath construction failed! Falling back to manual."), 
            n = y.call(t, e);
        }
        return n;
    }, r.nodeFromXPath = function(t, e) {
        var n, o, i, r, s, a, u;
        for (i = e, s = 0, a = (r = t.substring(1).split("/")).length; s < a; s++) o = (u = r[s].split("["))[0], 
        n = null != (n = u[1]) ? parseInt((null != n ? n.split("]") : void 0)[0]) : 1, i = l(i, o.toLowerCase(), n);
        return i;
    }, r.escape = function(t) {
        return t.replace(/&(?!\w+;)/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
    }, r.uuid = (k = 0, function() {
        return k++;
    }), r.getGlobal = function() {
        return function() {
            return this;
        }();
    }, r.maxZIndex = function(e) {
        var n, o;
        return n = function() {
            var n, i, r;
            for (r = [], n = 0, i = e.length; n < i; n++) o = e[n], "static" === t(o).css("position") ? r.push(-1) : r.push(parseFloat(t(o).css("z-index")) || -1);
            return r;
        }(), Math.max.apply(Math, n);
    }, r.mousePosition = function(e, n) {
        var o, i;
        return "absolute" !== (i = t(n).css("position")) && "fixed" !== i && "relative" !== i && (n = t(n).offsetParent()[0]), 
        o = t(n).offset(), {
            top: e.pageY - o.top,
            left: e.pageX - o.left
        };
    }, r.preventEventDefault = function(t) {
        return null != t && "function" == typeof t.preventDefault ? t.preventDefault() : void 0;
    }, c = [ "log", "debug", "info", "warn", "exception", "assert", "dir", "dirxml", "trace", "group", "groupEnd", "groupCollapsed", "time", "timeEnd", "profile", "profileEnd", "count", "clear", "table", "error", "notifyFirebug", "firebug", "userObjects" ], 
    "undefined" != typeof console && null !== console) for (null == console.group && (console.group = function(t) {
        return console.log("GROUP: ", t);
    }), null == console.groupCollapsed && (console.groupCollapsed = console.group), 
    x = 0, _ = c.length; x < _; x++) h = c[x], null == console[h] && (console[h] = function() {
        return console.log(E("Not implemented:") + " console." + name);
    }); else {
        for (this.console = {}, T = 0, C = c.length; T < C; T++) h = c[T], this.console[h] = function() {};
        this.console.error = function() {
            var t;
            return t = 1 <= arguments.length ? O.call(arguments, 0) : [], alert("ERROR: " + t.join(", "));
        }, this.console.warn = function() {
            var t;
            return t = 1 <= arguments.length ? O.call(arguments, 0) : [], alert("WARNING: " + t.join(", "));
        };
    }
    (n = function() {
        function e(e, n) {
            this.options = t.extend(!0, {}, this.options, n), this.element = t(e), this._closures = {}, 
            this.on = this.subscribe, this.addEvents();
        }
        return e.prototype.events = {}, e.prototype.options = {}, e.prototype.element = null, 
        e.prototype.destroy = function() {
            return this.removeEvents();
        }, e.prototype.addEvents = function() {
            var t, n, o, i, r;
            for (r = [], n = 0, o = (i = e._parseEvents(this.events)).length; n < o; n++) t = i[n], 
            r.push(this._addEvent(t.selector, t.event, t.functionName));
            return r;
        }, e.prototype.removeEvents = function() {
            var t, n, o, i, r;
            for (r = [], n = 0, o = (i = e._parseEvents(this.events)).length; n < o; n++) t = i[n], 
            r.push(this._removeEvent(t.selector, t.event, t.functionName));
            return r;
        }, e.prototype._addEvent = function(t, n, o) {
            var i, r = this;
            return i = function() {
                return r[o].apply(r, arguments);
            }, "" === t && e._isCustomEvent(n) ? this.subscribe(n, i) : this.element.delegate(t, n, i), 
            this._closures[t + "/" + n + "/" + o] = i, this;
        }, e.prototype._removeEvent = function(t, n, o) {
            var i;
            return i = this._closures[t + "/" + n + "/" + o], "" === t && e._isCustomEvent(n) ? this.unsubscribe(n, i) : this.element.undelegate(t, n, i), 
            delete this._closures[t + "/" + n + "/" + o], this;
        }, e.prototype.publish = function() {
            return this.element.triggerHandler.apply(this.element, arguments), this;
        }, e.prototype.subscribe = function(e, n) {
            var o;
            return (o = function() {
                return n.apply(this, [].slice.call(arguments, 1));
            }).guid = n.guid = t.guid += 1, this.element.bind(e, o), this;
        }, e.prototype.unsubscribe = function() {
            return this.element.unbind.apply(this.element, arguments), this;
        }, e;
    }())._parseEvents = function(t) {
        var e, n, o, i, r, s, a;
        for (i in n = [], t) o = t[i], r = 2 <= (a = i.split(" ")).length ? O.call(a, 0, s = a.length - 1) : (s = 0, 
        []), e = a[s++], n.push({
            selector: r.join(" "),
            event: e,
            functionName: o
        });
        return n;
    }, n.natives = (D = function() {
        var t, e;
        for (N in e = [], t = jQuery.event.special) F.call(t, N) && (t[N], e.push(N));
        return e;
    }(), "blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(D)), 
    n._isCustomEvent = function(e) {
        return e = e.split(".")[0], -1 === t.inArray(e, n.natives);
    }, (i = {}).sniff = function(t) {
        return null != t.commonAncestorContainer ? new i.BrowserRange(t) : "string" == typeof t.start ? new i.SerializedRange(t) : t.start && "object" == typeof t.start ? new i.NormalizedRange(t) : (console.error(E("Could not sniff range type")), 
        !1);
    }, i.nodeFromXPath = function(e, n) {
        var o, i, s, a, u;
        return null == n && (n = document), i = function(t, e) {
            null == e && (e = null);
            try {
                return document.evaluate("." + t, n, e, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
            } catch (e) {
                return e, console.log("XPath evaluation failed."), console.log("Trying fallback..."), 
                r.nodeFromXPath(t, n);
            }
        }, t.isXMLDoc(document.documentElement) ? (o = document.createNSResolver(null === document.ownerDocument ? document.documentElement : document.ownerDocument.documentElement), 
        (a = i(e, o)) || (e = function() {
            var t, n, o, i;
            for (i = [], t = 0, n = (o = e.split("/")).length; t < n; t++) (u = o[t]) && -1 === u.indexOf(":") ? i.push(u.replace(/^([a-z]+)/, "xhtml:$1")) : i.push(u);
            return i;
        }().join("/"), s = document.lookupNamespaceURI(null), a = i(e, o = function(t) {
            return "xhtml" === t ? s : document.documentElement.getAttribute("xmlns:" + t);
        })), a) : i(e);
    }, i.RangeError = function(t) {
        function e(t, n, o) {
            this.type = t, this.message = n, this.parent = null != o ? o : null, e.__super__.constructor.call(this, this.message);
        }
        return P(e, t), e;
    }(Error), i.BrowserRange = function() {
        function t(t) {
            this.commonAncestorContainer = t.commonAncestorContainer, this.startContainer = t.startContainer, 
            this.startOffset = t.startOffset, this.endContainer = t.endContainer, this.endOffset = t.endOffset;
        }
        return t.prototype.normalize = function(t) {
            var e, n, o, s;
            if (this.tainted) return console.error(E("You may only call normalize() once on a BrowserRange!")), 
            !1;
            if (this.tainted = !0, s = {}, this.startContainer.nodeType === Node.ELEMENT_NODE ? (s.start = r.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]), 
            s.startOffset = 0) : (s.start = this.startContainer, s.startOffset = this.startOffset), 
            this.endContainer.nodeType === Node.ELEMENT_NODE) {
                if (null != (n = this.endContainer.childNodes[this.endOffset])) {
                    for (e = n; null != e && e.nodeType !== Node.TEXT_NODE; ) e = e.firstChild;
                    null != e && (s.end = e, s.endOffset = 0);
                }
                null == s.end && (n = this.endContainer.childNodes[this.endOffset - 1], s.end = r.getLastTextNodeUpTo(n), 
                s.endOffset = s.end.nodeValue.length);
            } else s.end = this.endContainer, s.endOffset = this.endOffset;
            for (o = {}, s.startOffset > 0 ? s.start.nodeValue.length > s.startOffset ? o.start = s.start.splitText(s.startOffset) : o.start = s.start.nextSibling : o.start = s.start, 
            s.start === s.end ? (o.start.nodeValue.length > s.endOffset - s.startOffset && o.start.splitText(s.endOffset - s.startOffset), 
            o.end = o.start) : (s.end.nodeValue.length > s.endOffset && s.end.splitText(s.endOffset), 
            o.end = s.end), o.commonAncestor = this.commonAncestorContainer; o.commonAncestor.nodeType !== Node.ELEMENT_NODE; ) o.commonAncestor = o.commonAncestor.parentNode;
            return new i.NormalizedRange(o);
        }, t.prototype.serialize = function(t, e) {
            return this.normalize(t).serialize(t, e);
        }, t;
    }(), i.NormalizedRange = function() {
        function e(t) {
            this.commonAncestor = t.commonAncestor, this.start = t.start, this.end = t.end;
        }
        return e.prototype.normalize = function(t) {
            return this;
        }, e.prototype.limit = function(e) {
            var n, o, i, r, s, a;
            if (!(n = t.grep(this.textNodes(), function(n) {
                return n.parentNode === e || t.contains(e, n.parentNode);
            })).length) return null;
            for (this.start = n[0], this.end = n[n.length - 1], i = t(this.start).parents(), 
            r = 0, s = (a = t(this.end).parents()).length; r < s; r++) if (o = a[r], -1 !== i.index(o)) {
                this.commonAncestor = o;
                break;
            }
            return this;
        }, e.prototype.serialize = function(e, n) {
            var o, s, a;
            return a = (s = function(o, i) {
                var s, a, u, l, h, c, d;
                for (u = n ? t(o).parents(":not(" + n + ")").eq(0) : t(o).parent(), h = r.xpathFromNode(u, e)[0], 
                a = 0, c = 0, d = (s = (l = r.getTextNodes(u)).slice(0, l.index(o))).length; c < d; c++) a += s[c].nodeValue.length;
                return i ? [ h, a + o.nodeValue.length ] : [ h, a ];
            })(this.start), o = s(this.end, !0), new i.SerializedRange({
                start: a[0],
                end: o[0],
                startOffset: a[1],
                endOffset: o[1]
            });
        }, e.prototype.text = function() {
            var t;
            return function() {
                var e, n, o, i;
                for (i = [], e = 0, n = (o = this.textNodes()).length; e < n; e++) t = o[e], i.push(t.nodeValue);
                return i;
            }.call(this).join("");
        }, e.prototype.textNodes = function() {
            var e, n, o, i;
            return n = (i = [ (o = r.getTextNodes(t(this.commonAncestor))).index(this.start), o.index(this.end) ])[0], 
            e = i[1], t.makeArray(o.slice(n, +e + 1 || 9e9));
        }, e.prototype.toRange = function() {
            var t;
            return (t = document.createRange()).setStartBefore(this.start), t.setEndAfter(this.end), 
            t;
        }, e;
    }(), i.SerializedRange = function() {
        function e(t) {
            this.start = t.start, this.startOffset = t.startOffset, this.end = t.end, this.endOffset = t.endOffset;
        }
        return e.prototype.normalize = function(e) {
            var n, o, s, a, u, l, h, c, d, p, f, g, m, v;
            for (l = {}, d = 0, f = (m = [ "start", "end" ]).length; d < f; d++) {
                u = m[d];
                try {
                    a = i.nodeFromXPath(this[u], e);
                } catch (t) {
                    throw o = t, new i.RangeError(u, "Error while finding " + u + " node: " + this[u] + ": " + o, o);
                }
                if (!a) throw new i.RangeError(u, "Couldn't find " + u + " node: " + this[u]);
                for (s = 0, h = this[u + "Offset"], "end" === u && h--, p = 0, g = (v = r.getTextNodes(t(a))).length; p < g; p++) {
                    if (s + (c = v[p]).nodeValue.length > h) {
                        l[u + "Container"] = c, l[u + "Offset"] = this[u + "Offset"] - s;
                        break;
                    }
                    s += c.nodeValue.length;
                }
                if (null == l[u + "Offset"]) throw new i.RangeError(u + "offset", "Couldn't find offset " + this[u + "Offset"] + " in element " + this[u]);
            }
            return n = null == document.compareDocumentPosition ? function(t, e) {
                return t.contains(e);
            } : function(t, e) {
                return 16 & t.compareDocumentPosition(e);
            }, t(l.startContainer).parents().each(function() {
                if (n(this, l.endContainer)) return l.commonAncestorContainer = this, !1;
            }), new i.BrowserRange(l).normalize(e);
        }, e.prototype.serialize = function(t, e) {
            return this.normalize(t).serialize(t, e);
        }, e.prototype.toObject = function() {
            return {
                start: this.start,
                startOffset: this.startOffset,
                end: this.end,
                endOffset: this.endOffset
            };
        }, e;
    }(), w = this.Annotator, (e = function(e) {
        function o(e, n) {
            if (this.onDeleteAnnotation = R(this.onDeleteAnnotation, this), this.onEditAnnotation = R(this.onEditAnnotation, this), 
            this.onAdderClick = R(this.onAdderClick, this), this.onAdderMousedown = R(this.onAdderMousedown, this), 
            this.onHighlightMouseover = R(this.onHighlightMouseover, this), this.checkForEndSelection = R(this.checkForEndSelection, this), 
            this.checkForStartSelection = R(this.checkForStartSelection, this), this.clearViewerHideTimer = R(this.clearViewerHideTimer, this), 
            this.startViewerHideTimer = R(this.startViewerHideTimer, this), this.showViewer = R(this.showViewer, this), 
            this.onEditorSubmit = R(this.onEditorSubmit, this), this.onEditorHide = R(this.onEditorHide, this), 
            this.showEditor = R(this.showEditor, this), o.__super__.constructor.apply(this, arguments), 
            this.plugins = {}, !o.supported()) return this;
            this.options.readOnly || this._setupDocumentEvents(), this._setupWrapper()._setupViewer()._setupEditor(), 
            this._setupDynamicStyle(), this.adder = t(this.html.adder).appendTo(this.wrapper).hide(), 
            o._instances.push(this);
        }
        return P(o, n), o.prototype.events = {
            ".annotator-adder button click": "onAdderClick",
            ".annotator-adder button mousedown": "onAdderMousedown",
            ".annotator-hl mouseover": "onHighlightMouseover",
            ".annotator-hl mouseout": "startViewerHideTimer"
        }, o.prototype.html = {
            adder: '<div class="annotator-adder"><button>' + E("Annotate") + "</button></div>",
            wrapper: '<div class="annotator-wrapper"></div>'
        }, o.prototype.options = {
            readOnly: !1
        }, o.prototype.plugins = {}, o.prototype.editor = null, o.prototype.viewer = null, 
        o.prototype.selectedRanges = null, o.prototype.mouseIsDown = !1, o.prototype.ignoreMouseup = !1, 
        o.prototype.viewerHideTimer = null, o.prototype._setupWrapper = function() {
            return this.wrapper = t(this.html.wrapper), this.element.find("script").remove(), 
            this.element.wrapInner(this.wrapper), this.wrapper = this.element.find(".annotator-wrapper"), 
            this;
        }, o.prototype._setupViewer = function() {
            var e = this;
            return this.viewer = new o.Viewer({
                readOnly: this.options.readOnly
            }), this.viewer.hide().on("edit", this.onEditAnnotation).on("delete", this.onDeleteAnnotation).addField({
                load: function(n, o) {
                    return o.text ? t(n).html(r.escape(o.text)) : t(n).html("<i>" + E("No Comment") + "</i>"), 
                    e.publish("annotationViewerTextField", [ n, o ]);
                }
            }).element.appendTo(this.wrapper).bind({
                mouseover: this.clearViewerHideTimer,
                mouseout: this.startViewerHideTimer
            }), this;
        }, o.prototype._setupEditor = function() {
            return this.editor = new o.Editor(), this.editor.hide().on("hide", this.onEditorHide).on("save", this.onEditorSubmit).addField({
                type: "textarea",
                label: E("Comments") + "\u2026",
                load: function(e, n) {
                    return t(e).find("textarea").val(n.text || "");
                },
                submit: function(e, n) {
                    return n.text = t(e).find("textarea").val();
                }
            }), this.editor.element.appendTo(this.wrapper), this;
        }, o.prototype._setupDocumentEvents = function() {
            return t(document).bind({
                mouseup: this.checkForEndSelection,
                mousedown: this.checkForStartSelection
            }), this;
        }, o.prototype._setupDynamicStyle = function() {
            var e, n, o, i;
            return (o = t("#annotator-dynamic-style")).length || (o = t('<style id="annotator-dynamic-style"></style>').appendTo(document.head)), 
            n = "*" + function() {
                var t, e, n, o;
                for (o = [], t = 0, e = (n = [ "adder", "outer", "notice", "filter" ]).length; t < e; t++) i = n[t], 
                o.push(":not(.annotator-" + i + ")");
                return o;
            }().join(""), e = r.maxZIndex(t(document.body).find(n)), e = Math.max(e, 1e3), o.text([ ".annotator-adder, .annotator-outer, .annotator-notice {", "  z-index: " + (e + 20) + ";", "}", ".annotator-filter {", "  z-index: " + (e + 10) + ";", "}" ].join("\n")), 
            this;
        }, o.prototype.destroy = function() {
            var e, n, i, r;
            for (n in o.__super__.destroy.apply(this, arguments), t(document).unbind({
                mouseup: this.checkForEndSelection,
                mousedown: this.checkForStartSelection
            }), t("#annotator-dynamic-style").remove(), this.adder.remove(), this.viewer.destroy(), 
            this.editor.destroy(), this.wrapper.find(".annotator-hl").each(function() {
                return t(this).contents().insertBefore(this), t(this).remove();
            }), this.wrapper.contents().insertBefore(this.wrapper), this.wrapper.remove(), this.element.data("annotator", null), 
            r = this.plugins) r[n], "function" == typeof (i = this.plugins[n]).destroy && i.destroy();
            if (-1 !== (e = o._instances.indexOf(this))) return o._instances.splice(e, 1);
        }, o.prototype.getSelectedRanges = function() {
            var e, n, o, s, a, u, l, h, c;
            for (l = r.getGlobal().getSelection(), a = [], u = [], l.isCollapsed || (a = function() {
                var t, r, a;
                for (a = [], n = t = 0, r = l.rangeCount; 0 <= r ? t < r : t > r; n = 0 <= r ? ++t : --t) s = l.getRangeAt(n), 
                e = new i.BrowserRange(s), null === (o = e.normalize().limit(this.wrapper[0])) && u.push(s), 
                a.push(o);
                return a;
            }.call(this), l.removeAllRanges()), h = 0, c = u.length; h < c; h++) s = u[h], l.addRange(s);
            return t.grep(a, function(t) {
                return t && l.addRange(t.toRange()), t;
            });
        }, o.prototype.createAnnotation = function() {
            var t;
            return t = {}, this.publish("beforeAnnotationCreated", [ t ]), t;
        }, o.prototype.setupAnnotation = function(e) {
            var n, o, r, s, a, u, l, h, c, d;
            for (a = this.wrapper[0], e.ranges || (e.ranges = this.selectedRanges), r = [], 
            u = 0, h = (d = e.ranges).length; u < h; u++) {
                s = d[u];
                try {
                    r.push(i.sniff(s).normalize(a));
                } catch (t) {
                    if (!((n = t) instanceof i.RangeError)) throw n;
                    this.publish("rangeNormalizeFail", [ e, s, n ]);
                }
            }
            for (e.quote = [], e.ranges = [], e.highlights = [], l = 0, c = r.length; l < c; l++) o = r[l], 
            e.quote.push(t.trim(o.text())), e.ranges.push(o.serialize(this.wrapper[0], ".annotator-hl")), 
            t.merge(e.highlights, this.highlightRange(o));
            return e.quote = e.quote.join(" / "), t(e.highlights).data("annotation", e), t(e.highlights).attr("data-annotation-id", e.id), 
            e;
        }, o.prototype.updateAnnotation = function(e) {
            return this.publish("beforeAnnotationUpdated", [ e ]), t(e.highlights).attr("data-annotation-id", e.id), 
            this.publish("annotationUpdated", [ e ]), e;
        }, o.prototype.deleteAnnotation = function(e) {
            var n, o, i, r;
            if (null != e.highlights) for (o = 0, i = (r = e.highlights).length; o < i; o++) null != (n = r[o]).parentNode && (n.childNodes[0], 
            t(n).replaceWith(n.childNodes));
            return this.publish("annotationDeleted", [ e ]), e;
        }, o.prototype.loadAnnotations = function(t) {
            var e, n, o = this;
            return null == t && (t = []), n = function(t) {
                var i, r, s, a;
                for (null == t && (t = []), s = 0, a = (r = t.splice(0, 10)).length; s < a; s++) i = r[s], 
                o.setupAnnotation(i);
                return t.length > 0 ? setTimeout(function() {
                    return n(t);
                }, 10) : o.publish("annotationsLoaded", [ e ]);
            }, e = t.slice(), n(t), this;
        }, o.prototype.dumpAnnotations = function() {
            return this.plugins.Store ? this.plugins.Store.dumpAnnotations() : (console.warn(E("Can't dump annotations without Store plugin.")), 
            !1);
        }, o.prototype.highlightRange = function(e, n) {
            var o, i, r, s, a, u, l;
            for (null == n && (n = "annotator-hl"), r = /^\s*$/, o = t("<span class='" + n + "'></span>"), 
            l = [], s = 0, a = (u = e.textNodes()).length; s < a; s++) i = u[s], r.test(i.nodeValue) || l.push(t(i).wrapAll(o).parent().show()[0]);
            return l;
        }, o.prototype.highlightRanges = function(e, n) {
            var o, i, r, s;
            for (null == n && (n = "annotator-hl"), o = [], r = 0, s = e.length; r < s; r++) i = e[r], 
            t.merge(o, this.highlightRange(i, n));
            return o;
        }, o.prototype.addPlugin = function(t, e) {
            var n, i;
            return this.plugins[t] ? console.error(E("You cannot have more than one instance of any plugin.")) : "function" == typeof (n = o.Plugin[t]) ? (this.plugins[t] = new n(this.element[0], e), 
            this.plugins[t].annotator = this, "function" == typeof (i = this.plugins[t]).pluginInit && i.pluginInit()) : console.error(E("Could not load ") + t + E(" plugin. Have you included the appropriate <script> tag?")), 
            this;
        }, o.prototype.showEditor = function(t, e) {
            return this.editor.element.css(e), this.editor.load(t), this.publish("annotationEditorShown", [ this.editor, t ]), 
            this;
        }, o.prototype.onEditorHide = function() {
            return this.publish("annotationEditorHidden", [ this.editor ]), this.ignoreMouseup = !1;
        }, o.prototype.onEditorSubmit = function(t) {
            return this.publish("annotationEditorSubmit", [ this.editor, t ]);
        }, o.prototype.showViewer = function(t, e) {
            return this.viewer.element.css(e), this.viewer.load(t), this.publish("annotationViewerShown", [ this.viewer, t ]);
        }, o.prototype.startViewerHideTimer = function() {
            if (!this.viewerHideTimer) return this.viewerHideTimer = setTimeout(this.viewer.hide, 250);
        }, o.prototype.clearViewerHideTimer = function() {
            return clearTimeout(this.viewerHideTimer), this.viewerHideTimer = !1;
        }, o.prototype.checkForStartSelection = function(t) {
            return t && this.isAnnotator(t.target) || this.startViewerHideTimer(), this.mouseIsDown = !0;
        }, o.prototype.checkForEndSelection = function(t) {
            var e, n, o, i;
            if (this.mouseIsDown = !1, !this.ignoreMouseup) {
                for (this.selectedRanges = this.getSelectedRanges(), n = 0, o = (i = this.selectedRanges).length; n < o; n++) if (e = i[n].commonAncestor, 
                this.isAnnotator(e)) return;
                return t && this.selectedRanges.length ? this.adder.css(r.mousePosition(t, this.wrapper[0])).show() : this.adder.hide();
            }
        }, o.prototype.isAnnotator = function(e) {
            return !!t(e).parents().addBack().filter("[class^=annotator-]").not("[class=annotator-hl]").not(this.wrapper).length;
        }, o.prototype.onHighlightMouseover = function(e) {
            var n;
            return this.clearViewerHideTimer(), !this.mouseIsDown && (this.viewer.isShown() && this.viewer.hide(), 
            n = t(e.target).parents(".annotator-hl").addBack().map(function() {
                return t(this).data("annotation");
            }).toArray(), this.showViewer(n, r.mousePosition(e, this.wrapper[0])));
        }, o.prototype.onAdderMousedown = function(t) {
            return null != t && t.preventDefault(), this.ignoreMouseup = !0;
        }, o.prototype.onAdderClick = function(e) {
            var n, o, i, r, s, a = this;
            return null != e && e.preventDefault(), r = this.adder.position(), this.adder.hide(), 
            n = this.setupAnnotation(this.createAnnotation()), t(n.highlights).addClass("annotator-hl-temporary"), 
            s = function() {
                return i(), t(n.highlights).removeClass("annotator-hl-temporary"), a.publish("annotationCreated", [ n ]);
            }, o = function() {
                return i(), a.deleteAnnotation(n);
            }, i = function() {
                return a.unsubscribe("annotationEditorHidden", o), a.unsubscribe("annotationEditorSubmit", s);
            }, this.subscribe("annotationEditorHidden", o), this.subscribe("annotationEditorSubmit", s), 
            this.showEditor(n, r);
        }, o.prototype.onEditAnnotation = function(t) {
            var e, n, o, i = this;
            return n = this.viewer.element.position(), o = function() {
                return e(), i.updateAnnotation(t);
            }, e = function() {
                return i.unsubscribe("annotationEditorHidden", e), i.unsubscribe("annotationEditorSubmit", o);
            }, this.subscribe("annotationEditorHidden", e), this.subscribe("annotationEditorSubmit", o), 
            this.viewer.hide(), this.showEditor(t, n);
        }, o.prototype.onDeleteAnnotation = function(t) {
            return this.viewer.hide(), this.deleteAnnotation(t);
        }, o;
    }()).Plugin = function(t) {
        function e(t, n) {
            e.__super__.constructor.apply(this, arguments);
        }
        return P(e, n), e.prototype.pluginInit = function() {}, e;
    }(), null == (null != (S = (d = r.getGlobal()).document) ? S.evaluate : void 0) && t.getScript("http://assets.annotateit.org/vendor/xpath.min.js"), 
    null == d.getSelection && t.getScript("http://assets.annotateit.org/vendor/ierange.min.js"), 
    null == d.JSON && t.getScript("http://assets.annotateit.org/vendor/json2.min.js"), 
    null == d.Node && (d.Node = {
        ELEMENT_NODE: 1,
        ATTRIBUTE_NODE: 2,
        TEXT_NODE: 3,
        CDATA_SECTION_NODE: 4,
        ENTITY_REFERENCE_NODE: 5,
        ENTITY_NODE: 6,
        PROCESSING_INSTRUCTION_NODE: 7,
        COMMENT_NODE: 8,
        DOCUMENT_NODE: 9,
        DOCUMENT_TYPE_NODE: 10,
        DOCUMENT_FRAGMENT_NODE: 11,
        NOTATION_NODE: 12
    }), e.$ = t, e.Delegator = n, e.Range = i, e.Util = r, e._instances = [], e._t = E, 
    e.supported = function() {
        return function() {
            return !!this.getSelection;
        }();
    }, e.noConflict = function() {
        return r.getGlobal().Annotator = w, this;
    }, t.fn.annotator = function(n) {
        var o;
        return o = Array.prototype.slice.call(arguments, 1), this.each(function() {
            var i;
            return i = t.data(this, "annotator"), "destroy" === n ? (t.removeData(this, "annotator"), 
            null != i ? i.destroy(o) : void 0) : i ? n && i[n].apply(i, o) : (i = new e(this, n), 
            t.data(this, "annotator", i));
        });
    }, this.Annotator = e, e.Widget = function(o) {
        function i(n, o) {
            i.__super__.constructor.apply(this, arguments), this.classes = t.extend({}, e.Widget.prototype.classes, this.classes);
        }
        return P(i, n), i.prototype.classes = {
            hide: "annotator-hide",
            invert: {
                x: "annotator-invert-x",
                y: "annotator-invert-y"
            }
        }, i.prototype.destroy = function() {
            return this.removeEvents(), this.element.remove();
        }, i.prototype.checkOrientation = function() {
            var n, o, i, r, s;
            return this.resetOrientation(), s = t(e.Util.getGlobal()), o = (r = this.element.children(":first")).offset(), 
            i = {
                top: s.scrollTop(),
                right: s.width() + s.scrollLeft()
            }, (n = {
                top: o.top,
                right: o.left + r.width()
            }).top - i.top < 0 && this.invertY(), n.right - i.right > 0 && this.invertX(), this;
        }, i.prototype.resetOrientation = function() {
            return this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y), 
            this;
        }, i.prototype.invertX = function() {
            return this.element.addClass(this.classes.invert.x), this;
        }, i.prototype.invertY = function() {
            return this.element.addClass(this.classes.invert.y), this;
        }, i.prototype.isInvertedY = function() {
            return this.element.hasClass(this.classes.invert.y);
        }, i.prototype.isInvertedX = function() {
            return this.element.hasClass(this.classes.invert.x);
        }, i;
    }(), e.Editor = function(n) {
        function o(e) {
            this.onCancelButtonMouseover = R(this.onCancelButtonMouseover, this), this.processKeypress = R(this.processKeypress, this), 
            this.submit = R(this.submit, this), this.load = R(this.load, this), this.hide = R(this.hide, this), 
            this.show = R(this.show, this), o.__super__.constructor.call(this, t(this.html)[0], e), 
            this.fields = [], this.annotation = {};
        }
        return P(o, n), o.prototype.events = {
            "form submit": "submit",
            ".annotator-save click": "submit",
            ".annotator-cancel click": "hide",
            ".annotator-cancel mouseover": "onCancelButtonMouseover",
            "textarea keydown": "processKeypress"
        }, o.prototype.classes = {
            hide: "annotator-hide",
            focus: "annotator-focus"
        }, o.prototype.html = '<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">' + E("Cancel") + '</a>\n<a href="#save" class="annotator-save annotator-focus">' + E("Save") + "</a>\n    </div>\n  </form>\n</div>", 
        o.prototype.options = {}, o.prototype.show = function(t) {
            return e.Util.preventEventDefault(t), this.element.removeClass(this.classes.hide), 
            this.element.find(".annotator-save").addClass(this.classes.focus), this.checkOrientation(), 
            this.element.find(":input:first").focus(), this.setupDraggables(), this.publish("show");
        }, o.prototype.hide = function(t) {
            return e.Util.preventEventDefault(t), this.element.addClass(this.classes.hide), 
            this.publish("hide");
        }, o.prototype.load = function(t) {
            var e, n, o, i;
            for (this.annotation = t, this.publish("load", [ this.annotation ]), n = 0, o = (i = this.fields).length; n < o; n++) (e = i[n]).load(e.element, this.annotation);
            return this.show();
        }, o.prototype.submit = function(t) {
            var n, o, i, r;
            for (e.Util.preventEventDefault(t), o = 0, i = (r = this.fields).length; o < i; o++) (n = r[o]).submit(n.element, this.annotation);
            return this.publish("save", [ this.annotation ]), this.hide();
        }, o.prototype.addField = function(n) {
            var o, i, r;
            switch (i = t.extend({
                id: "annotator-field-" + e.Util.uuid(),
                type: "input",
                label: "",
                load: function() {},
                submit: function() {}
            }, n), r = null, o = t('<li class="annotator-item" />'), i.element = o[0], i.type) {
              case "textarea":
                r = t("<textarea />");
                break;

              case "input":
              case "checkbox":
                r = t("<input />");
                break;

              case "select":
                r = t("<select />");
            }
            return o.append(r), r.attr({
                id: i.id,
                placeholder: i.label
            }), "checkbox" === i.type && (r[0].type = "checkbox", o.addClass("annotator-checkbox"), 
            o.append(t("<label />", {
                for: i.id,
                html: i.label
            }))), this.element.find("ul:first").append(o), this.fields.push(i), i.element;
        }, o.prototype.checkOrientation = function() {
            var t, e;
            return o.__super__.checkOrientation.apply(this, arguments), e = this.element.find("ul"), 
            t = this.element.find(".annotator-controls"), this.element.hasClass(this.classes.invert.y) ? t.insertBefore(e) : t.is(":first-child") && t.insertAfter(e), 
            this;
        }, o.prototype.processKeypress = function(t) {
            return 27 === t.keyCode ? this.hide() : 13 !== t.keyCode || t.shiftKey ? void 0 : this.submit();
        }, o.prototype.onCancelButtonMouseover = function() {
            return this.element.find("." + this.classes.focus).removeClass(this.classes.focus);
        }, o.prototype.setupDraggables = function() {
            var e, n, o, i, r, s, a, u, l, h, c;
            return this.element.find(".annotator-resize").remove(), (o = this.element.hasClass(this.classes.invert.y) ? this.element.find(".annotator-item:last") : this.element.find(".annotator-item:first")) && t('<span class="annotator-resize"></span>').appendTo(o), 
            r = null, e = this.classes, i = this.element, h = null, l = i.find(".annotator-resize"), 
            n = i.find(".annotator-controls"), c = !1, s = function(e) {
                if (e.target === this) return r = {
                    element: this,
                    top: e.pageY,
                    left: e.pageX
                }, h = i.find("textarea:first"), t(window).bind({
                    "mouseup.annotator-editor-resize": u,
                    "mousemove.annotator-editor-resize": a
                }), e.preventDefault();
            }, u = function() {
                return r = null, t(window).unbind(".annotator-editor-resize");
            }, a = function(t) {
                var o, s, a, u, d;
                if (r && !1 === c) return o = {
                    top: t.pageY - r.top,
                    left: t.pageX - r.left
                }, r.element === l[0] ? (u = h.outerHeight(), d = h.outerWidth(), s = i.hasClass(e.invert.x) ? -1 : 1, 
                a = i.hasClass(e.invert.y) ? 1 : -1, h.height(u + o.top * a), h.width(d + o.left * s), 
                h.outerHeight() !== u && (r.top = t.pageY), h.outerWidth() !== d && (r.left = t.pageX)) : r.element === n[0] && (i.css({
                    top: parseInt(i.css("top"), 10) + o.top,
                    left: parseInt(i.css("left"), 10) + o.left
                }), r.top = t.pageY, r.left = t.pageX), c = !0, setTimeout(function() {
                    return c = !1;
                }, 1e3 / 60);
            }, l.bind("mousedown", s), n.bind("mousedown", s);
        }, o;
    }(e.Widget), e.Viewer = function(n) {
        function i(e) {
            this.onDeleteClick = R(this.onDeleteClick, this), this.onEditClick = R(this.onEditClick, this), 
            this.load = R(this.load, this), this.hide = R(this.hide, this), this.show = R(this.show, this), 
            i.__super__.constructor.call(this, t(this.html.element)[0], e), this.item = t(this.html.item)[0], 
            this.fields = [], this.annotations = [];
        }
        return P(i, n), i.prototype.events = {
            ".annotator-edit click": "onEditClick",
            ".annotator-delete click": "onDeleteClick"
        }, i.prototype.classes = {
            hide: "annotator-hide",
            showControls: "annotator-visible"
        }, i.prototype.html = {
            element: '<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',
            item: '<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'
        }, i.prototype.options = {
            readOnly: !1
        }, i.prototype.show = function(t) {
            var n, o = this;
            return e.Util.preventEventDefault(t), n = this.element.find(".annotator-controls").addClass(this.classes.showControls), 
            setTimeout(function() {
                return n.removeClass(o.classes.showControls);
            }, 500), this.element.removeClass(this.classes.hide), this.checkOrientation().publish("show");
        }, i.prototype.isShown = function() {
            return !this.element.hasClass(this.classes.hide);
        }, i.prototype.hide = function(t) {
            return e.Util.preventEventDefault(t), this.element.addClass(this.classes.hide), 
            this.publish("hide");
        }, i.prototype.load = function(e) {
            var n, i, r, s, a, u, l, h, c, d, p, f, g, m, v, y, w;
            for (this.annotations = e || [], p = this.element.find("ul:first").empty(), f = 0, 
            m = (y = this.annotations).length; f < m; f++) for (n = y[f], c = (r = (h = t(this.item).clone().appendTo(p).data("annotation", n)).find(".annotator-controls")).find(".annotator-link"), 
            a = r.find(".annotator-edit"), s = r.find(".annotator-delete"), 0 === (d = new o(n.links || []).get("alternate", {
                type: "text/html"
            })).length || null == d[0].href ? c.remove() : c.attr("href", d[0].href), this.options.readOnly ? (a.remove(), 
            s.remove()) : i = {
                showEdit: function() {
                    return a.removeAttr("disabled");
                },
                hideEdit: function() {
                    return a.attr("disabled", "disabled");
                },
                showDelete: function() {
                    return s.removeAttr("disabled");
                },
                hideDelete: function() {
                    return s.attr("disabled", "disabled");
                }
            }, g = 0, v = (w = this.fields).length; g < v; g++) l = w[g], u = t(l.element).clone().appendTo(h)[0], 
            l.load(u, n, i);
            return this.publish("load", [ this.annotations ]), this.show();
        }, i.prototype.addField = function(e) {
            var n;
            return (n = t.extend({
                load: function() {}
            }, e)).element = t("<div />")[0], this.fields.push(n), n.element, this;
        }, i.prototype.onEditClick = function(t) {
            return this.onButtonClick(t, "edit");
        }, i.prototype.onDeleteClick = function(t) {
            return this.onButtonClick(t, "delete");
        }, i.prototype.onButtonClick = function(e, n) {
            var o;
            return o = t(e.target).parents(".annotator-annotation"), this.publish(n, [ o.data("annotation") ]);
        }, i;
    }(e.Widget), o = function() {
        function e(t) {
            this.data = t;
        }
        return e.prototype.get = function(e, n) {
            var o, i, r, s, a, u, l;
            for (null == n && (n = {}), n = t.extend({}, n, {
                rel: e
            }), r = function() {
                var t;
                for (i in t = [], n) F.call(n, i) && (n[i], t.push(i));
                return t;
            }(), l = [], s = 0, a = (u = this.data).length; s < a; s++) o = u[s], r.reduce(function(t, e) {
                return t && o[e] === n[e];
            }, !0) && l.push(o);
            return l;
        }, e;
    }(), (e = e || {}).Notification = function(o) {
        function i(e) {
            this.hide = R(this.hide, this), this.show = R(this.show, this), i.__super__.constructor.call(this, t(this.options.html).appendTo(document.body)[0], e);
        }
        return P(i, n), i.prototype.events = {
            click: "hide"
        }, i.prototype.options = {
            html: "<div class='annotator-notice'></div>",
            classes: {
                show: "annotator-notice-show",
                info: "annotator-notice-info",
                success: "annotator-notice-success",
                error: "annotator-notice-error"
            }
        }, i.prototype.show = function(n, o) {
            return null == o && (o = e.Notification.INFO), this.currentStatus = o, t(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(r.escape(n || "")), 
            setTimeout(this.hide, 5e3), this;
        }, i.prototype.hide = function() {
            return null == this.currentStatus && (this.currentStatus = e.Notification.INFO), 
            t(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]), 
            this;
        }, i;
    }(), e.Notification.INFO = "info", e.Notification.SUCCESS = "success", e.Notification.ERROR = "error", 
    t(function() {
        var t;
        return t = new e.Notification(), e.showNotification = t.show, e.hideNotification = t.hide;
    }), e.Plugin.Unsupported = function(n) {
        function o() {
            return o.__super__.constructor.apply(this, arguments);
        }
        return P(o, n), o.prototype.options = {
            message: e._t("Sorry your current browser does not support the Annotator")
        }, o.prototype.pluginInit = function() {
            var n = this;
            if (!e.supported()) return t(function() {
                if (e.showNotification(n.options.message), void 0 === window.XMLHttpRequest && void 0 !== ActiveXObject) return t("html").addClass("ie6");
            });
        }, o;
    }(e.Plugin), u = function(t) {
        var e, n, o, i, r, s;
        return i = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?", 
        e = t.match(new RegExp(i)), o = 0, n = new Date(e[1], 0, 1), e[3] && n.setMonth(e[3] - 1), 
        e[5] && n.setDate(e[5]), e[7] && n.setHours(e[7]), e[8] && n.setMinutes(e[8]), e[10] && n.setSeconds(e[10]), 
        e[12] && n.setMilliseconds(1e3 * Number("0." + e[12])), e[14] && (o = 60 * Number(e[16]) + Number(e[17]), 
        o *= null != (s = "-" === e[15]) ? s : {
            1: -1
        }), o -= n.getTimezoneOffset(), r = Number(n) + 60 * o * 1e3, n.setTime(Number(r)), 
        n;
    }, s = function(t) {
        var e, n, o, i, r, s, a, u, l, h;
        if ("undefined" != typeof atob && null !== atob) return atob(t);
        if (n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", s = 0, 
        e = 0, "", h = [], !t) return t;
        for (t += ""; s < t.length; ) a = (o = n.indexOf(t.charAt(s++)) << 18 | n.indexOf(t.charAt(s++)) << 12 | (i = n.indexOf(t.charAt(s++))) << 6 | (r = n.indexOf(t.charAt(s++)))) >> 16 & 255, 
        u = o >> 8 & 255, l = 255 & o, h[e++] = 64 === i ? String.fromCharCode(a) : 64 === r ? String.fromCharCode(a, u) : String.fromCharCode(a, u, l);
        return h.join("");
    }, a = function(t) {
        var e, n, o;
        if (0 !== (e = t.length % 4)) for (n = 0, o = 4 - e; 0 <= o ? n < o : n > o; 0 <= o ? ++n : --n) t += "=";
        return t = (t = t.replace(/-/g, "+")).replace(/_/g, "/"), s(t);
    }, m = function(t) {
        var e, n;
        return (n = t.split("."))[0], e = n[1], n[2], JSON.parse(a(e));
    }, e.Plugin.Auth = function(n) {
        function o(t, e) {
            o.__super__.constructor.apply(this, arguments), this.waitingForToken = [], this.options.token ? this.setToken(this.options.token) : this.requestToken();
        }
        return P(o, n), o.prototype.options = {
            token: null,
            tokenUrl: "/auth/token",
            autoFetch: !0
        }, o.prototype.requestToken = function() {
            var n = this;
            return this.requestInProgress = !0, t.ajax({
                url: this.options.tokenUrl,
                dataType: "text",
                xhrFields: {
                    withCredentials: !0
                }
            }).done(function(t, e, o) {
                return n.setToken(t);
            }).fail(function(t, n, o) {
                var i;
                return i = e._t("Couldn't get auth token:"), console.error(i + " " + o, t), e.showNotification(i + " " + t.responseText, e.Notification.ERROR);
            }).always(function() {
                return n.requestInProgress = !1;
            });
        }, o.prototype.setToken = function(t) {
            var n, o = this;
            if (this.token = t, this._unsafeToken = m(t), this.haveValidToken()) {
                for (this.options.autoFetch && (this.refreshTimeout = setTimeout(function() {
                    return o.requestToken();
                }, 1e3 * (this.timeToExpiry() - 2))), this.updateHeaders(), n = []; this.waitingForToken.length > 0; ) n.push(this.waitingForToken.pop()(this._unsafeToken));
                return n;
            }
            if (console.warn(e._t("Didn't get a valid token.")), this.options.autoFetch) return console.warn(e._t("Getting a new token in 10s.")), 
            setTimeout(function() {
                return o.requestToken();
            }, 1e4);
        }, o.prototype.haveValidToken = function() {
            return !!(this._unsafeToken && this._unsafeToken.issuedAt && this._unsafeToken.ttl && this._unsafeToken.consumerKey && this.timeToExpiry() > 0);
        }, o.prototype.timeToExpiry = function() {
            var t, e;
            return t = new Date().getTime() / 1e3, (e = u(this._unsafeToken.issuedAt).getTime() / 1e3 + this._unsafeToken.ttl - t) > 0 ? e : 0;
        }, o.prototype.updateHeaders = function() {
            var e;
            return e = this.element.data("annotator:headers"), this.element.data("annotator:headers", t.extend(e, {
                "x-annotator-auth-token": this.token
            }));
        }, o.prototype.withToken = function(t) {
            if (null != t) return this.haveValidToken() ? t(this._unsafeToken) : (this.waitingForToken.push(t), 
            this.requestInProgress ? void 0 : this.requestToken());
        }, o;
    }(e.Plugin), e.Plugin.Store = function(n) {
        function o(t, e) {
            this._onError = R(this._onError, this), this._onLoadAnnotationsFromSearch = R(this._onLoadAnnotationsFromSearch, this), 
            this._onLoadAnnotations = R(this._onLoadAnnotations, this), this._getAnnotations = R(this._getAnnotations, this), 
            o.__super__.constructor.apply(this, arguments), this.annotations = [];
        }
        return P(o, n), o.prototype.events = {
            annotationCreated: "annotationCreated",
            annotationDeleted: "annotationDeleted",
            annotationUpdated: "annotationUpdated"
        }, o.prototype.options = {
            annotationData: {},
            emulateHTTP: !1,
            loadFromSearch: !1,
            prefix: "/store",
            urls: {
                create: "/annotations",
                read: "/annotations/:id",
                update: "/annotations/:id",
                destroy: "/annotations/:id",
                search: "/search"
            }
        }, o.prototype.pluginInit = function() {
            if (e.supported()) return this.annotator.plugins.Auth ? this.annotator.plugins.Auth.withToken(this._getAnnotations) : this._getAnnotations();
        }, o.prototype._getAnnotations = function() {
            return this.options.loadFromSearch ? this.loadAnnotationsFromSearch(this.options.loadFromSearch) : this.loadAnnotations();
        }, o.prototype.annotationCreated = function(t) {
            var n = this;
            return H.call(this.annotations, t) < 0 ? (this.registerAnnotation(t), this._apiRequest("create", t, function(o) {
                return null == o.id && console.warn(e._t("Warning: No ID returned from server for annotation "), t), 
                n.updateAnnotation(t, o);
            })) : this.updateAnnotation(t, {});
        }, o.prototype.annotationUpdated = function(t) {
            var e = this;
            if (H.call(this.annotations, t) >= 0) return this._apiRequest("update", t, function(n) {
                return e.updateAnnotation(t, n);
            });
        }, o.prototype.annotationDeleted = function(t) {
            var e = this;
            if (H.call(this.annotations, t) >= 0) return this._apiRequest("destroy", t, function() {
                return e.unregisterAnnotation(t);
            });
        }, o.prototype.registerAnnotation = function(t) {
            return this.annotations.push(t);
        }, o.prototype.unregisterAnnotation = function(t) {
            return this.annotations.splice(this.annotations.indexOf(t), 1);
        }, o.prototype.updateAnnotation = function(n, o) {
            return H.call(this.annotations, n) < 0 ? console.error(e._t("Trying to update unregistered annotation!")) : t.extend(n, o), 
            t(n.highlights).data("annotation", n);
        }, o.prototype.loadAnnotations = function() {
            return this._apiRequest("read", null, this._onLoadAnnotations);
        }, o.prototype._onLoadAnnotations = function(t) {
            var e, n, o, i, r, s, a, u, l;
            for (null == t && (t = []), o = {}, r = 0, a = (l = this.annotations).length; r < a; r++) o[(e = l[r]).id] = e;
            for (i = [], s = 0, u = t.length; s < u; s++) o[(e = t[s]).id] ? (n = o[e.id], this.updateAnnotation(n, e)) : i.push(e);
            return this.annotations = this.annotations.concat(i), this.annotator.loadAnnotations(i.slice());
        }, o.prototype.loadAnnotationsFromSearch = function(t) {
            return this._apiRequest("search", t, this._onLoadAnnotationsFromSearch);
        }, o.prototype._onLoadAnnotationsFromSearch = function(t) {
            return null == t && (t = {}), this._onLoadAnnotations(t.rows || []);
        }, o.prototype.dumpAnnotations = function() {
            var t, e, n, o, i;
            for (i = [], e = 0, n = (o = this.annotations).length; e < n; e++) t = o[e], i.push(JSON.parse(this._dataFor(t)));
            return i;
        }, o.prototype._apiRequest = function(e, n, o) {
            var i, r, s, a;
            return i = n && n.id, a = this._urlFor(e, i), r = this._apiRequestOptions(e, n, o), 
            (s = t.ajax(a, r))._id = i, s._action = e, s;
        }, o.prototype._apiRequestOptions = function(e, n, o) {
            var i, r, s;
            return s = {
                type: r = this._methodFor(e),
                headers: this.element.data("annotator:headers"),
                dataType: "json",
                success: o || function() {},
                error: this._onError
            }, !this.options.emulateHTTP || "PUT" !== r && "DELETE" !== r || (s.headers = t.extend(s.headers, {
                "X-HTTP-Method-Override": r
            }), s.type = "POST"), "search" === e ? s = t.extend(s, {
                data: n
            }) : (i = n && this._dataFor(n), this.options.emulateJSON ? (s.data = {
                json: i
            }, this.options.emulateHTTP && (s.data._method = r), s) : s = t.extend(s, {
                data: i,
                contentType: "application/json; charset=utf-8"
            }));
        }, o.prototype._urlFor = function(t, e) {
            var n;
            return n = null != this.options.prefix ? this.options.prefix : "", n = (n = (n += this.options.urls[t]).replace(/\/:id/, null != e ? "/" + e : "")).replace(/:id/, null != e ? e : "");
        }, o.prototype._methodFor = function(t) {
            return {
                create: "POST",
                read: "GET",
                update: "PUT",
                destroy: "DELETE",
                search: "GET"
            }[t];
        }, o.prototype._dataFor = function(e) {
            var n, o;
            return o = e.highlights, delete e.highlights, t.extend(e, this.options.annotationData), 
            n = JSON.stringify(e), o && (e.highlights = o), n;
        }, o.prototype._onError = function(t) {
            var n, o;
            switch (n = t._action, o = e._t("Sorry we could not ") + n + e._t(" this annotation"), 
            "search" === t._action ? o = e._t("Sorry we could not search the store for annotations") : "read" !== t._action || t._id || (o = e._t("Sorry we could not ") + n + e._t(" the annotations from the store")), 
            t.status) {
              case 401:
                o = e._t("Sorry you are not allowed to ") + n + e._t(" this annotation");
                break;

              case 404:
                o = e._t("Sorry we could not connect to the annotations store");
                break;

              case 500:
                o = e._t("Sorry something went wrong with the annotation store");
            }
            return e.showNotification(o, e.Notification.ERROR), console.error(e._t("API request failed:") + " '" + t.status + "'");
        }, o;
    }(e.Plugin), e.Plugin.Permissions = function(n) {
        function o(t, e) {
            this._setAuthFromToken = R(this._setAuthFromToken, this), this.updateViewer = R(this.updateViewer, this), 
            this.updateAnnotationPermissions = R(this.updateAnnotationPermissions, this), this.updatePermissionsField = R(this.updatePermissionsField, this), 
            this.addFieldsToAnnotation = R(this.addFieldsToAnnotation, this), o.__super__.constructor.apply(this, arguments), 
            this.options.user && (this.setUser(this.options.user), delete this.options.user);
        }
        return P(o, n), o.prototype.events = {
            beforeAnnotationCreated: "addFieldsToAnnotation"
        }, o.prototype.options = {
            showViewPermissionsCheckbox: !0,
            showEditPermissionsCheckbox: !0,
            userId: function(t) {
                return t;
            },
            userString: function(t) {
                return t;
            },
            userAuthorize: function(t, e, n) {
                var o, i, r, s;
                if (e.permissions) {
                    if (0 === (i = e.permissions[t] || []).length) return !0;
                    for (r = 0, s = i.length; r < s; r++) if (o = i[r], this.userId(n) === o) return !0;
                    return !1;
                }
                return !e.user || !!n && this.userId(n) === this.userId(e.user);
            },
            user: "",
            permissions: {
                read: [],
                update: [],
                delete: [],
                admin: []
            }
        }, o.prototype.pluginInit = function() {
            var t, n, o = this;
            if (e.supported()) return n = this, t = function(t, e) {
                return function(o, i) {
                    return n[t].call(n, e, o, i);
                };
            }, !this.user && this.annotator.plugins.Auth && this.annotator.plugins.Auth.withToken(this._setAuthFromToken), 
            !0 === this.options.showViewPermissionsCheckbox && this.annotator.editor.addField({
                type: "checkbox",
                label: e._t("Allow anyone to <strong>view</strong> this annotation"),
                load: t("updatePermissionsField", "read"),
                submit: t("updateAnnotationPermissions", "read")
            }), !0 === this.options.showEditPermissionsCheckbox && this.annotator.editor.addField({
                type: "checkbox",
                label: e._t("Allow anyone to <strong>edit</strong> this annotation"),
                load: t("updatePermissionsField", "update"),
                submit: t("updateAnnotationPermissions", "update")
            }), this.annotator.viewer.addField({
                load: this.updateViewer
            }), this.annotator.plugins.Filter ? this.annotator.plugins.Filter.addFilter({
                label: e._t("User"),
                property: "user",
                isFiltered: function(t, e) {
                    var n, i, r, s;
                    if (e = o.options.userString(e), !t || !e) return !1;
                    for (i = 0, r = (s = t.split(/\s*/)).length; i < r; i++) if (n = s[i], -1 === e.indexOf(n)) return !1;
                    return !0;
                }
            }) : void 0;
        }, o.prototype.setUser = function(t) {
            return this.user = t;
        }, o.prototype.addFieldsToAnnotation = function(e) {
            if (e && (e.permissions = t.extend(!0, {}, this.options.permissions), this.user)) return e.user = this.user;
        }, o.prototype.authorize = function(t, e, n) {
            return void 0 === n && (n = this.user), !this.options.userAuthorize || this.options.userAuthorize.call(this.options, t, e, n);
        }, o.prototype.updatePermissionsField = function(e, n, o) {
            var i;
            return i = (n = t(n).show()).find("input").removeAttr("disabled"), this.authorize("admin", o) || n.hide(), 
            this.authorize(e, o || {}, null) ? i.attr("checked", "checked") : i.removeAttr("checked");
        }, o.prototype.updateAnnotationPermissions = function(e, n, o) {
            return o.permissions || (o.permissions = t.extend(!0, {}, this.options.permissions)), 
            e + "-permissions", t(n).find("input").is(":checked") ? o.permissions[e] = [] : o.permissions[e] = [ this.options.userId(this.user) ];
        }, o.prototype.updateViewer = function(n, o, i) {
            var r, s;
            if (n = t(n), s = this.options.userString(o.user), o.user && s && "string" == typeof s ? (r = e.Util.escape(this.options.userString(o.user)), 
            n.html(r).addClass("annotator-user")) : n.remove(), i && (this.authorize("update", o) || i.hideEdit(), 
            !this.authorize("delete", o))) return i.hideDelete();
        }, o.prototype._setAuthFromToken = function(t) {
            return this.setUser(t.userId);
        }, o;
    }(e.Plugin), e.Plugin.AnnotateItPermissions = function(e) {
        function n() {
            return this._setAuthFromToken = R(this._setAuthFromToken, this), this.updateAnnotationPermissions = R(this.updateAnnotationPermissions, this), 
            this.updatePermissionsField = R(this.updatePermissionsField, this), this.addFieldsToAnnotation = R(this.addFieldsToAnnotation, this), 
            n.__super__.constructor.apply(this, arguments);
        }
        return P(n, e), n.prototype.options = {
            showViewPermissionsCheckbox: !0,
            showEditPermissionsCheckbox: !0,
            groups: {
                world: "group:__world__",
                authenticated: "group:__authenticated__",
                consumer: "group:__consumer__"
            },
            userId: function(t) {
                return t.userId;
            },
            userString: function(t) {
                return t.userId;
            },
            userAuthorize: function(t, e, n) {
                var o, i, r, s, a;
                return o = (e.permissions || {})[t] || [], i = this.groups.world, H.call(o, i) >= 0 || null != n && null != n.userId && null != n.consumerKey && (n.userId === e.user && n.consumerKey === e.consumer || (r = this.groups.authenticated, 
                H.call(o, r) >= 0 || (n.consumerKey === e.consumer && (s = this.groups.consumer, 
                H.call(o, s) >= 0) || (n.consumerKey === e.consumer && (a = n.userId, H.call(o, a) >= 0) || !(n.consumerKey !== e.consumer || !n.admin)))));
            },
            permissions: {
                read: [ "group:__world__" ],
                update: [],
                delete: [],
                admin: []
            }
        }, n.prototype.addFieldsToAnnotation = function(t) {
            if (t && (t.permissions = this.options.permissions, this.user)) return t.user = this.user.userId, 
            t.consumer = this.user.consumerKey;
        }, n.prototype.updatePermissionsField = function(e, n, o) {
            var i;
            return i = (n = t(n).show()).find("input").removeAttr("disabled"), this.authorize("admin", o) || n.hide(), 
            this.user && this.authorize(e, o || {}, {
                userId: "__nonexistentuser__",
                consumerKey: this.user.consumerKey
            }) ? i.attr("checked", "checked") : i.removeAttr("checked");
        }, n.prototype.updateAnnotationPermissions = function(e, n, o) {
            return o.permissions || (o.permissions = this.options.permissions), e + "-permissions", 
            t(n).find("input").is(":checked") ? o.permissions[e] = [ "read" === e ? this.options.groups.world : this.options.groups.consumer ] : o.permissions[e] = [];
        }, n.prototype._setAuthFromToken = function(t) {
            return this.setUser(t);
        }, n;
    }(e.Plugin.Permissions), e.Plugin.Filter = function(n) {
        function o(e, n) {
            var i;
            this._onPreviousClick = R(this._onPreviousClick, this), this._onNextClick = R(this._onNextClick, this), 
            this._onFilterKeyup = R(this._onFilterKeyup, this), this._onFilterBlur = R(this._onFilterBlur, this), 
            this._onFilterFocus = R(this._onFilterFocus, this), this.updateHighlights = R(this.updateHighlights, this), 
            e = t(this.html.element).appendTo((null != n ? n.appendTo : void 0) || this.options.appendTo), 
            o.__super__.constructor.call(this, e, n), (i = this.options).filters || (i.filters = []), 
            this.filter = t(this.html.filter), this.filters = [], this.current = 0;
        }
        return P(o, n), o.prototype.events = {
            ".annotator-filter-property input focus": "_onFilterFocus",
            ".annotator-filter-property input blur": "_onFilterBlur",
            ".annotator-filter-property input keyup": "_onFilterKeyup",
            ".annotator-filter-previous click": "_onPreviousClick",
            ".annotator-filter-next click": "_onNextClick",
            ".annotator-filter-clear click": "_onClearClick"
        }, o.prototype.classes = {
            active: "annotator-filter-active",
            hl: {
                hide: "annotator-hl-filtered",
                active: "annotator-hl-active"
            }
        }, o.prototype.html = {
            element: '<div class="annotator-filter">\n  <strong>' + e._t("Navigate:") + '</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">' + e._t("Previous") + '</button>\n<button class="annotator-filter-next">' + e._t("Next") + "</button>\n</span>\n<strong>" + e._t("Filter by:") + "</strong>\n</div>",
            filter: '<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">' + e._t("Clear") + "</button>\n</span>"
        }, o.prototype.options = {
            appendTo: "body",
            filters: [],
            addAnnotationFilter: !0,
            isFiltered: function(t, e) {
                var n, o, i, r;
                if (!t || !e) return !1;
                for (o = 0, i = (r = t.split(/\s+/)).length; o < i; o++) if (n = r[o], -1 === e.indexOf(n)) return !1;
                return !0;
            }
        }, o.prototype.pluginInit = function() {
            var t, n, o, i;
            for (n = 0, o = (i = this.options.filters).length; n < o; n++) t = i[n], this.addFilter(t);
            if (this.updateHighlights(), this._setupListeners()._insertSpacer(), !0 === this.options.addAnnotationFilter) return this.addFilter({
                label: e._t("Annotation"),
                property: "text"
            });
        }, o.prototype.destroy = function() {
            var e, n;
            return o.__super__.destroy.apply(this, arguments), n = t("html"), e = parseInt(n.css("padding-top"), 10) || 0, 
            n.css("padding-top", e - this.element.outerHeight()), this.element.remove();
        }, o.prototype._insertSpacer = function() {
            var e, n;
            return n = t("html"), e = parseInt(n.css("padding-top"), 10) || 0, n.css("padding-top", e + this.element.outerHeight()), 
            this;
        }, o.prototype._setupListeners = function() {
            var t, e, n, o;
            for (n = 0, o = (e = [ "annotationsLoaded", "annotationCreated", "annotationUpdated", "annotationDeleted" ]).length; n < o; n++) t = e[n], 
            this.annotator.subscribe(t, this.updateHighlights);
            return this;
        }, o.prototype.addFilter = function(n) {
            var o, i;
            return i = t.extend({
                label: "",
                property: "",
                isFiltered: this.options.isFiltered
            }, n), function() {
                var t, e, n, r;
                for (r = [], t = 0, e = (n = this.filters).length; t < e; t++) (o = n[t]).property === i.property && r.push(o);
                return r;
            }.call(this).length || (i.id = "annotator-filter-" + i.property, i.annotations = [], 
            i.element = this.filter.clone().appendTo(this.element), i.element.find("label").html(i.label).attr("for", i.id), 
            i.element.find("input").attr({
                id: i.id,
                placeholder: e._t("Filter by ") + i.label + "\u2026"
            }), i.element.find("button").hide(), i.element.data("filter", i), this.filters.push(i)), 
            this;
        }, o.prototype.updateFilter = function(e) {
            var n, o, i, r, s, a, u;
            if (e.annotations = [], this.updateHighlights(), this.resetHighlights(), i = t.trim(e.element.find("input").val())) {
                for (o = this.highlights.map(function() {
                    return t(this).data("annotation");
                }), s = 0, a = (u = t.makeArray(o)).length; s < a; s++) r = (n = u[s])[e.property], 
                e.isFiltered(i, r) && e.annotations.push(n);
                return this.filterHighlights();
            }
        }, o.prototype.updateHighlights = function() {
            return this.highlights = this.annotator.element.find(".annotator-hl:visible"), this.filtered = this.highlights.not(this.classes.hl.hide);
        }, o.prototype.filterHighlights = function() {
            var e, n, o, i, r, s, a, u, l, h;
            for (e = t.grep(this.filters, function(t) {
                return !!t.annotations.length;
            }), i = (null != (h = e[0]) ? h.annotations : void 0) || [], e.length > 1 && (o = [], 
            t.each(e, function() {
                return t.merge(o, this.annotations);
            }), a = [], i = [], t.each(o, function() {
                return -1 === t.inArray(this, a) ? a.push(this) : i.push(this);
            })), r = this.highlights, s = u = 0, l = i.length; u < l; s = ++u) n = i[s], r = r.not(n.highlights);
            return r.addClass(this.classes.hl.hide), this.filtered = this.highlights.not(this.classes.hl.hide), 
            this;
        }, o.prototype.resetHighlights = function() {
            return this.highlights.removeClass(this.classes.hl.hide), this.filtered = this.highlights, 
            this;
        }, o.prototype._onFilterFocus = function(e) {
            var n;
            return (n = t(e.target)).parent().addClass(this.classes.active), n.next("button").show();
        }, o.prototype._onFilterBlur = function(e) {
            var n;
            if (!e.target.value) return (n = t(e.target)).parent().removeClass(this.classes.active), 
            n.next("button").hide();
        }, o.prototype._onFilterKeyup = function(e) {
            var n;
            if (n = t(e.target).parent().data("filter")) return this.updateFilter(n);
        }, o.prototype._findNextHighlight = function(t) {
            var e, n, o, i, r, s, a, u;
            return this.highlights.length ? (s = t ? 0 : -1, u = t ? -1 : 0, a = t ? "lt" : "gt", 
            (o = (e = this.highlights.not("." + this.classes.hl.hide)).filter("." + this.classes.hl.active)).length || (o = e.eq(s)), 
            n = o.data("annotation"), i = e.index(o[0]), (r = e.filter(":" + a + "(" + i + ")").not(n.highlights).eq(u)).length || (r = e.eq(u)), 
            this._scrollToHighlight(r.data("annotation").highlights)) : this;
        }, o.prototype._onNextClick = function(t) {
            return this._findNextHighlight();
        }, o.prototype._onPreviousClick = function(t) {
            return this._findNextHighlight(!0);
        }, o.prototype._scrollToHighlight = function(e) {
            return e = t(e), this.highlights.removeClass(this.classes.hl.active), e.addClass(this.classes.hl.active), 
            t("html, body").animate({
                scrollTop: e.offset().top - (this.element.height() + 20)
            }, 150);
        }, o.prototype._onClearClick = function(e) {
            return t(e.target).prev("input").val("").keyup().blur();
        }, o;
    }(e.Plugin), e.Plugin.Markdown = function(n) {
        function o(t, n) {
            this.updateTextField = R(this.updateTextField, this), null != ("undefined" != typeof Showdown && null !== Showdown ? Showdown.converter : void 0) ? (o.__super__.constructor.apply(this, arguments), 
            this.converter = new Showdown.converter()) : console.error(e._t("To use the Markdown plugin, you must include Showdown into the page first."));
        }
        return P(o, n), o.prototype.events = {
            annotationViewerTextField: "updateTextField"
        }, o.prototype.updateTextField = function(n, o) {
            var i;
            return i = e.Util.escape(o.text || ""), t(n).html(this.convert(i));
        }, o.prototype.convert = function(t) {
            return this.converter.makeHtml(t);
        }, o;
    }(e.Plugin), e.Plugin.Tags = function(n) {
        function o() {
            return this.setAnnotationTags = R(this.setAnnotationTags, this), this.updateField = R(this.updateField, this), 
            o.__super__.constructor.apply(this, arguments);
        }
        return P(o, n), o.prototype.options = {
            parseTags: function(e) {
                var n;
                return n = [], (e = t.trim(e)) && (n = e.split(/\s+/)), n;
            },
            stringifyTags: function(t) {
                return t.join(" ");
            }
        }, o.prototype.field = null, o.prototype.input = null, o.prototype.pluginInit = function() {
            if (e.supported()) return this.field = this.annotator.editor.addField({
                label: e._t("Add some tags here") + "\u2026",
                load: this.updateField,
                submit: this.setAnnotationTags
            }), this.annotator.viewer.addField({
                load: this.updateViewer
            }), this.annotator.plugins.Filter && this.annotator.plugins.Filter.addFilter({
                label: e._t("Tag"),
                property: "tags",
                isFiltered: e.Plugin.Tags.filterCallback
            }), this.input = t(this.field).find(":input");
        }, o.prototype.parseTags = function(t) {
            return this.options.parseTags(t);
        }, o.prototype.stringifyTags = function(t) {
            return this.options.stringifyTags(t);
        }, o.prototype.updateField = function(t, e) {
            var n;
            return n = "", e.tags && (n = this.stringifyTags(e.tags)), this.input.val(n);
        }, o.prototype.setAnnotationTags = function(t, e) {
            return e.tags = this.parseTags(this.input.val());
        }, o.prototype.updateViewer = function(n, o) {
            return n = t(n), o.tags && t.isArray(o.tags) && o.tags.length ? n.addClass("annotator-tags").html(function() {
                return t.map(o.tags, function(t) {
                    return '<span class="annotator-tag">' + e.Util.escape(t) + "</span>";
                }).join(" ");
            }) : n.remove();
        }, o;
    }(e.Plugin), e.Plugin.Tags.filterCallback = function(t, e) {
        var n, o, i, r, s, a, u;
        if (null == e && (e = []), i = 0, o = [], t) for (r = 0, a = (o = t.split(/\s+/g)).length; r < a; r++) if (n = o[r], 
        e.length) for (s = 0, u = e.length; s < u; s++) -1 !== e[s].indexOf(n) && (i += 1);
        return i === o.length;
    }, e.prototype.setupPlugins = function(n, o) {
        var i, r, s, a, u, l, h, c;
        for (i in null == n && (n = {}), null == o && (o = {}), s = [ "Unsupported", "Auth", "Tags", "Filter", "Store", "AnnotateItPermissions" ], 
        (u = e.Util.getGlobal()).Showdown && s.push("Markdown"), a = u.location.href.split(/#|\?/).shift() || "", 
        r = {
            Tags: {},
            Filter: {
                filters: [ {
                    label: e._t("User"),
                    property: "user"
                }, {
                    label: e._t("Tags"),
                    property: "tags"
                } ]
            },
            Auth: {
                tokenUrl: n.tokenUrl || "http://annotateit.org/api/token"
            },
            Store: {
                prefix: n.storeUrl || "http://annotateit.org/api",
                annotationData: {
                    uri: a
                },
                loadFromSearch: {
                    uri: a
                }
            }
        }, o) F.call(o, i) && (o[i], H.call(s, i) < 0 && s.push(i));
        for (t.extend(!0, r, o), c = [], l = 0, h = s.length; l < h; l++) (i = s[l]) in r && !r[i] ? c.push(void 0) : c.push(this.addPlugin(i, r[i]));
        return c;
    };
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = Object.prototype.hasOwnProperty, n = function(t, n) {
        function o() {
            this.constructor = t;
        }
        for (var i in n) e.call(n, i) && (t[i] = n[i]);
        return o.prototype = n.prototype, t.prototype = new o(), t.__super__ = n.prototype, 
        t;
    };
    Annotator.Plugin.Touch = function(e) {
        function o(e, n) {
            this._onDocumentTap = t(this._onDocumentTap, this), this._onHighlightTap = t(this._onHighlightTap, this), 
            this._onAdderTap = t(this._onAdderTap, this), this._onToggleTap = t(this._onToggleTap, this), 
            this._onSelection = t(this._onSelection, this), this._watchForSelection = t(this._watchForSelection, this), 
            o.__super__.constructor.apply(this, arguments), this.utils = Annotator.Plugin.Touch.utils, 
            this.selection = null, this.document = i(document);
        }
        var i, r;
        return n(o, e), r = Annotator._t, i = Annotator.$, o.states = {
            ON: "on",
            OFF: "off"
        }, o.prototype.template = '<div class="annotator-touch-widget annotator-touch-controls annotator-touch-hide">\n  <div class="annotator-touch-widget-inner">\n    <a class="annotator-button annotator-add annotator-focus">' + r("Annotate") + '</a>\n<a class="annotator-button annotator-touch-toggle" data-state="off">' + r("Start Annotating") + "</a>\n  </div>\n</div>", 
        o.prototype.classes = {
            hide: "annotator-touch-hide"
        }, o.prototype.options = {
            force: !1,
            useHighlighter: !1
        }, o.prototype.pluginInit = function() {
            if (Annotator.supported() && (this.options.force || o.isTouchDevice())) return this._setupControls(), 
            this.options.useHighlighter && (this.showControls(), this.highlighter = new Highlighter({
                root: this.element[0],
                prefix: "annotator-selection",
                enable: !1,
                highlightStyles: !0
            })), this.document.delegate(".annotator-hl", "tap", {
                preventDefault: !1
            }, this._onHighlightTap), this.subscribe("selection", this._onSelection), this._unbindAnnotatorEvents(), 
            this._setupAnnotatorEvents(), this._watchForSelection();
        }, o.prototype.pluginDestroy = function() {
            if (this.controls && this.controls.remove(), this.highlighter && this.highlighter.disable(), 
            this.annotator) return this.annotator.editor.unsubscribe("hide", this._watchForSelection);
        }, o.prototype.startAnnotating = function() {
            return this.highlighter && this.highlighter.enable(), this.toggle.attr("data-state", o.states.ON), 
            this.toggle.html("Stop Annotating"), this;
        }, o.prototype.stopAnnotating = function() {
            return this.highlighter && this.highlighter.disable(), this.toggle.attr("data-state", o.states.OFF), 
            this.toggle.html("Start Annotating"), this;
        }, o.prototype.isAnnotating = function() {
            return !this.options.useHighlighter || this.toggle.attr("data-state") === o.states.ON;
        }, o.prototype.showEditor = function(t) {
            return this.annotator.showEditor(t, {}), this.hideControls(), this;
        }, o.prototype.showControls = function() {
            return this.controls.removeClass(this.classes.hide), this;
        }, o.prototype.hideControls = function() {
            return this.options.useHighlighter || this.controls.addClass(this.classes.hide), 
            this;
        }, o.prototype._setupControls = function() {
            if (this.annotator.adder.remove(), this.controls = i(this.template).appendTo("body"), 
            this.adder = this.controls.find(".annotator-add"), this.adder.bind("tap", {
                onTapDown: function(t) {
                    return t.stopPropagation();
                }
            }, this._onAdderTap), this.toggle = this.controls.find(".annotator-touch-toggle"), 
            this.toggle.bind({
                tap: this._onToggleTap
            }), !this.options.useHighlighter) return this.toggle.hide();
        }, o.prototype._setupAnnotatorEvents = function() {
            var t = this;
            return this.editor = new o.Editor(this.annotator.editor), this.viewer = new o.Viewer(this.annotator.viewer), 
            this.annotator.editor.on("show", function() {
                if (t._clearWatchForSelection(), t.annotator.onAdderMousedown(), t.highlighter) return t.highlighter.disable();
            }), this.annotator.viewer.on("show", function() {
                if (t.highlighter) return t.highlighter.disable();
            }), this.annotator.editor.on("hide", function() {
                return t.utils.nextTick(function() {
                    return t.highlighter && t.highlighter.enable().deselect(), t._watchForSelection();
                });
            }), this.annotator.viewer.on("hide", function() {
                return t.utils.nextTick(function() {
                    if (t.highlighter) return t.highlighter.enable().deselect();
                });
            });
        }, o.prototype._unbindAnnotatorEvents = function() {
            return this.document.unbind({
                mouseup: this.annotator.checkForEndSelection,
                mousedown: this.annotator.checkForStartSelection
            }), this.element.unbind("click mousedown mouseover mouseout");
        }, o.prototype._watchForSelection = function() {
            var t, e, n, i = this;
            if (!this.timer) return t = o.isAndroid() ? 300 : 1e3 / 60, e = new Date().getTime(), 
            (n = function() {
                return new Date().getTime() - e > t && (e = new Date().getTime(), i._checkSelection()), 
                i.timer = i.utils.requestAnimationFrame.call(window, n);
            })();
        }, o.prototype._clearWatchForSelection = function() {
            return this.utils.cancelAnimationFrame.call(window, this.timer), this.timer = null;
        }, o.prototype._checkSelection = function() {
            var t, e, n;
            if (e = window.getSelection(), t = this.selectionString, n = i.trim(e + ""), e.rangeCount && n !== this.selectionString && (this.range = e.getRangeAt(0), 
            this.selectionString = n), (0 === e.rangeCount || this.range && this.range.collapsed) && (this.range = null, 
            this.selectionString = ""), this.selectionString !== t) return this.publish("selection", [ this.range, this ]);
        }, o.prototype._onSelection = function() {
            return this.isAnnotating() && this.range && this._isValidSelection(this.range) ? (this.adder.removeAttr("disabled"), 
            this.showControls()) : (this.adder.attr("disabled", ""), this.hideControls());
        }, o.prototype._isValidSelection = function(t) {
            var e, n, o;
            return e = function(t) {
                return i(t).parents(".annotator-wrapper").length;
            }, o = t.startOffset < t.startContainer.length && e(t.startContainer), n = t.endOffset > 0 && e(t.endContainer), 
            o || n;
        }, o.prototype._onToggleTap = function(t) {
            return t.preventDefault(), this.isAnnotating() ? this.stopAnnotating() : this.startAnnotating();
        }, o.prototype._onAdderTap = function(t) {
            var e, n, o, i = this;
            if (t.preventDefault(), this.range && (e = new Annotator.Range.BrowserRange(this.range), 
            (o = e.normalize().limit(this.element[0])) && !this.annotator.isAnnotator(o.commonAncestor))) return n = function(t) {
                return i.annotator.unsubscribe("beforeAnnotationCreated", n), t.quote = o.toString(), 
                t.ranges = [ o ];
            }, this.annotator.subscribe("beforeAnnotationCreated", n), this.annotator.onAdderClick(t);
        }, o.prototype._onHighlightTap = function(t) {
            var e;
            if (!i(t.currentTarget).parents().filter(function() {
                return i(this).is("a, [data-annotator-clickable]");
            }).length) return i.contains(this.element[0], t.currentTarget) ? ((e = t.originalEvent) && e.touches && (t.pageX = e.touches[0].pageX, 
            t.pageY = e.touches[0].pageY), this.annotator.viewer.isShown() && this.annotator.viewer.hide(), 
            this.annotator.onHighlightMouseover(t), this.document.unbind("tap", this._onDocumentTap), 
            this.document.bind("tap", {
                preventDefault: !1
            }, this._onDocumentTap)) : void 0;
        }, o.prototype._onDocumentTap = function(t) {
            if (this.annotator.isAnnotator(t.target) || this.annotator.viewer.hide(), !this.annotator.viewer.isShown()) return this.document.unbind("tap", this._onDocumentTap);
        }, o.isTouchDevice = function() {
            return "ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch;
        }, o.isAndroid = function() {
            return /Android/i.test(window.navigator.userAgent);
        }, o;
    }(Annotator.Plugin), Annotator.Plugin.Touch.Editor = function(e) {
        function o(e, n) {
            var i = this;
            this.editor = e, this._onOverlayTap = t(this._onOverlayTap, this), this._onCancel = t(this._onCancel, this), 
            this._onSubmit = t(this._onSubmit, this), this._onExpandTap = t(this._onExpandTap, this), 
            this._triggerAndroidRedraw = t(this._triggerAndroidRedraw, this), o.__super__.constructor.call(this, this.editor.element[0], n), 
            this.element.addClass("annotator-touch-editor"), this.element.wrapInner('<div class="annotator-touch-widget" />'), 
            this.element.find("form").addClass("annotator-touch-widget-inner"), this.element.find(".annotator-controls a").addClass("annotator-button"), 
            this.element.undelegate("textarea", "keydown"), this.on("hide", function() {
                return i.element.find(":focus").blur();
            }), this._setupQuoteField(), this._setupAndroidRedrawHack();
        }
        var i, r, s;
        return n(o, e), s = Annotator._t, r = Annotator.$, i = Annotator.Plugin.Touch, o.prototype.events = {
            click: "_onOverlayTap",
            ".annotator-save tap": "_onSubmit",
            ".annotator-cancel tap": "_onCancel",
            ".annotator-quote-toggle tap": "_onExpandTap"
        }, o.prototype.classes = {
            expand: "annotator-touch-expand"
        }, o.prototype.templates = {
            quote: '<button class="annotator-quote-toggle">' + s("expand") + '</button>\n<span class="quote"></span>'
        }, o.prototype.showQuote = function() {
            return this.quote.addClass(this.classes.expand), this.quote.find("button").text(s("Collapse")), 
            this;
        }, o.prototype.hideQuote = function() {
            return this.quote.removeClass(this.classes.expand), this.quote.find("button").text(s("Expand")), 
            this;
        }, o.prototype.isQuoteHidden = function() {
            return !this.quote.hasClass(this.classes.expand);
        }, o.prototype._setupQuoteField = function() {
            var t = this;
            return this.quote = r(this.editor.addField({
                id: "quote",
                load: function(e, n) {
                    return t.hideQuote(), t.quote.find("span").html(Annotator.Util.escape(n.quote || "")), 
                    t.quote.find("button").toggle(t._isTruncated());
                }
            })), this.quote.empty().addClass("annotator-item-quote"), this.quote.append(this.templates.quote);
        }, o.prototype._setupAndroidRedrawHack = function() {
            var t, e, n = this;
            if (i.isAndroid()) return e = null, t = function() {
                return e = null, n._triggerAndroidRedraw();
            }, r(window).bind("scroll", function() {
                if (!e) return e = setTimeout(t, 100);
            });
        }, o.prototype._triggerAndroidRedraw = function() {
            return this._input || (this._input = this.element.find(":input:first")), this._default || (this._default = parseFloat(this._input.css("padding-top"))), 
            this._multiplier = -1 * (this._multiplier || 1), this._input[0].style.paddingTop = this._default + this._multiplier + "px", 
            this._input[0].style.paddingTop = this._default - this._multiplier + "px";
        }, o.prototype._isTruncated = function() {
            var t, e, n;
            return (e = this.isQuoteHidden()) || this.hideQuote(), n = this.quote.height(), 
            this.showQuote(), t = this.quote.height(), e ? this.hideQuote() : this.showQuote(), 
            t > n;
        }, o.prototype._onExpandTap = function(t) {
            return t.preventDefault(), t.stopPropagation(), this.isQuoteHidden() ? this.showQuote() : this.hideQuote();
        }, o.prototype._onSubmit = function(t) {
            return t.preventDefault(), this.editor.submit();
        }, o.prototype._onCancel = function(t) {
            return t.preventDefault(), this.editor.hide();
        }, o.prototype._onOverlayTap = function(t) {
            if (t.target === this.element[0]) return this.editor.hide();
        }, o;
    }(Annotator.Delegator), jQuery.event.special.tap = {
        add: function(t) {
            var e, n, o, i;
            return n = t.data = t.data || {}, e = this, i = function(t) {
                return !1 !== n.preventDefault && t.preventDefault(), n.onTapDown && n.onTapDown.apply(this, arguments), 
                n.event = t, n.touched = setTimeout(function() {
                    return n.touched = null;
                }, n.timeout || 300), jQuery(document).bind({
                    touchend: o,
                    mouseup: o
                });
            }, o = function(i) {
                return null != n.touched && (clearTimeout(n.touched), (i.target === e || jQuery.contains(e, i.target)) && (t.origHandler || t.handler).call(this, n.event), 
                n.touched = null), n.onTapUp && n.onTapUp.apply(this, arguments), jQuery(document).unbind({
                    touchstart: o,
                    mousedown: o
                });
            }, n.tapHandlers = {
                touchstart: i,
                mousedown: i
            }, t.selector ? jQuery(e).delegate(t.selector, n.tapHandlers) : jQuery(e).bind(n.tapHandlers);
        },
        remove: function(t) {
            return jQuery(this).unbind(t.data.tapHandlers);
        }
    }, Annotator.Delegator.natives.push("touchstart", "touchmove", "touchend", "tap"), 
    Annotator.Plugin.Touch.utils = function() {
        var t, e, n, o, i, r, s;
        for (i = [ "ms", "moz", "webkit", "o" ], o = window.requestAnimationFrame, t = window.cancelAnimationFrame, 
        r = 0, s = i.length; r < s; r++) n = i[r], o || (o = window[n + "RequestAnimationFrame"], 
        t = window[n + "CancelAnimationFrame"] || window[n + "CancelRequestAnimationFrame"]);
        return o || (e = 0, o = function(t, n) {
            var o, i;
            return o = new Date().getTime(), i = Math.max(0, 16 - (o - e)), e = o + i, window.setTimeout(function() {
                return t(o + i);
            }, i);
        }), t || (t = function(t) {
            return clearTimeout(t);
        }), {
            requestAnimationFrame: o,
            cancelAnimationFrame: t,
            nextTick: function(t) {
                return setTimeout(t, 0);
            }
        };
    }(), Annotator.Plugin.Touch.Viewer = function(e) {
        function o(e, n) {
            this.viewer = e, this._onLoad = t(this._onLoad, this), o.__super__.constructor.call(this, this.viewer.element[0], n), 
            this.element.unbind("click"), this.element.addClass("annotator-touch-widget annotator-touch-viewer"), 
            this.on("load", this._onLoad);
        }
        var i;
        return n(o, e), i = Annotator.$, o.prototype.events = {
            ".annotator-item tap": "_onTap",
            ".annotator-edit tap": "_onEdit",
            ".annotator-delete tap": "_onDelete"
        }, o.prototype.hideAllControls = function() {
            return this.element.find(".annotator-item").removeClass(this.viewer.classes.showControls), 
            this;
        }, o.prototype._onLoad = function() {
            var t;
            return (t = this.element.find(".annotator-controls")).toggleClass("annotator-controls annotator-touch-controls"), 
            t.find("button").addClass("annotator-button");
        }, o.prototype._onTap = function(t) {
            var e, n;
            if (e = (n = i(t.currentTarget)).hasClass(this.viewer.classes.showControls), this.hideAllControls(), 
            !e) return n.addClass(this.viewer.classes.showControls);
        }, o.prototype._onEdit = function(t) {
            return t.preventDefault(), this.viewer.onEditClick(t);
        }, o.prototype._onDelete = function(t) {
            return t.preventDefault(), this.viewer.onDeleteClick(t);
        }, o;
    }(Annotator.Delegator);
}.call(this), function() {
    var t = function(t, e) {
        return function() {
            return t.apply(e, arguments);
        };
    }, e = Object.prototype.hasOwnProperty, n = function(t, n) {
        function o() {
            this.constructor = t;
        }
        for (var i in n) e.call(n, i) && (t[i] = n[i]);
        return o.prototype = n.prototype, t.prototype = new o(), t.__super__ = n.prototype, 
        t;
    };
    Annotator.Plugin.Offline = function(o) {
        function i() {
            var n, o, s;
            for (n in this._onOffline = t(this._onOffline, this), this._onOnline = t(this._onOnline, this), 
            i.__super__.constructor.apply(this, arguments), this.store = new i.Store(), this.cache = {}, 
            s = {
                online: "online",
                offline: "offline",
                beforeAnnotationLoaded: "setAnnotationData",
                beforeAnnotationCreated: "setAnnotationData"
            }) e.call(s, n) && (o = s[n], "function" == typeof this.options[o] && this.on(n, r.proxy(this.options, o)));
        }
        var r;
        return n(i, o), Annotator._t, r = Annotator.$, i.ANNOTATION_PREFIX = "annotation.", 
        i.uuid = function() {
            return ("" + Math.random() + new Date().getTime()).slice(2);
        }, i.prototype.events = {
            annotationCreated: "_onAnnotationCreated",
            annotationUpdated: "_onAnnotationUpdated",
            annotationDeleted: "_onAnnotationDeleted"
        }, i.prototype.options = {
            getUniqueKey: function(t) {
                return t.id || (t.id = i.uuid()), t.id;
            },
            shouldLoadAnnotation: function(t) {
                return !0;
            }
        }, i.prototype.pluginInit = function() {
            if (Annotator.supported()) return this.loadAnnotationsFromStore(), this.isOnline() ? this.online() : this.offline(), 
            r(window).bind({
                online: this._onOnline,
                offline: this._onOffline
            });
        }, i.prototype.annotations = function() {
            return this.cache;
        }, i.prototype.online = function() {
            return this.publish("online", [ this ]), this;
        }, i.prototype.offline = function() {
            return this.publish("offline", [ this ]), this;
        }, i.prototype.isOnline = function() {
            return window.navigator.onLine;
        }, i.prototype.loadAnnotationsFromStore = function() {
            var t, e, n, o, r;
            for (n = [], o = 0, r = (e = this.store.all(i.ANNOTATION_PREFIX)).length; o < r; o++) t = e[o], 
            this.options.shouldLoadAnnotation(t) && (this.publish("beforeAnnotationLoaded", [ t, this ]), 
            this.publish("annotationLoaded", [ t, this ]), this.cache[this.keyForAnnotation(t)] = t, 
            n.push(t));
            return n.length && this.annotator.loadAnnotations(n), this;
        }, i.prototype.addAnnotation = function(t, e) {
            return null == e && (e = {}), !this.cache[this.options.getUniqueKey(t)] && this.options.shouldLoadAnnotation(t) ? this.annotator.setupAnnotation(t, e.silent) : this.updateStoredAnnotation(t), 
            this;
        }, i.prototype.removeAnnotation = function(t) {
            return this.options.shouldLoadAnnotation(t) ? this.annotator.deleteAnnotation(t) : this.removeStoredAnnotation(t), 
            this;
        }, i.prototype.updateStoredAnnotation = function(t) {
            var e, n, o, i;
            return e = this.keyForAnnotation(t), n = this.keyForStore(t), (o = this.cache[e]) ? r.extend(o, t) : o = this.cache[e] = t, 
            delete (i = r.extend({}, o)).highlights, this.store.set(n, i), this;
        }, i.prototype.removeStoredAnnotation = function(t) {
            var e, n;
            return e = this.keyForAnnotation(t), n = this.keyForStore(t), this.store.remove(n), 
            delete this.cache[e], this;
        }, i.prototype.keyForAnnotation = function(t) {
            return this.options.getUniqueKey.call(this, t, this);
        }, i.prototype.keyForStore = function(t) {
            return i.ANNOTATION_PREFIX + this.keyForAnnotation(t);
        }, i.prototype._onOnline = function(t) {
            return this.online();
        }, i.prototype._onOffline = function(t) {
            return this.offline();
        }, i.prototype._onAnnotationCreated = function(t) {
            return this.updateStoredAnnotation(t);
        }, i.prototype._onAnnotationUpdated = function(t) {
            return this.updateStoredAnnotation(t);
        }, i.prototype._onAnnotationDeleted = function(t) {
            return this.removeStoredAnnotation(t);
        }, i;
    }(Annotator.Plugin), Annotator.Plugin.Offline.Store = function(t) {
        function e() {
            e.__super__.constructor.apply(this, arguments);
        }
        return n(e, t), e.KEY_PREFIX = "annotator.offline/", e.CACHE_DELIMITER = "--cache--", 
        e.localStorage = window.localStorage, e.isSupported = function() {
            try {
                return "localStorage" in window && null !== window.localStorage;
            } catch (t) {
                return !1;
            }
        }, e.now = function() {
            return new Date().getTime();
        }, e.prototype.all = function(t) {
            var n, o, i, r;
            for (n in null == t && (t = ""), r = [], o = this.prefixed(t), localStorage) 0 === n.indexOf(o) && (i = this.get(n.slice(e.KEY_PREFIX.length)), 
            r.push(i));
            return r;
        }, e.prototype.get = function(t) {
            var n;
            return (n = e.localStorage.getItem(this.prefixed(t))) && ((n = this.checkCache(n)) || this.remove(t)), 
            JSON.parse(n);
        }, e.prototype.set = function(t, n, o) {
            n = JSON.stringify(n), o && (n = e.now() + o + e.CACHE_DELIMITER + n);
            try {
                e.localStorage.setItem(this.prefixed(t), n);
            } catch (t) {
                this.publish("error", [ t, this ]);
            }
            return this;
        }, e.prototype.remove = function(t) {
            return e.localStorage.removeItem(this.prefixed(t)), this;
        }, e.prototype.clear = function() {
            var t, n;
            for (t in n = e.localStorage) 0 === t.indexOf(e.KEY_PREFIX) && n.removeItem(t);
            return this;
        }, e.prototype.prefixed = function(t) {
            return e.KEY_PREFIX + t;
        }, e.prototype.checkCache = function(t) {
            var n;
            return t.indexOf(e.CACHE_DELIMITER) > -1 && (n = t.split(e.CACHE_DELIMITER), t = e.now() > n.shift() ? null : n.join(e.CACHE_DELIMITER)), 
            t;
        }, e;
    }(Annotator.Delegator);
}.call(this);

var _ref, __bind = function(t, e) {
    return function() {
        return t.apply(e, arguments);
    };
}, __hasProp = {}.hasOwnProperty, __extends = function(t, e) {
    for (var n in e) __hasProp.call(e, n) && (t[n] = e[n]);
    function o() {
        this.constructor = t;
    }
    return o.prototype = e.prototype, t.prototype = new o(), t.__super__ = e.prototype, 
    t;
};

Annotator.Plugin.Share = function(t) {
    function e(t, n) {
        return void 0 !== n && (this.options.shareIn = void 0 !== n.shareIn ? n.shareIn : this.options.shareIn), 
        this.buildHTMLShareButton = __bind(this.buildHTMLShareButton, this), this.runningAPI = __bind(this.runningAPI, this), 
        this.updateViewer = __bind(this.updateViewer, this), _ref = e.__super__.constructor.apply(this, arguments);
    }
    return __extends(e, t), e.prototype.options = {
        shareIn: [ "facebook", "twitter", "email", "google" ],
        getUrl: {
            facebook: function(t, e, n) {
                return "https://www.facebook.com/sharer/sharer.php?s=100&p[url]=" + e + "&p[title]=" + encodeURIComponent("Open Video Annotation") + "&p[summary]=" + n;
            },
            twitter: function(t, e, n) {
                return "https://twitter.com/intent/tweet?original_referer=" + e + "&source=tweetbutton&url=" + e + "&via=OpenVideoAnnotation&text=" + encodeURIComponent("I want to share the next Open Video Annotation: ");
            },
            google: function(t, e, n) {
                return "https://plus.google.com/share?url=" + e;
            },
            email: function(t, e, n) {
                return "mailto:?subject=" + t + "&body=" + e;
            }
        },
        baseUrl: ""
    }, e.prototype.field = null, e.prototype.input = null, e.prototype.pluginInit = function() {
        if (console.log("Share-pluginInit"), Annotator.supported()) {
            this.field = this.annotator.editor.addField({
                type: "input"
            });
            var t = Annotator.$('<li class="annotator-item">' + this.buildHTMLShareButton("Share without saving:") + "</li>");
            Annotator.$(this.field).replaceWith(t), this.field = t[0], this.buttonsActions(this.field, 2, this.options.baseUrl);
            var e = this.initAPI();
            this.runAPI(e);
            this.annotator.viewer.addField({
                load: this.updateViewer
            });
            return this.input = $(this.field).find(":input");
        }
    }, e.prototype.buildHTMLShareButton = function(t, e) {
        t = t || "", e = void 0 !== e ? 'annotationId="' + e + '"' : "";
        return '<div class="share-container-annotator">' + ("" != t ? '<div class="share-text-annotator">' + t + "</div>" : "") + ('<div class="share-button-annotator share-button" ' + e + "></div>") + '<div class="share-popup-overlay-bg" style="z-index:30000000000"><div class="share-popup"><div class="share-popup-items"></div><div class="close-btn">Close</div></div></div></div>';
    }, e.prototype.buildHTMLPopup = function(t) {
        var e = "";
        void 0 !== this.options.shareIn && this.options.shareIn.forEach(function(t) {
            e += '<div class="share-' + t + '-annotator share-button">' + t.charAt(0).toUpperCase() + t.slice(1) + "</div>";
        }), this.uri = void 0 !== this.uri ? this.uri : "";
        t = '<div class="share-popup-title">' + t.replace(":", "") + "</div>";
        var n = '<input type="text" class="share-popup-uri" onclick="javascript:this.select();" readonly="true" value="' + this.uri + '">';
        return t + e + '<div class="share-popup-copy">Copy and Share:</div>' + n;
    }, e.prototype.buttonsActions = function(t, e, n) {
        var o = this;
        $(t).find(".close-btn").click(function() {
            $(".share-popup-overlay-bg").hide();
        }), $(t).find(".share-popup-overlay-bg").click(function() {
            $(".share-popup-overlay-bg").hide();
        }), $(t).find(".share-popup").click(function() {
            return !1;
        }), $(t).find(".share-button-annotator.share-button").click(function(t) {
            t.preventDefault();
            var i = this, r = $(this).attr("annotationId"), s = 1 == e ? "Share" : "Share without saving";
            o.uri = o.createAPIURL(e, r, n), $(this).parent().find(".share-popup-overlay-bg").show(), 
            $(this).parent().find(".share-popup-items").html(o.buildHTMLPopup(s)), void 0 !== o.options.shareIn && o.options.shareIn.forEach(function(t) {
                $(i).parent().find(".share-" + t + "-annotator.share-button").click(function() {
                    var n = o.createAPIURL(e, r, n);
                    if (link = encodeURIComponent(n), noteText = o.getSource("ovaText"), finalUrl = "", 
                    1 == e) {
                        var i = o.annotator.viewer, s = $(i.element).find("div:first").html();
                        noteText = encodeURIComponent(s);
                    }
                    finalUrl = void 0 !== o.options.getUrl[t] ? o.options.getUrl[t]("Sharing a annotation with Open Video Annotation", link, noteText) : "", 
                    void 0 !== o.options.getUrl[t] && window.open(finalUrl);
                });
            });
        });
    }, e.prototype.createAPIURL = function(t, e, n) {
        var o = this.annotator.editor;
        t = t || 1, n = n || window.location.href;
        (n += n.indexOf("?") >= 0 ? "&" : "?", 1 === t) ? n += "ovaId=" + (e = void 0 !== e ? e : "") : 2 === t && (n += "ovaText=" + (this.getSource("ovaText") || " "), 
        void 0 !== o.VideoJS && -1 !== o.VideoJS ? n += "&ovaStart=" + (this.getSource("ovaStart") || " ") + "&ovaEnd=" + (this.getSource("ovaEnd") || " ") + "&ovaContainer=" + (this.getSource("ovaContainer") || " ") + "&ovaSrc=" + (this.getSource("ovaSrc") || " ") : void 0 !== o.OpenSeaDragon && -1 !== o.OpenSeaDragon ? n += "&ovaLeft=" + (this.getSource("ovaLeft") || " ") + "&ovaTop=" + (this.getSource("ovaTop") || " ") + "&ovaWidth=" + (this.getSource("ovaWidth") || " ") + "&ovaHeight=" + (this.getSource("ovaHeight") || " ") + "&ovaLeftZoom=" + (this.getSource("ovaLeftZoom") || " ") + "&ovaTopZoom=" + (this.getSource("ovaTopZoom") || " ") + "&ovaWidthZoom=" + (this.getSource("ovaWidthZoom") || " ") + "&ovaHeightZoom=" + (this.getSource("ovaHeightZoom") || " ") + "&ovaContainer=" + (this.getSource("ovaContainer") || " ") + "&ovaSrc=" + (this.getSource("ovaSrc") || " ") : n += "&ovaStart=" + (this.getSource("ovaStart") || " ") + "&ovaEnd=" + (this.getSource("ovaEnd") || " ") + "&ovastartOffset=" + (this.getSource("ovastartOffset") || " ") + "&ovaendOffset=" + (this.getSource("ovaendOffset") || " "));
        return n;
    }, e.prototype.getSource = function(t) {
        if ("ovaId" == (t = t || "")) t = this.annotation.id; else {
            var e = this.annotator, n = e.editor, o = $(n.element).find("textarea")[0];
            if ("ovaText" == t && (t = o.value), void 0 !== n.VideoJS && -1 !== n.VideoJS) "ovaContainer" == t ? t = n.VideoJS : "ovaSrc" == t ? t = e.mplayer[n.VideoJS].tech.options_.source.src : "ovaStart" == t ? t = e.mplayer[n.VideoJS].rangeslider.getValues().start : "ovaEnd" == t && (t = e.mplayer[n.VideoJS].rangeslider.getValues().end); else if (void 0 !== n.OpenSeaDragon && -1 !== n.OpenSeaDragon) {
                var i = n.annotation;
                if ("ovaLeft" == t) t = e.osda.rectPosition.left; else if ("ovaTop" == t) t = e.osda.rectPosition.top; else if ("ovaWidth" == t) t = e.osda.rectPosition.width; else if ("ovaHeight" == t) t = e.osda.rectPosition.height; else if ("ovaLeftZoom" == t) t = e.osda.viewer.drawer.viewport.getBounds().x; else if ("ovaTopZoom" == t) t = e.osda.viewer.drawer.viewport.getBounds().y; else if ("ovaWidthZoom" == t) t = e.osda.viewer.drawer.viewport.getBounds().width; else if ("ovaHeightZoom" == t) t = e.osda.viewer.drawer.viewport.getBounds().height; else if ("ovaContainer" == t) t = e.osda.viewer.id; else if ("ovaSrc" == t) {
                    var r = void 0 !== (t = e.osda.viewer.source).tilesUrl ? t.tilesUrl : "", s = void 0 !== t.getTileUrl ? t.getTileUrl : "";
                    t = "" != r ? r : ("" + s).replace(/\s+/g, " ");
                }
            } else {
                i = n.annotation;
                "ovastartOffset" == t ? t = i.ranges[0].startOffset : "ovaendOffset" == t ? t = i.ranges[0].endOffset : "ovaStart" == t ? t = i.ranges[0].start : "ovaEnd" == t && (t = i.ranges[0].end);
            }
        }
        return encodeURIComponent(t);
    }, e.prototype.initAPI = function() {
        console.log("initAPI");
        var t = {}, e = this.getParameterByName("ovaId"), n = this.getParameterByName("ovaStart"), o = this.getParameterByName("ovaEnd"), i = this.getParameterByName("ovaContainer"), r = this.getParameterByName("ovaSrc"), s = this.getParameterByName("ovaText"), a = this.getParameterByName("ovaUser"), u = this.getParameterByName("ovaLeft"), l = this.getParameterByName("ovaTop"), h = this.getParameterByName("ovaWidth"), c = this.getParameterByName("ovaHeight"), d = this.getParameterByName("ovaLeftZoom"), p = this.getParameterByName("ovaTopZoom"), f = this.getParameterByName("ovaWidthZoom"), g = this.getParameterByName("ovaHeightZoom"), m = this.getParameterByName("ovastartOffset"), v = this.getParameterByName("ovaendOffset"), y = top.location.href;
        return "" != e && (y = this.removeVariableFromURL(y, "ovaId")), "" != n && (y = this.removeVariableFromURL(y, "ovaStart")), 
        "" != o && (y = this.removeVariableFromURL(y, "ovaEnd")), "" != i && (y = this.removeVariableFromURL(y, "ovaContainer")), 
        "" != r && (y = this.removeVariableFromURL(y, "ovaSrc")), "" != s && (y = this.removeVariableFromURL(y, "ovaText")), 
        "" != a && (y = this.removeVariableFromURL(y, "ovaUser")), "" != u && (y = this.removeVariableFromURL(y, "ovaLeft")), 
        "" != l && (y = this.removeVariableFromURL(y, "ovaTop")), "" != h && (y = this.removeVariableFromURL(y, "ovaWidth")), 
        "" != c && (y = this.removeVariableFromURL(y, "ovaHeight")), "" != d && (y = this.removeVariableFromURL(y, "ovaLeftZoom")), 
        "" != p && (y = this.removeVariableFromURL(y, "ovaTopZoom")), "" != f && (y = this.removeVariableFromURL(y, "ovaWidthZoom")), 
        "" != g && (y = this.removeVariableFromURL(y, "ovaHeightZoom")), "" != m && (y = this.removeVariableFromURL(y, "ovastartOffset")), 
        "" != v && (y = this.removeVariableFromURL(y, "ovaendOffset")), window.history.pushState("object or string", "Title", y), 
        "" != e && $.extend(t, {
            method: 1,
            ovaId: e
        }), "" != n && "" != o && "" != i && "" != r ? $.extend(t, {
            method: 2,
            start: n,
            end: o,
            container: i,
            src: r,
            text: s,
            user: a
        }) : "" != u && "" != l && "" != h && "" != c && "" != d && "" != p && "" != f && "" != g ? $.extend(t, {
            method: 2,
            Left: u,
            Top: l,
            Width: h,
            Height: c,
            leftZoom: d,
            topZoom: p,
            widthZoom: f,
            heightZoom: g,
            container: i,
            src: r,
            text: s,
            user: a
        }) : "" != n && "" != o && "" != m && "" != v && $.extend(t, {
            method: 2,
            start: n,
            end: o,
            startOffset: m,
            endOffset: v,
            text: s,
            user: a
        }), t;
    }, e.prototype.runningAPI = function(t, e) {
        var n, o = $(".annotator-wrapper").parent()[0];
        if ($.data(o, "annotator", this.annotator), annotator = window.annotator = $.data(o, "annotator"), 
        n = void 0 !== annotator.mplayer ? annotator.mplayer : [], void 0 !== annotator.osda ? annotator.osda : [], 
        void 0 !== e && void 0 !== e.method && ("1" == e.method || "2" == e.method)) if ("1" == e.method) {
            var i = annotator.plugins.Store.annotations, r = decodeURIComponent(e.ovaId);
            for (var s in i) {
                var a;
                if (void 0 !== (O = i[s]).id && O.id == r) if (this._isVideo(O)) {
                    if (void 0 !== n[O.target.container]) if ((f = n[O.target.container]).id_ == O.target.container) {
                        var u = O;
                        videojs(f.id_).ready(function() {
                            "Youtube" != f.techName && f.preload("auto"), f.autoPlayAPI = u, f.play();
                        });
                    }
                } else if ("image" == O.media) {
                    if ($("div#" + O.target.container).length) {
                        var l = void 0 !== annotator.osda && void 0 !== annotator.osda.viewer;
                        function h() {
                            if (l = void 0 !== annotator.osda && void 0 !== annotator.osda.viewer, void 0 === a && (a = s), 
                            l) {
                                if (O = i[a], $(O.highlights).parent().find(".annotator-hl").removeClass("api"), 
                                $(O.highlights).addClass("api"), "undefined" != typeof annotator && void 0 !== annotator.osda) {
                                    var t = annotator.osda.viewer.drawer.viewport.getBounds(), e = void 0 !== O.bounds ? O.bounds : {};
                                    void 0 !== e.x && (t.x = e.x), void 0 !== e.y && (t.y = e.y), void 0 !== e.width && (t.width = e.width), 
                                    void 0 !== e.height && (t.height = e.height), annotator.osda.viewer.drawer.viewport.fitBounds(t);
                                }
                                $("html,body").animate({
                                    scrollTop: $(annotator.osda.viewer.element).offset().top
                                }, "slow");
                            } else setTimeout(h, 200);
                        }
                        h();
                    }
                } else {
                    var c = void 0 !== O.ranges && void 0 !== O.ranges[0], d = c ? O.ranges[0].startOffset : "", p = c ? O.ranges[0].endOffset : "";
                    void 0 !== d && void 0 !== p && ($(O.highlights).addClass("api"), $("html,body").animate({
                        scrollTop: $(O.highlights[0]).offset().top
                    }, "slow"));
                }
            }
        } else if ("2" == e.method) {
            if (void 0 !== n) {
                var f, g = decodeURIComponent(e.container), m = void 0 !== (f = n[g]) && g == f.id_, v = !isNaN(parseFloat(e.start)) && isFinite(e.start) && !isNaN(parseFloat(e.end)) && isFinite(e.end), y = !1;
                if (m) {
                    var w = decodeURIComponent(e.src), b = w.substring(0, w.lastIndexOf(".")), x = "" == f.tech.options_.source.src ? f.tag.currentSrc : f.tech.options_.source.src;
                    y = b == (x = x.substring(0, x.lastIndexOf(".")));
                }
                if (m && v && y) {
                    var T = {
                        rangeTime: {
                            start: e.start,
                            end: e.end
                        },
                        created: new Date().toISOString(),
                        updated: new Date().toISOString(),
                        target: {
                            container: g,
                            src: w
                        },
                        media: "video",
                        text: decodeURIComponent(e.text),
                        user: decodeURIComponent(e.user)
                    };
                    videojs(f.id_).ready(function() {
                        "Youtube" != f.techName && f.preload("auto"), f.autoPlayAPI = T, f.play();
                    });
                }
            }
            d = e.startOffset, p = e.endOffset;
            if (!m && void 0 !== d && void 0 !== p) {
                T = {
                    ranges: [ {
                        start: decodeURIComponent(e.start),
                        end: decodeURIComponent(e.end),
                        startOffset: decodeURIComponent(e.startOffset),
                        endOffset: decodeURIComponent(e.endOffset)
                    } ],
                    created: new Date().toISOString(),
                    updated: new Date().toISOString(),
                    media: "text",
                    text: decodeURIComponent(e.text),
                    user: decodeURIComponent(e.user)
                };
                annotator.setupAnnotation(T), $(T.highlights).addClass("api"), $("html,body").animate({
                    scrollTop: $(T.highlights[0]).offset().top
                }, "slow");
            }
            var _ = e.Left, C = e.Top, A = e.Width, S = e.Height, E = e.leftZoom, k = e.topZoom, N = e.widthZoom, D = e.heightZoom;
            if (!m && void 0 !== _ && void 0 !== C && void 0 !== A && void 0 !== S && void 0 !== E && void 0 !== k && void 0 !== N && void 0 !== D) {
                var O = {
                    rangePosition: {
                        width: parseFloat(decodeURIComponent(e.Width)),
                        top: parseFloat(decodeURIComponent(e.Top)),
                        left: parseFloat(decodeURIComponent(e.Left)),
                        height: parseFloat(decodeURIComponent(e.Height))
                    },
                    bounds: {
                        width: parseFloat(decodeURIComponent(e.widthZoom)),
                        x: parseFloat(decodeURIComponent(e.leftZoom)),
                        y: parseFloat(decodeURIComponent(e.topZoom)),
                        height: parseFloat(decodeURIComponent(e.heightZoom))
                    },
                    target: {
                        container: e.container,
                        src: e.src
                    },
                    created: new Date().toISOString(),
                    updated: new Date().toISOString(),
                    media: "image",
                    text: decodeURIComponent(e.text),
                    user: decodeURIComponent(e.user)
                };
                l = void 0 !== annotator.osda && void 0 !== annotator.osda.viewer;
                function h() {
                    if (l = void 0 !== annotator.osda && void 0 !== annotator.osda.viewer) {
                        annotator.plugins.Store.annotations.push(O), annotator.osda.viewer.annotationInstance.drawRect(O), 
                        $(O.highlights).addClass("api");
                        var t = annotator.osda.viewer.drawer.viewport.getBounds(), e = void 0 !== O.bounds ? O.bounds : {};
                        void 0 !== e.x && (t.x = e.x), void 0 !== e.y && (t.y = e.y), void 0 !== e.width && (t.width = e.width), 
                        void 0 !== e.height && (t.height = e.height), annotator.osda.viewer.drawer.viewport.fitBounds(t), 
                        $("html,body").animate({
                            scrollTop: $(annotator.osda.viewer.element).offset().top
                        }, "slow");
                    } else setTimeout(h, 200);
                }
                h();
            }
        }
        annotator.isShareLoaded = !0, annotator.publish("shareloaded");
    }, e.prototype.runAPI = function(t) {
        var e = this, n = function(o) {
            e.runningAPI(o, t), e.annotator.unsubscribe("annotationsLoaded", n);
        };
        this.annotator.subscribe("annotationsLoaded", n);
    }, e.prototype._isVideo = function(t) {
        t = t || {};
        return rt = t.rangeTime, isVideo = void 0 !== t.media && "video" == t.media, hasContainer = void 0 !== t.target && void 0 !== t.target.container, 
        isNumber = "undefined" != typeof rt && !isNaN(parseFloat(rt.start)) && isFinite(rt.start) && !isNaN(parseFloat(rt.end)) && isFinite(rt.end), 
        isVideo && hasContainer && isNumber;
    }, e.prototype._isImage = function(t) {
        var e = $(".annotator-wrapper").parent()[0], n = window.annotator = $.data(e, "annotator"), o = t.rangePosition, i = void 0 !== n.osda, r = void 0 !== t.target && void 0 !== t.target.container, s = void 0 !== t.media && "image" == t.media;
        return i && r && s && void 0 !== o;
    }, e.prototype.getParameterByName = function(t) {
        t = t.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var e = new RegExp("[\\?&]" + t + "=([^&#]*)").exec("?" + window.location.href.split("?")[1]);
        return null == e ? "" : decodeURIComponent(e[1].replace(/\+/g, " "));
    }, e.prototype.removeVariableFromURL = function(t, e) {
        var n = String(t), o = new RegExp("\\?" + e + "=[^&]*&?", "gi");
        return n = n.replace(o, "?"), o = new RegExp("\\&" + e + "=[^&]*&?", "gi"), n = n.replace(o, "&"), 
        o = null, n = n.replace(/(\?|&)$/, "");
    }, e.prototype.updateViewer = function(t, e) {
        this.annotation = e;
        var n = this, o = (t = $(t)).addClass("share-viewer-annotator").html(function() {
            return n.buildHTMLShareButton("Share:", n.getSource("ovaId"));
        });
        return this.buttonsActions(t[0], 1, this.options.baseUrl), o;
    }, e;
}(Annotator.Plugin), function(t, e, n) {
    function o(t, e) {
        return t.bind ? t.bind(e) : function() {
            return t.apply(e, arguments);
        };
    }
    function i(t, e) {
        return t.classList ? t.classList.contains(e) : new RegExp("\\b" + e + "\\b", "i").test(t.className);
    }
    function r(t, e) {
        t.classList ? t.classList.add(e) : i(t, e) || (t.className += " " + e);
    }
    function s(t) {
        for (var e in this) 0 === e.indexOf("_on") && "function" == typeof this[e] && (this[e] = o(this[e], this));
        this.options = t = t || {}, this.root = t.root || n.documentElement, this.prefix = (t.prefix || "highlighter") + "-", 
        this.throttle = t.throttle || 1e3 / 60, this.selected = null, this.handles = {
            start: this.createHandle("start"),
            end: this.createHandle("end")
        }, !1 !== t.enable && this.enable();
    }
    s.prototype = {
        constructor: s,
        get: function() {
            return e.getSelection();
        },
        enable: function() {
            return this.enabled || (this.bind(this.root, {
                click: "_onClick"
            }), this.bind(n, {
                tapstart: "_onDocumentDown",
                mousedown: "_onDocumentDown"
            }), this.options.highlightStyles && (this.style = this.createStyle(), n.getElementsByTagName("head")[0].appendChild(this.style)), 
            n.body.appendChild(this.handles.start), n.body.appendChild(this.handles.end), this.hideHandles(), 
            this.enabled = !0), this;
        },
        disable: function() {
            this.enabled && (this.unbind(this.root, {
                click: "_onClick"
            }), this.unbind(n, {
                tapstart: "_onDocumentDown",
                mousedown: "_onDocumentDown"
            }), this.style && this.style.parentNode.removeChild(this.style), n.body.removeChild(this.handles.start), 
            n.body.removeChild(this.handles.end), this.get().removeAllRanges(), this.showHandles(), 
            this.enabled = !1);
        },
        isEnabled: function() {
            return this.enabled;
        },
        select: function(t) {
            var n = this.get(), o = e.scrollY, i = e.scrollX, r = t.getClientRects(), s = r[0], a = r[r.length - 1];
            return n.removeAllRanges(), n.addRange(t), this.positionHandles({
                x: s.left + i,
                y: s.top + o + s.height / 2
            }, {
                x: a.left + a.width + i,
                y: a.top + o + a.height / 2
            }), this.selected = t, this.showHandles();
        },
        deselect: function() {
            var t = this.get();
            return t && (this.selected = null, t.removeAllRanges()), this.hideHandles();
        },
        selectWord: function(t) {
            var e = this.createRange(t);
            return e && (e.expand("word"), e.toString().trim() && this.select(e)), this;
        },
        selectRange: function(t, e) {
            var o = n.createRange();
            return o.setStart(t.startContainer, t.startOffset), o.setEnd(e.endContainer, e.endOffset), 
            this.select(o);
        },
        expandStart: function(t) {
            var e = this.selected;
            return e && (e.startContainer !== t.startContainer || e.startOffset !== t.startOffset) && this.selectRange(t, e), 
            this;
        },
        expandEnd: function(t) {
            var e = this.selected;
            return e && (t.expand("character"), (e.endContainer !== t.endContainer || e.endOffset !== t.endOffset) && this.selectRange(e, t)), 
            this;
        },
        createRange: function(t) {
            return n.caretRangeFromPoint(t.x, t.y);
        },
        showHandles: function() {
            return function(t, e) {
                if (t.classList) t.classList.remove(e); else if (i(t, e)) {
                    var n = new RegExp("\\b" + e + "\\b", "i");
                    t.className = t.className.split(n).join("");
                }
            }(n.documentElement, this.prefix + "hide"), this;
        },
        hideHandles: function() {
            return r(n.documentElement, this.prefix + "hide"), this;
        },
        getFirstPosition: function(t, e) {
            var n = t.touches ? t.touches[0] : t;
            return n ? {
                x: n.clientX,
                y: n.clientY
            } : null;
        },
        bind: function(t, e) {
            var n, o;
            for (n in e) e.hasOwnProperty(n) && ("string" == typeof (o = e[n]) && (o = this[o]), 
            t.addEventListener(n, o, !1));
            return this;
        },
        unbind: function(t, e) {
            var n, o;
            for (n in e) e.hasOwnProperty(n) && ("string" == typeof (o = e[n]) && (o = this[o]), 
            t.removeEventListener(n, o, !1));
            return this;
        },
        updatePositionByHandle: function(t, e) {
            var n, o, i, r;
            return this.hideHandles(), o = this.createRange(t), this.showHandles(), o && (n = this.selected, 
            i = !this._isStartHandle && 1 === n.compareBoundaryPoints(Range.START_TO_START, o), 
            r = this._isStartHandle && -1 === n.compareBoundaryPoints(Range.END_TO_END, o), 
            i || r ? (this._isStartHandle = !this._isStartHandle, n.collapse(i), i ? this.selectRange(o, n) : this.selectRange(n, o)) : this[this._isStartHandle ? "expandStart" : "expandEnd"](o)), 
            this;
        },
        isHandle: function(t) {
            return t === this.handles.start || t === this.handles.end;
        },
        positionHandles: function(t, e) {
            return t = t || {}, e = e || {}, t.y && (this.handles.start.style.top = t.y + "px"), 
            t.x && (this.handles.start.style.left = t.x + "px"), e.y && (this.handles.end.style.top = e.y + "px"), 
            e.x && (this.handles.end.style.left = e.x + "px"), this;
        },
        createHandle: function(t) {
            var e = n.createElement("span");
            return r(e, this.prefix + "handle"), r(e, this.prefix + t), this.bind(e, {
                touchstart: "_onHandleDown",
                mousedown: "_onHandleDown"
            }), e;
        },
        createStyle: function() {
            var t = "::selection {$} ::-moz-selection {$} ::-webkit-selection {$}", e = n.createElement("style"), o = "string" == typeof this.options.highlightStyles, i = this.options.highlightStyles;
            return i = o ? i : "text-decoration: line-through;", t = t.replace(/\$/g, i), e.appendChild(n.createTextNode(t)), 
            e;
        },
        _onClick: function(t) {
            if (!this.selected && !this._cleared) {
                var e = this.getFirstPosition(t);
                e && this.selectWord(e), t.preventDefault();
            }
        },
        _onDocumentDown: function(t) {
            var e, n, o, i = this.getFirstPosition(t), r = this.selected;
            delete this._cleared, this.selected && i && !this.isHandle(t.target) && (n = -1 === (e = this.createRange(i)).compareBoundaryPoints(Range.START_TO_END, r), 
            o = 1 === e.compareBoundaryPoints(Range.END_TO_START, r), (n || o) && (this._cleared = !0, 
            this.deselect())), this.isEnabled() && t.preventDefault();
        },
        _onHandleDown: function(t) {
            var o = this.getFirstPosition(t);
            o && this.selected && (this._offset = {
                y: o.y - parseFloat(t.target.style.top) + e.scrollY,
                x: o.x - parseFloat(t.target.style.left) + e.scrollX
            }, this._startPosition = this._endPosition = o, this._isStartHandle = t.target === this.handles.start, 
            this.bind(n, {
                mousemove: "_onHandleMove",
                mouseup: "_onHandleUp",
                touchmove: "_onHandleMove",
                touchend: "_onHandleUp"
            })), t.stopPropagation(), t.preventDefault();
        },
        _onHandleMove: function(t) {
            var e, n = this;
            t.stopPropagation(), t.preventDefault(), this._throttled || (this._throttled = setTimeout(function() {
                n._throttled = null;
            }, this.throttle), this._startPosition && (e = this.getFirstPosition(t)) && (e = {
                y: e.y - this._offset.y,
                x: e.x - this._offset.x
            }, this.updatePositionByHandle(e, this._isStartHandle)));
        },
        _onHandleUp: function() {
            clearTimeout(this._throttled), delete this._isStartHandle, delete this._startPosition, 
            delete this._endPosition, delete this._throttled, delete this._offset, this.unbind(n, {
                mousemove: "_onHandleMove",
                mouseup: "_onHandleUp",
                touchmove: "_onHandleMove",
                touchend: "_onHandleUp"
            });
        }
    }, t.exports ? t.exports = s : t.Highlighter = s;
}("undefined" != typeof module ? module : this, this, this.document), function(t, e) {
    "object" == typeof exports && exports && "string" != typeof exports.nodeName ? e(exports) : "function" == typeof define && define.amd ? define([ "exports" ], e) : (t.Mustache = {}, 
    e(t.Mustache));
}(this, function(t) {
    var e = Object.prototype.toString, n = Array.isArray || function(t) {
        return "[object Array]" === e.call(t);
    };
    function o(t) {
        return "function" == typeof t;
    }
    function i(t) {
        return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
    }
    function r(t, e) {
        return null != t && "object" == typeof t && e in t;
    }
    var s = RegExp.prototype.test;
    var a = /\S/;
    function u(t) {
        return !function(t, e) {
            return s.call(t, e);
        }(a, t);
    }
    var l = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#x2F;",
        "`": "&#x60;",
        "=": "&#x3D;"
    };
    var h = /\s*/, c = /\s+/, d = /\s*=/, p = /\s*\}/, f = /#|\^|\/|>|\{|&|=|!/;
    function g(t) {
        this.string = t, this.tail = t, this.pos = 0;
    }
    function m(t, e) {
        this.view = t, this.cache = {
            ".": this.view
        }, this.parent = e;
    }
    function v() {
        this.cache = {};
    }
    g.prototype.eos = function() {
        return "" === this.tail;
    }, g.prototype.scan = function(t) {
        var e = this.tail.match(t);
        if (!e || 0 !== e.index) return "";
        var n = e[0];
        return this.tail = this.tail.substring(n.length), this.pos += n.length, n;
    }, g.prototype.scanUntil = function(t) {
        var e, n = this.tail.search(t);
        switch (n) {
          case -1:
            e = this.tail, this.tail = "";
            break;

          case 0:
            e = "";
            break;

          default:
            e = this.tail.substring(0, n), this.tail = this.tail.substring(n);
        }
        return this.pos += e.length, e;
    }, m.prototype.push = function(t) {
        return new m(t, this);
    }, m.prototype.lookup = function(t) {
        var e, n = this.cache;
        if (n.hasOwnProperty(t)) e = n[t]; else {
            for (var i, s, a = this, u = !1; a; ) {
                if (t.indexOf(".") > 0) for (e = a.view, i = t.split("."), s = 0; null != e && s < i.length; ) s === i.length - 1 && (u = r(e, i[s])), 
                e = e[i[s++]]; else e = a.view[t], u = r(a.view, t);
                if (u) break;
                a = a.parent;
            }
            n[t] = e;
        }
        return o(e) && (e = e.call(this.view)), e;
    }, v.prototype.clearCache = function() {
        this.cache = {};
    }, v.prototype.parse = function(e, o) {
        var r = this.cache, s = r[e];
        return null == s && (s = r[e + ":" + (o || t.tags).join(":")] = function(e, o) {
            if (!e) return [];
            var r, s, a, l = [], m = [], v = [], y = !1, w = !1;
            function b() {
                if (y && !w) for (;v.length; ) delete m[v.pop()]; else v = [];
                y = !1, w = !1;
            }
            function x(t) {
                if ("string" == typeof t && (t = t.split(c, 2)), !n(t) || 2 !== t.length) throw new Error("Invalid tags: " + t);
                r = new RegExp(i(t[0]) + "\\s*"), s = new RegExp("\\s*" + i(t[1])), a = new RegExp("\\s*" + i("}" + t[1]));
            }
            x(o || t.tags);
            for (var T, _, C, A, S, E, k = new g(e); !k.eos(); ) {
                if (T = k.pos, C = k.scanUntil(r)) for (var N = 0, D = C.length; N < D; ++N) u(A = C.charAt(N)) ? v.push(m.length) : w = !0, 
                m.push([ "text", A, T, T + 1 ]), T += 1, "\n" === A && b();
                if (!k.scan(r)) break;
                if (y = !0, _ = k.scan(f) || "name", k.scan(h), "=" === _ ? (C = k.scanUntil(d), 
                k.scan(d), k.scanUntil(s)) : "{" === _ ? (C = k.scanUntil(a), k.scan(p), k.scanUntil(s), 
                _ = "&") : C = k.scanUntil(s), !k.scan(s)) throw new Error("Unclosed tag at " + k.pos);
                if (S = [ _, C, T, k.pos ], m.push(S), "#" === _ || "^" === _) l.push(S); else if ("/" === _) {
                    if (!(E = l.pop())) throw new Error('Unopened section "' + C + '" at ' + T);
                    if (E[1] !== C) throw new Error('Unclosed section "' + E[1] + '" at ' + T);
                } else "name" === _ || "{" === _ || "&" === _ ? w = !0 : "=" === _ && x(C);
            }
            if (E = l.pop()) throw new Error('Unclosed section "' + E[1] + '" at ' + k.pos);
            return function(t) {
                for (var e, n = [], o = n, i = [], r = 0, s = t.length; r < s; ++r) switch ((e = t[r])[0]) {
                  case "#":
                  case "^":
                    o.push(e), i.push(e), o = e[4] = [];
                    break;

                  case "/":
                    i.pop()[5] = e[2], o = i.length > 0 ? i[i.length - 1][4] : n;
                    break;

                  default:
                    o.push(e);
                }
                return n;
            }(function(t) {
                for (var e, n, o = [], i = 0, r = t.length; i < r; ++i) (e = t[i]) && ("text" === e[0] && n && "text" === n[0] ? (n[1] += e[1], 
                n[3] = e[3]) : (o.push(e), n = e));
                return o;
            }(m));
        }(e, o)), s;
    }, v.prototype.render = function(t, e, n) {
        var o = this.parse(t), i = e instanceof m ? e : new m(e);
        return this.renderTokens(o, i, n, t);
    }, v.prototype.renderTokens = function(t, e, n, o) {
        for (var i, r, s, a = "", u = 0, l = t.length; u < l; ++u) s = void 0, "#" === (r = (i = t[u])[0]) ? s = this.renderSection(i, e, n, o) : "^" === r ? s = this.renderInverted(i, e, n, o) : ">" === r ? s = this.renderPartial(i, e, n, o) : "&" === r ? s = this.unescapedValue(i, e) : "name" === r ? s = this.escapedValue(i, e) : "text" === r && (s = this.rawValue(i)), 
        void 0 !== s && (a += s);
        return a;
    }, v.prototype.renderSection = function(t, e, i, r) {
        var s = this, a = "", u = e.lookup(t[1]);
        if (u) {
            if (n(u)) for (var l = 0, h = u.length; l < h; ++l) a += this.renderTokens(t[4], e.push(u[l]), i, r); else if ("object" == typeof u || "string" == typeof u || "number" == typeof u) a += this.renderTokens(t[4], e.push(u), i, r); else if (o(u)) {
                if ("string" != typeof r) throw new Error("Cannot use higher-order sections without the original template");
                null != (u = u.call(e.view, r.slice(t[3], t[5]), function(t) {
                    return s.render(t, e, i);
                })) && (a += u);
            } else a += this.renderTokens(t[4], e, i, r);
            return a;
        }
    }, v.prototype.renderInverted = function(t, e, o, i) {
        var r = e.lookup(t[1]);
        if (!r || n(r) && 0 === r.length) return this.renderTokens(t[4], e, o, i);
    }, v.prototype.renderPartial = function(t, e, n) {
        if (n) {
            var i = o(n) ? n(t[1]) : n[t[1]];
            return null != i ? this.renderTokens(this.parse(i), e, n, i) : void 0;
        }
    }, v.prototype.unescapedValue = function(t, e) {
        var n = e.lookup(t[1]);
        if (null != n) return n;
    }, v.prototype.escapedValue = function(e, n) {
        var o = n.lookup(e[1]);
        if (null != o) return t.escape(o);
    }, v.prototype.rawValue = function(t) {
        return t[1];
    }, t.name = "mustache.js", t.version = "2.3.0", t.tags = [ "{{", "}}" ];
    var y = new v();
    return t.clearCache = function() {
        return y.clearCache();
    }, t.parse = function(t, e) {
        return y.parse(t, e);
    }, t.render = function(t, e, o) {
        if ("string" != typeof t) throw new TypeError('Invalid template! Template should be a "string" but "' + (n(i = t) ? "array" : typeof i) + '" was given as the first argument for mustache#render(template, view, partials)');
        var i;
        return y.render(t, e, o);
    }, t.to_html = function(e, n, i, r) {
        var s = t.render(e, n, i);
        if (!o(r)) return s;
        r(s);
    }, t.escape = function(t) {
        return String(t).replace(/[&<>"'`=\/]/g, function(t) {
            return l[t];
        });
    }, t.Scanner = g, t.Context = m, t.Writer = v, t;
}), window.onload = function(t) {
    (t = window.Annotator || t).Plugin.SuggestEdit = function(t, e) {
        var n = {
            options: {
                suggestClass: "annotator-editing",
                describeClass: "annotator-describe",
                combinedClass: "annotator-combined"
            },
            pluginInit: function() {
                this.annotator.viewer.addField({
                    load: function(t, n) {
                        t.innerHTML = e;
                    }
                }), this.annotator.editor.addField({
                    load: function(t, e) {
                        t.innerHTML = "<input id = 'sugCheck' type='checkbox' name='terms' /> Edit <input id = 'DesCheck' type='checkbox' name='terms' /> Describe";
                    },
                    submit: function(t, e) {
                        $("#sugCheck").is(":checked") && $("#DesCheck").is(":checked") ? (e.edit = !0, e.describe = !0) : $("#sugCheck").is(":checked") ? (e.edit = !0, 
                        e.describe = !1) : $("#DesCheck").is(":checked") ? (e.edit = !1, e.describe = !0) : (e.edit = !1, 
                        e.describe = !1);
                    }
                }), this.annotator.subscribe("annotationCreated", function(t) {
                    if (1 == t.edit) {
                        $(t.highlights).addClass(n.options.suggestClass), console.info("The annotation for editing: %o has just been created!", t), 
                        (o = new Annotation_structure(t)).motivation = "editing";
                        var e = $.extend({}, o, t);
                        console.log("This is Anno Data Struct ", e);
                    } else if (1 == t.describe) {
                        $(t.highlights).addClass(n.options.describeClass), console.info("The annotation for describing: %o has just been created!", t), 
                        (o = new Annotation_structure(t)).motivation = "describing";
                        e = $.extend({}, o, t);
                        console.log("This is Anno Data Struct ", e);
                    } else if (1 == t.edit && 1 == t.describe) {
                        $(t.highlights).addClass(n.options.combinedClass), console.info("The annotation for both editing and describing: %o has just been created!", t), 
                        (o = new Annotation_structure(t)).motivation = "describe and edit";
                        e = $.extend({}, o, t);
                        console.log("This is Anno Data Struct ", e);
                    } else {
                        var o = new Annotation_structure(t);
                        e = $.extend({}, o, t);
                        console.log("This is Anno Data Struct ", e);
                    }
                });
            }
        };
        return Annotation_structure = function(t) {
            return this.context = "http://www.w3.org/ns/anno.jsonld", this.id = " ", this.type = "Annotation", 
            this.body = t.text, this.target = t.quote, this.creator = "ashwini", this.created = Date(), 
            this.motivation = "Commenting", this;
        }, n;
    };
};